2016-07-20 17:32:30,543 wechatno_wemall.py[line: 29] INFO: 正在发起POST请求...
2016-07-20 17:32:30,545 httpprotocol.py[line: 67] INFO: 发起的请求为：http://m.test.saofu.cn:80/goods/plist
2016-07-20 17:32:30,600 wechatno_wemall.py[line: 38] INFO: 正在解析返回结果:{'dataList': [{'shop': {'name': None, 'fullName': None, 'id': 42, 'thirdAppId': None, 'logoUrl': None, 'serial': None, 'parent': None, 'phoneNumber': None, 'createTime': None, 'email': None, 'suffixShop': None, 'printAdText': None, 'printAdUrl': None}, 'id': 26189, 'istop': 0, 'baiduSyncStatus': None, 'rank': None, 'transientPrice': 0.0, 'soldAllCount': 274, 'mallGoodsCate': {'shop': None, 'name': None, 'goodsAmount': 0, 'id': 260, 'goodsSoldOutAmount': 0, 'oldName': None, 'orderNum': None, 'delFlag': None, 'branchId': None}, 'standardTopPrice': 0.0, 'branch': None, 'waimaiChannel': None, 'mallGoodsStandards': None, 'description': '100', 'goodsCopyId': None, 'mallGoodsCatagoryId': None, 'iconUrl': 'http://res.test.saofu.cn/saofu/upload/image/2016/04/25/bef60928-a428-4dde-85b1-17fff4005959.jpg', 'hasActivity': 0, 'standardAllSku': None, 'preRemind': None, 'dishCount': None, 'elemeSyncStatus': None, 'detail': None, 'cannotUseTime': None, 'rules': None, 'standard': 1, 'cateId': 0, 'servicePhone': None, 'isSku': 0, 'standardLowPrice': 0.0, 'lunchBoxCount': None, 'cwId': None, 'cateName': None, 'createTime': None, 'meituanSyncStatus': None, 'expirTime': None, 'name': '插线板更名后', 'relType': None, 'shopId': None, 'relBranchList': None, 'price': 1000, 'soldCount': 268, 'syncStatus': 0, 'outerId': None, 'status': 1, 'business': None, 'useTime': None, 'delFlag': None, 'skuQuantity': 0, 'transientOriPrice': 0.0, 'oriPrice': 0}, {'shop': {'name': None, 'fullName': None, 'id': 42, 'thirdAppId': None, 'logoUrl': None, 'serial': None, 'parent': None, 'phoneNumber': None, 'createTime': None, 'email': None, 'suffixShop': None, 'printAdText': None, 'printAdUrl': None}, 'id': 26188, 'istop': 0, 'baiduSyncStatus': None, 'rank': None, 'transientPrice': 0.0, 'soldAllCount': 72, 'mallGoodsCate': {'shop': None, 'name': None, 'goodsAmount': 0, 'id': 260, 'goodsSoldOutAmount': 0, 'oldName': None, 'orderNum': None, 'delFlag': None, 'branchId': None}, 'standardTopPrice': 0.0, 'branch': None, 'waimaiChannel': None, 'mallGoodsStandards': None, 'description': '阿斯达', 'goodsCopyId': None, 'mallGoodsCatagoryId': None, 'iconUrl': 'http://res.test.saofu.cn/saofu/upload/image/2016/04/25/7a59f0ca-ccb6-41ec-a1ab-27a854237d2f.jpg', 'hasActivity': 0, 'standardAllSku': None, 'preRemind': None, 'dishCount': None, 'elemeSyncStatus': None, 'detail': None, 'cannotUseTime': None, 'rules': None, 'standard': 1, 'cateId': 0, 'servicePhone': None, 'isSku': 0, 'standardLowPrice': 0.0, 'lunchBoxCount': None, 'cwId': None, 'cateName': None, 'createTime': None, 'meituanSyncStatus': None, 'expirTime': None, 'name': '水淀粉', 'relType': None, 'shopId': None, 'relBranchList': None, 'price': 100000000, 'soldCount': 72, 'syncStatus': 0, 'outerId': None, 'status': 1, 'business': None, 'useTime': None, 'delFlag': None, 'skuQuantity': 9265759, 'transientOriPrice': 0.0, 'oriPrice': 0}, {'shop': {'name': None, 'fullName': None, 'id': 42, 'thirdAppId': None, 'logoUrl': None, 'serial': None, 'parent': None, 'phoneNumber': None, 'createTime': None, 'email': None, 'suffixShop': None, 'printAdText': None, 'printAdUrl': None}, 'id': 26839, 'istop': 0, 'baiduSyncStatus': None, 'rank': None, 'transientPrice': 0.0, 'soldAllCount': 35, 'mallGoodsCate': {'shop': None, 'name': None, 'goodsAmount': 0, 'id': 268, 'goodsSoldOutAmount': 0, 'oldName': None, 'orderNum': None, 'delFlag': None, 'branchId': None}, 'standardTopPrice': 0.0, 'branch': None, 'waimaiChannel': None, 'mallGoodsStandards': None, 'description': '接口测试专用,勿动', 'goodsCopyId': None, 'mallGoodsCatagoryId': None, 'iconUrl': 'http://res.test.saofu.cn/saofu/upload/image/2016/07/18/2c2ebeef-8d4f-483f-8ff4-ebcd5d209bb7.jpg', 'hasActivity': 0, 'standardAllSku': None, 'preRemind': None, 'dishCount': None, 'elemeSyncStatus': None, 'detail': None, 'cannotUseTime': None, 'rules': None, 'standard': 2, 'cateId': 0, 'servicePhone': None, 'isSku': 0, 'standardLowPrice': 0.01, 'lunchBoxCount': None, 'cwId': None, 'cateName': None, 'createTime': None, 'meituanSyncStatus': None, 'expirTime': None, 'name': '接口-测试商品2', 'relType': None, 'shopId': None, 'relBranchList': None, 'price': 0, 'soldCount': 0, 'syncStatus': 0, 'outerId': None, 'status': 1, 'business': None, 'useTime': None, 'delFlag': None, 'skuQuantity': None, 'transientOriPrice': 0.0, 'oriPrice': 0}, {'shop': {'name': None, 'fullName': None, 'id': 42, 'thirdAppId': None, 'logoUrl': None, 'serial': None, 'parent': None, 'phoneNumber': None, 'createTime': None, 'email': None, 'suffixShop': None, 'printAdText': None, 'printAdUrl': None}, 'id': 26838, 'istop': 0, 'baiduSyncStatus': None, 'rank': None, 'transientPrice': 0.0, 'soldAllCount': 5, 'mallGoodsCate': {'shop': None, 'name': None, 'goodsAmount': 0, 'id': 268, 'goodsSoldOutAmount': 0, 'oldName': None, 'orderNum': None, 'delFlag': None, 'branchId': None}, 'standardTopPrice': 0.0, 'branch': None, 'waimaiChannel': None, 'mallGoodsStandards': None, 'description': '接口测试专用,烦请勿删,勿操作', 'goodsCopyId': None, 'mallGoodsCatagoryId': None, 'iconUrl': 'http://res.test.saofu.cn/saofu/upload/image/2016/07/18/352c9a44-5fe7-4546-9786-563d8700a773.jpg', 'hasActivity': 0, 'standardAllSku': None, 'preRemind': None, 'dishCount': None, 'elemeSyncStatus': None, 'detail': None, 'cannotUseTime': None, 'rules': None, 'standard': 1, 'cateId': 0, 'servicePhone': None, 'isSku': 0, 'standardLowPrice': 0.0, 'lunchBoxCount': None, 'cwId': None, 'cateName': None, 'createTime': None, 'meituanSyncStatus': None, 'expirTime': None, 'name': '接口-测试商品1', 'relType': None, 'shopId': None, 'relBranchList': None, 'price': 1, 'soldCount': 5, 'syncStatus': 0, 'outerId': None, 'status': 1, 'business': None, 'useTime': None, 'delFlag': None, 'skuQuantity': 999995, 'transientOriPrice': 0.0, 'oriPrice': 0}, {'shop': {'name': None, 'fullName': None, 'id': 42, 'thirdAppId': None, 'logoUrl': None, 'serial': None, 'parent': None, 'phoneNumber': None, 'createTime': None, 'email': None, 'suffixShop': None, 'printAdText': None, 'printAdUrl': None}, 'id': 26836, 'istop': 0, 'baiduSyncStatus': None, 'rank': None, 'transientPrice': 0.0, 'soldAllCount': 9, 'mallGoodsCate': {'shop': None, 'name': None, 'goodsAmount': 0, 'id': 259, 'goodsSoldOutAmount': 0, 'oldName': None, 'orderNum': None, 'delFlag': None, 'branchId': None}, 'standardTopPrice': 0.0, 'branch': None, 'waimaiChannel': None, 'mallGoodsStandards': None, 'description': '啊啊啊啊啊', 'goodsCopyId': None, 'mallGoodsCatagoryId': None, 'iconUrl': 'http://res.test.saofu.cn/saofu/upload/file/2016/07/13/f99f5e55-d23c-4d73-980e-031b0e1643ea.png', 'hasActivity': 0, 'standardAllSku': None, 'preRemind': None, 'dishCount': None, 'elemeSyncStatus': None, 'detail': None, 'cannotUseTime': None, 'rules': None, 'standard': 2, 'cateId': 0, 'servicePhone': None, 'isSku': 0, 'standardLowPrice': 1.0, 'lunchBoxCount': None, 'cwId': None, 'cateName': None, 'createTime': None, 'meituanSyncStatus': None, 'expirTime': None, 'name': '多规格冗余测试', 'relType': None, 'shopId': None, 'relBranchList': None, 'price': 0, 'soldCount': 0, 'syncStatus': 0, 'outerId': None, 'status': 1, 'business': None, 'useTime': None, 'delFlag': None, 'skuQuantity': None, 'transientOriPrice': 0.0, 'oriPrice': 0}], 'pageInfo': {'totalPages': 1, 'params': None, 'pageSize': 10, 'pagination': True, 'pageStartRow': 0, 'hasPreviousPage': False, 'currentPage': 1, 'hasNextPage': False, 'pageEndRow': 5, 'totalRows': 5}}
2016-07-20 17:32:30,602 mydb.py[line: 77] INFO: query：SELECT COUNT(*) FROM mall_goods AS mg JOIN mall_goods_cate AS mgc ON mg.cate_id=mgc.id JOIN template_cate AS tc ON tc.cate_id=mgc.id AND tc.template_id=1 AND tc.status=1 WHERE mg.shop_id=%s AND mg.del_flag=%s AND mg.status=%s AND mg.business_id NOT IN (%s, %s)  data：(42, 0, 1, 1, 2)
2016-07-20 17:32:30,616 mydb.py[line: 77] INFO: query：SELECT sku_quantity FROM mall_goods WHERE id=%s  data：(26838,)
2016-07-20 17:32:30,620 mydb.py[line: 77] INFO: query：SELECT sku_quantity FROM mall_goods WHERE id=%s  data：(26839,)
2016-07-20 17:32:30,625 testcase.py[line: 98] INFO: 正在更新步骤执行结果
2016-07-20 17:32:30,625 mydb.py[line: 63] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="post", runtime="2016-07-20 17:32:30" WHERE executed_history_id = 20160720173228 AND testcase_id = 76 AND step_id = 78 AND project='pj_wecharno' AND testplan='plan1_of_wecharno'
2016-07-20 17:32:30,633 testcase.py[line: 101] INFO: 测试用例[id=76, name=test-n-显示默认页面]执行成功
2016-07-20 17:32:30,634 testplan.py[line: 64] INFO: 正在更新用例执行结果
2016-07-20 17:32:30,634 mydb.py[line: 63] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2016-07-20 17:32:30" WHERE executed_history_id = 20160720173228 AND testcase_id = 76 AND project='pj_wecharno' AND testplan='plan1_of_wecharno'
2016-07-20 17:32:30,785 testplan.py[line: 75] INFO: 正在更新testlink上测试计划[testplan_id=74, bulid_version=v1.0.0],对应用例[testcase_id=76]的执行结果
2016-07-20 17:32:31,140 testplan.py[line: 57] INFO: 记录测试用例到测试用例报表
2016-07-20 17:32:31,141 mydb.py[line: 50] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720173228', 102, 'test-n-模拟点击立即购买按钮', '微商城-模拟点击页面跳转', 'plan1_of_wecharno', 'pj_wecharno', 'Block', '')
2016-07-20 17:32:31,142 testplan.py[line: 60] INFO: 开始执行测试用例[id=102，name=test-n-模拟点击立即购买按钮]
2016-07-20 17:32:31,142 testcase.py[line: 48] INFO: 记录测试步骤到测试步骤报告表
2016-07-20 17:32:31,142 mydb.py[line: 50] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720173228', 102, 'test-n-模拟点击立即购买按钮', 'plan1_of_wecharno', 'pj_wecharno', 104, 1, '', 'http', 'm.test.saofu.cn', 80, '{"class":"ToBuyGoods","function":"test_to_buy_goods","method":"get","url":"/mall/tobuy/1?","params":{"mallGoodsId":"26838","amount":1,"type":1,"serial":"var"}}', '{"status":200}', 'Block', '', '')
2016-07-20 17:32:31,143 testcase.py[line: 60] INFO: 开始执行步骤操作[第1步]
2016-07-20 17:32:31,143 casestep.py[line: 64] INFO: 调用的方法为：ToBuyGoods.test_to_buy_goods
2016-07-20 17:32:31,144 wechatno_wemall.py[line: 209] INFO: 正在发起GET请求...
2016-07-20 17:32:31,144 httpprotocol.py[line: 50] INFO: 发起的请求为：http://m.test.saofu.cn:80/mall/tobuy/1?amount=1&type=1&serial=10549840601068216320&mallGoodsId=26838
2016-07-20 17:32:31,155 wechatno_wemall.py[line: 215] INFO: 正在解析返回结果:





<!DOCTYPE html>
<link rel="stylesheet" href="/css/bind/banner.css?v=3.4.0-f5bd5" />  
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <link rel="stylesheet" href="/css/skin-nr-min.css?v=3.4.0-f5bd5">
        <link rel="stylesheet" href="/css/cpn.css?v=3.4.0-f5bd5">
        <link rel="stylesheet" type="text/css" href="/css/zepto.alert.css?v=3.4.0-f5bd5">
        <title>哎哟~出错啦~</title>
    </head>
    <body>
        <script type="text/javascript" src="/js/zepto.min.js?v=3.4.0-f5bd5" ></script>
        <script type="text/javascript" src="/js/zepto.alert.min.js?v=3.4.0-f5bd5"></script>
        <script type="text/javascript">
        Zepto(function($){
			function myAlert(content) {
		    	$.dialog({
		    		content : content,
		    		title : "alert"
		    	});
		    }
			
				
				
					myAlert("噢...出错了!请等待管理员处理,稍后重试");					
				
			
        });
        </script>
    </body>
</html>

2016-07-20 17:32:31,155 htmlparser.py[line: 28] INFO: Data 






2016-07-20 17:32:31,157 testcase.py[line: 69] ERROR: 步骤[1]执行出错,停止执行用例[id=102, name=test-n-模拟点击立即购买按钮]
2016-07-20 17:32:31,157 testcase.py[line: 75] INFO: 正在更新步骤执行结果
2016-07-20 17:32:31,157 mydb.py[line: 63] INFO: query：UPDATE case_step_report_tb SET runresult="Error",reason="Traceback (most recent call last):  File E:\Projects\interface_project\interface\wechatno_wemall.py, line 219, in test_to_buy_goods    parser.feed(response)  File D:\Program Files\python33\lib\html\parser.py, line 145, in feed    self.goahead(0)  File D:\Program Files\python33\lib\html\parser.py, line 200, in goahead    k = self.parse_html_declaration(i)  File D:\Program Files\python33\lib\html\parser.py, line 290, in parse_html_declaration    self.handle_decl(rawdata[i+2:gtpos])  File E:\Projects\interface_project\htmlparser.py, line 47, in handle_decl    logger.info(Decl： % data)TypeError: not all arguments converted during string formatting", protocol_method="get", runtime="2016-07-20 17:32:31" WHERE executed_history_id = 20160720173228 AND testcase_id = 102 AND step_id = 104 AND project='pj_wecharno' AND testplan='plan1_of_wecharno'
2016-07-20 17:32:31,160 testplan.py[line: 64] INFO: 正在更新用例执行结果
2016-07-20 17:32:31,160 mydb.py[line: 63] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2016-07-20 17:32:31" WHERE executed_history_id = 20160720173228 AND testcase_id = 102 AND project='pj_wecharno' AND testplan='plan1_of_wecharno'
2016-07-20 17:32:31,278 testplan.py[line: 75] INFO: 正在更新testlink上测试计划[testplan_id=74, bulid_version=v1.0.0],对应用例[testcase_id=102]的执行结果
2016-07-20 17:32:31,633 testplan.py[line: 57] INFO: 记录测试用例到测试用例报表
2016-07-20 17:32:31,633 mydb.py[line: 50] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720173228', 98, 'test-n-查看购物车商品列表', '微商城-查看购物车商品列表接口', 'plan1_of_wecharno', 'pj_wecharno', 'Block', '')
2016-07-20 17:32:31,634 testplan.py[line: 60] INFO: 开始执行测试用例[id=98，name=test-n-查看购物车商品列表]
2016-07-20 17:32:31,635 testcase.py[line: 48] INFO: 记录测试步骤到测试步骤报告表
2016-07-20 17:32:31,635 mydb.py[line: 50] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720173228', 98, 'test-n-查看购物车商品列表', 'plan1_of_wecharno', 'pj_wecharno', 100, 1, '', 'http', 'm.test.saofu.cn', 80, '{"class":"AddToCart","function":"test_add_to_cart","method":"post","url":"/addtocart","params":{"mallGoodsId":26838,"standardId":"undefined","amount":2,"serial":"var","openId":"var"}}', '{"success":"True", "amount":2, "mall_goods_id":26838,"shop_id":"var", "closed":1}', 'Block', '', '')
2016-07-20 17:32:31,636 testcase.py[line: 60] INFO: 开始执行步骤操作[第1步]
2016-07-20 17:32:31,636 casestep.py[line: 64] INFO: 调用的方法为：AddToCart.test_add_to_cart
2016-07-20 17:32:31,636 mydb.py[line: 77] INFO: query：SELECT id FROM customer WHERE channel_serial=%s  data：('ous64uFCCLMyXYDJ-MkNilyCI5CY',)
2016-07-20 17:32:31,639 mydb.py[line: 63] INFO: query：UPDATE mall_shopping_cart SET amount = 0 WHERE customer_id = 6840 and closed=1
2016-07-20 17:32:31,794 mydb.py[line: 77] INFO: query：SELECT id FROM customer WHERE channel_serial=%s  data：('ous64uFCCLMyXYDJ-MkNilyCI5CY',)
2016-07-20 17:32:31,798 mydb.py[line: 77] INFO: query：SELECT id FROM shop WHERE serial=%s  data：('10549840601068216320',)
2016-07-20 17:32:31,803 wechatno_wemall.py[line: 132] INFO: 正在发起POST请求...
2016-07-20 17:32:31,803 httpprotocol.py[line: 67] INFO: 发起的请求为：http://m.test.saofu.cn:80/addtocart
2016-07-20 17:32:31,930 wechatno_wemall.py[line: 139] INFO: 正在解析返回结果:{'success': True, 'message': None, 'attach': None}
2016-07-20 17:32:31,930 mydb.py[line: 77] INFO: query：SELECT amount, mall_goods_id, shop_id, closed, id FROM mall_shopping_cart WHERE customer_id = %s and closed=%s ORDER BY id DESC LIMIT 1  data：(6840, 1)
2016-07-20 17:32:31,934 testcase.py[line: 98] INFO: 正在更新步骤执行结果
2016-07-20 17:32:31,935 mydb.py[line: 63] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="post", runtime="2016-07-20 17:32:31" WHERE executed_history_id = 20160720173228 AND testcase_id = 98 AND step_id = 100 AND project='pj_wecharno' AND testplan='plan1_of_wecharno'
2016-07-20 17:32:31,939 testcase.py[line: 48] INFO: 记录测试步骤到测试步骤报告表
2016-07-20 17:32:31,940 mydb.py[line: 50] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720173228', 98, 'test-n-查看购物车商品列表', 'plan1_of_wecharno', 'pj_wecharno', 101, 2, '', 'http', 'm.test.saofu.cn', 80, '{"class":"CartList","function":"test_view_cart_list","method":"get","url":"/cartlist?","params":{"serial":"var","openId":"var"}} ', '{"amount":2,"goodsID":26838}', 'Block', '', '')
2016-07-20 17:32:31,943 testcase.py[line: 60] INFO: 开始执行步骤操作[第2步]
2016-07-20 17:32:31,944 casestep.py[line: 64] INFO: 调用的方法为：CartList.test_view_cart_list
2016-07-20 17:32:31,944 wechatno_wemall.py[line: 189] INFO: 正在发起GET请求...
2016-07-20 17:32:31,944 httpprotocol.py[line: 50] INFO: 发起的请求为：http://m.test.saofu.cn:80/cartlist?serial=10549840601068216320&openId=ous64uFCCLMyXYDJ-MkNilyCI5CY
2016-07-20 17:32:31,961 wechatno_wemall.py[line: 195] INFO: 正在解析返回结果:[{'shop': None, 'cateringType': None, 'amount': 2, 'id': 15771, 'closed': None, 'mallGoods': {'shop': None, 'id': 26838, 'istop': 0, 'baiduSyncStatus': None, 'rank': None, 'transientPrice': 0.0, 'soldAllCount': 0, 'mallGoodsCate': None, 'standardTopPrice': 0.0, 'branch': None, 'waimaiChannel': None, 'mallGoodsStandards': None, 'description': '接口测试专用,烦请勿删,勿操作', 'goodsCopyId': None, 'mallGoodsCatagoryId': None, 'iconUrl': 'http://res.test.saofu.cn/saofu/upload/image/2016/07/18/352c9a44-5fe7-4546-9786-563d8700a773.jpg,', 'hasActivity': 0, 'standardAllSku': None, 'preRemind': None, 'dishCount': None, 'elemeSyncStatus': None, 'detail': None, 'cannotUseTime': None, 'rules': None, 'standard': 1, 'cateId': 0, 'servicePhone': None, 'isSku': 0, 'standardLowPrice': 0.0, 'lunchBoxCount': None, 'cwId': None, 'cateName': None, 'createTime': None, 'meituanSyncStatus': None, 'expirTime': None, 'name': '接口-测试商品1', 'relType': None, 'shopId': None, 'relBranchList': None, 'price': 1, 'soldCount': 0, 'syncStatus': 0, 'outerId': None, 'status': 1, 'business': None, 'useTime': None, 'delFlag': None, 'skuQuantity': None, 'transientOriPrice': 0.0, 'oriPrice': 0}, 'mallGoodsStandard': None, 'shopBranchId': None, 'customer': None}]
2016-07-20 17:32:31,962 testcase.py[line: 98] INFO: 正在更新步骤执行结果
2016-07-20 17:32:31,962 mydb.py[line: 63] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2016-07-20 17:32:31" WHERE executed_history_id = 20160720173228 AND testcase_id = 98 AND step_id = 101 AND project='pj_wecharno' AND testplan='plan1_of_wecharno'
2016-07-20 17:32:31,966 testcase.py[line: 101] INFO: 测试用例[id=98, name=test-n-查看购物车商品列表]执行成功
2016-07-20 17:32:31,966 testplan.py[line: 64] INFO: 正在更新用例执行结果
2016-07-20 17:32:31,966 mydb.py[line: 63] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2016-07-20 17:32:31" WHERE executed_history_id = 20160720173228 AND testcase_id = 98 AND project='pj_wecharno' AND testplan='plan1_of_wecharno'
2016-07-20 17:32:32,088 testplan.py[line: 75] INFO: 正在更新testlink上测试计划[testplan_id=74, bulid_version=v1.0.0],对应用例[testcase_id=98]的执行结果
2016-07-20 17:32:32,466 testplan.py[line: 57] INFO: 记录测试用例到测试用例报表
2016-07-20 17:32:32,466 mydb.py[line: 50] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720173228', 88, 'test-n-把商品加入购物车', '微商城-把商品加入购物车接口', 'plan1_of_wecharno', 'pj_wecharno', 'Block', '')
2016-07-20 17:32:32,468 testplan.py[line: 60] INFO: 开始执行测试用例[id=88，name=test-n-把商品加入购物车]
2016-07-20 17:32:32,468 testcase.py[line: 48] INFO: 记录测试步骤到测试步骤报告表
2016-07-20 17:32:32,468 mydb.py[line: 50] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720173228', 88, 'test-n-把商品加入购物车', 'plan1_of_wecharno', 'pj_wecharno', 90, 1, '', 'http', 'm.test.saofu.cn', 80, '{"class":"AddToCart","function":"test_add_to_cart","method":"post","url":"/addtocart","params":{"mallGoodsId":26838,"standardId":"undefined","amount":2,"serial":"var","openId":"var"}}', '{"success":"True", "amount":2, "mall_goods_id":26838,"shop_id":42, "closed":1}', 'Block', '', '')
2016-07-20 17:32:32,469 testcase.py[line: 60] INFO: 开始执行步骤操作[第1步]
2016-07-20 17:32:32,469 casestep.py[line: 64] INFO: 调用的方法为：AddToCart.test_add_to_cart
2016-07-20 17:32:32,469 mydb.py[line: 77] INFO: query：SELECT id FROM customer WHERE channel_serial=%s  data：('ous64uFCCLMyXYDJ-MkNilyCI5CY',)
2016-07-20 17:32:32,472 mydb.py[line: 63] INFO: query：UPDATE mall_shopping_cart SET amount = 0 WHERE customer_id = 6840 and closed=1
2016-07-20 17:32:32,562 mydb.py[line: 77] INFO: query：SELECT id FROM customer WHERE channel_serial=%s  data：('ous64uFCCLMyXYDJ-MkNilyCI5CY',)
2016-07-20 17:32:32,566 mydb.py[line: 77] INFO: query：SELECT id FROM shop WHERE serial=%s  data：('10549840601068216320',)
2016-07-20 17:32:32,571 wechatno_wemall.py[line: 132] INFO: 正在发起POST请求...
2016-07-20 17:32:32,572 httpprotocol.py[line: 67] INFO: 发起的请求为：http://m.test.saofu.cn:80/addtocart
2016-07-20 17:32:32,818 wechatno_wemall.py[line: 139] INFO: 正在解析返回结果:{'success': True, 'message': None, 'attach': None}
2016-07-20 17:32:32,819 mydb.py[line: 77] INFO: query：SELECT amount, mall_goods_id, shop_id, closed, id FROM mall_shopping_cart WHERE customer_id = %s and closed=%s ORDER BY id DESC LIMIT 1  data：(6840, 1)
2016-07-20 17:32:32,854 testcase.py[line: 98] INFO: 正在更新步骤执行结果
2016-07-20 17:32:32,854 mydb.py[line: 63] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="post", runtime="2016-07-20 17:32:32" WHERE executed_history_id = 20160720173228 AND testcase_id = 88 AND step_id = 90 AND project='pj_wecharno' AND testplan='plan1_of_wecharno'
2016-07-20 17:32:32,859 testcase.py[line: 101] INFO: 测试用例[id=88, name=test-n-把商品加入购物车]执行成功
2016-07-20 17:32:32,859 testplan.py[line: 64] INFO: 正在更新用例执行结果
2016-07-20 17:32:32,859 mydb.py[line: 63] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2016-07-20 17:32:32" WHERE executed_history_id = 20160720173228 AND testcase_id = 88 AND project='pj_wecharno' AND testplan='plan1_of_wecharno'
2016-07-20 17:32:32,993 testplan.py[line: 75] INFO: 正在更新testlink上测试计划[testplan_id=74, bulid_version=v1.0.0],对应用例[testcase_id=88]的执行结果
2016-07-20 17:32:33,370 testplan.py[line: 57] INFO: 记录测试用例到测试用例报表
2016-07-20 17:32:33,370 mydb.py[line: 50] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720173228', 93, 'test-n-把商品移出购物车', '微商城-把商品移出购物车接口', 'plan1_of_wecharno', 'pj_wecharno', 'Block', '')
2016-07-20 17:32:33,372 testplan.py[line: 60] INFO: 开始执行测试用例[id=93，name=test-n-把商品移出购物车]
2016-07-20 17:32:33,372 testcase.py[line: 48] INFO: 记录测试步骤到测试步骤报告表
2016-07-20 17:32:33,372 mydb.py[line: 50] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720173228', 93, 'test-n-把商品移出购物车', 'plan1_of_wecharno', 'pj_wecharno', 95, 1, '', 'http', 'm.test.saofu.cn', 80, '{"class":"AddToCart","function":"test_add_to_cart","method":"post","url":"/addtocart","params":{"mallGoodsId":26838,"standardId":"undefined","amount":2,"serial":"var","openId":"var"}} ', '{"success":"True", "amount":2, "mall_goods_id":26838,"shop_id":"var", "closed":1}', 'Block', '', '')
2016-07-20 17:32:33,373 testcase.py[line: 60] INFO: 开始执行步骤操作[第1步]
2016-07-20 17:32:33,373 casestep.py[line: 64] INFO: 调用的方法为：AddToCart.test_add_to_cart
2016-07-20 17:32:33,374 mydb.py[line: 77] INFO: query：SELECT id FROM customer WHERE channel_serial=%s  data：('ous64uFCCLMyXYDJ-MkNilyCI5CY',)
2016-07-20 17:32:33,377 mydb.py[line: 63] INFO: query：UPDATE mall_shopping_cart SET amount = 0 WHERE customer_id = 6840 and closed=1
2016-07-20 17:32:33,461 mydb.py[line: 77] INFO: query：SELECT id FROM customer WHERE channel_serial=%s  data：('ous64uFCCLMyXYDJ-MkNilyCI5CY',)
2016-07-20 17:32:33,465 mydb.py[line: 77] INFO: query：SELECT id FROM shop WHERE serial=%s  data：('10549840601068216320',)
2016-07-20 17:32:33,469 wechatno_wemall.py[line: 132] INFO: 正在发起POST请求...
2016-07-20 17:32:33,469 httpprotocol.py[line: 67] INFO: 发起的请求为：http://m.test.saofu.cn:80/addtocart
2016-07-20 17:32:33,584 wechatno_wemall.py[line: 139] INFO: 正在解析返回结果:{'success': True, 'message': None, 'attach': None}
2016-07-20 17:32:33,585 mydb.py[line: 77] INFO: query：SELECT amount, mall_goods_id, shop_id, closed, id FROM mall_shopping_cart WHERE customer_id = %s and closed=%s ORDER BY id DESC LIMIT 1  data：(6840, 1)
2016-07-20 17:32:33,590 testcase.py[line: 98] INFO: 正在更新步骤执行结果
2016-07-20 17:32:33,590 mydb.py[line: 63] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="post", runtime="2016-07-20 17:32:33" WHERE executed_history_id = 20160720173228 AND testcase_id = 93 AND step_id = 95 AND project='pj_wecharno' AND testplan='plan1_of_wecharno'
2016-07-20 17:32:33,602 testcase.py[line: 48] INFO: 记录测试步骤到测试步骤报告表
2016-07-20 17:32:33,602 mydb.py[line: 50] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720173228', 93, 'test-n-把商品移出购物车', 'plan1_of_wecharno', 'pj_wecharno', 96, 2, '', 'http', 'm.test.saofu.cn', 80, '{"class":"DelFromCart","function":"test_del_from_cart","method":"get","url":"/delfromcart?","params":{"strIds":"var","serial":"var"}}', '{"success":"True"}', 'Block', '', '')
2016-07-20 17:32:33,606 testcase.py[line: 60] INFO: 开始执行步骤操作[第2步]
2016-07-20 17:32:33,606 casestep.py[line: 64] INFO: 调用的方法为：DelFromCart.test_del_from_cart
2016-07-20 17:32:33,607 wechatno_wemall.py[line: 165] INFO: 正在发起POST请求...
2016-07-20 17:32:33,607 httpprotocol.py[line: 67] INFO: 发起的请求为：http://m.test.saofu.cn:80/delfromcart?
2016-07-20 17:32:33,780 wechatno_wemall.py[line: 172] INFO: 正在解析返回结果:{'success': True, 'message': None, 'attach': None}
2016-07-20 17:32:33,780 mydb.py[line: 77] INFO: query：SELECT amount, mall_goods_id, shop_id, closed, id FROM mall_shopping_cart WHERE id=%s  data：(15771,)
2016-07-20 17:32:33,784 testcase.py[line: 98] INFO: 正在更新步骤执行结果
2016-07-20 17:32:33,784 mydb.py[line: 63] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2016-07-20 17:32:33" WHERE executed_history_id = 20160720173228 AND testcase_id = 93 AND step_id = 96 AND project='pj_wecharno' AND testplan='plan1_of_wecharno'
2016-07-20 17:32:33,788 testcase.py[line: 101] INFO: 测试用例[id=93, name=test-n-把商品移出购物车]执行成功
2016-07-20 17:32:33,789 testplan.py[line: 64] INFO: 正在更新用例执行结果
2016-07-20 17:32:33,789 mydb.py[line: 63] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2016-07-20 17:32:33" WHERE executed_history_id = 20160720173228 AND testcase_id = 93 AND project='pj_wecharno' AND testplan='plan1_of_wecharno'
2016-07-20 17:32:33,954 testplan.py[line: 75] INFO: 正在更新testlink上测试计划[testplan_id=74, bulid_version=v1.0.0],对应用例[testcase_id=93]的执行结果
2016-07-20 17:32:34,093 testplan.py[line: 85] INFO: 测试计划[project=pj_wecharno ,testplan=plan1_of_wecharno]已执行完
2016-07-20 17:32:34,093 main.py[line: 229] INFO: 接口测试已执行完成，正在关闭数据库连接
2016-07-20 17:32:34,094 htmlreporter.py[line: 37] INFO: 正在查询测试用例总数
2016-07-20 17:32:34,094 mydb.py[line: 77] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20160720173228',)
2016-07-20 17:32:34,095 htmlreporter.py[line: 43] INFO: 正在查询执行通过的用例数
2016-07-20 17:32:34,095 mydb.py[line: 77] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20160720173228')
2016-07-20 17:32:34,096 htmlreporter.py[line: 49] INFO: 正在查询执行失败的用例数
2016-07-20 17:32:34,096 mydb.py[line: 77] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20160720173228')
2016-07-20 17:32:34,098 htmlreporter.py[line: 55] INFO: 正在查询执行出错的用例数
2016-07-20 17:32:34,098 mydb.py[line: 77] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20160720173228')
2016-07-20 17:32:34,099 htmlreporter.py[line: 61] INFO: 正在查询未执行的用例数
2016-07-20 17:32:34,100 mydb.py[line: 77] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20160720173228')
2016-07-20 17:32:34,101 htmlreporter.py[line: 72] INFO: 正在查询已运的测试计划
2016-07-20 17:32:34,101 mydb.py[line: 93] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20160720173228',)
2016-07-20 17:32:34,102 htmlreporter.py[line: 98] INFO: 正在查询测试计划[project：pj_wecharno, testplan：plan1_of_wecharno]的测试用例执行结果
2016-07-20 17:32:34,102 mydb.py[line: 93] INFO: query：SELECT id, executed_history_id, testcase_id, testcase_name,testsuit, testplan, project, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s ORDER BY id ASC  data：('pj_wecharno', 'plan1_of_wecharno', '20160720173228')
2016-07-20 17:32:34,103 htmlreporter.py[line: 105] INFO: 正在记录测试测试计划[project：pj_wecharno, testplan：plan1_of_wecharno]的测试用例运行结果到测试报告
2016-07-20 17:32:34,104 htmlreporter.py[line: 115] INFO: 正在查询已运的测试计划
2016-07-20 17:32:34,104 mydb.py[line: 93] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20160720173228',)
2016-07-20 17:32:34,105 htmlreporter.py[line: 127] INFO: 正在查询测试计划[project：pj_wecharno, testplan：plan1_of_wecharno]已运行的测试用例
2016-07-20 17:32:34,105 mydb.py[line: 93] INFO: query：SELECT testcase_id, testcase_name, project, testplan FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id ORDER BY id ASC  data：('pj_wecharno', 'plan1_of_wecharno', '20160720173228')
2016-07-20 17:32:34,107 htmlreporter.py[line: 158] INFO: 正在查询测试用例[id=80]步骤运行结果
2016-07-20 17:32:34,107 mydb.py[line: 93] INFO: query：SELECT step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, cstb.runresult, reason, cstb.runtime FROM case_step_report_tb AS cstb JOIN testcase_report_tb AS tstb ON cstb.testcase_id =  tstb.testcase_id AND cstb.project=tstb.project AND cstb.testplan=tstb.testplan AND cstb.executed_history_id = tstb.executed_history_id WHERE tstb.project= %s AND tstb.testplan=%s AND cstb.testcase_id=%s AND cstb.executed_history_id = %s  data：('pj_wecharno', 'plan1_of_wecharno', 80, '20160720173228')
2016-07-20 17:32:34,108 htmlreporter.py[line: 158] INFO: 正在查询测试用例[id=76]步骤运行结果
2016-07-20 17:32:34,109 mydb.py[line: 93] INFO: query：SELECT step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, cstb.runresult, reason, cstb.runtime FROM case_step_report_tb AS cstb JOIN testcase_report_tb AS tstb ON cstb.testcase_id =  tstb.testcase_id AND cstb.project=tstb.project AND cstb.testplan=tstb.testplan AND cstb.executed_history_id = tstb.executed_history_id WHERE tstb.project= %s AND tstb.testplan=%s AND cstb.testcase_id=%s AND cstb.executed_history_id = %s  data：('pj_wecharno', 'plan1_of_wecharno', 76, '20160720173228')
2016-07-20 17:32:34,110 htmlreporter.py[line: 158] INFO: 正在查询测试用例[id=102]步骤运行结果
2016-07-20 17:32:34,110 mydb.py[line: 93] INFO: query：SELECT step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, cstb.runresult, reason, cstb.runtime FROM case_step_report_tb AS cstb JOIN testcase_report_tb AS tstb ON cstb.testcase_id =  tstb.testcase_id AND cstb.project=tstb.project AND cstb.testplan=tstb.testplan AND cstb.executed_history_id = tstb.executed_history_id WHERE tstb.project= %s AND tstb.testplan=%s AND cstb.testcase_id=%s AND cstb.executed_history_id = %s  data：('pj_wecharno', 'plan1_of_wecharno', 102, '20160720173228')
2016-07-20 17:32:34,112 htmlreporter.py[line: 158] INFO: 正在查询测试用例[id=98]步骤运行结果
2016-07-20 17:32:34,112 mydb.py[line: 93] INFO: query：SELECT step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, cstb.runresult, reason, cstb.runtime FROM case_step_report_tb AS cstb JOIN testcase_report_tb AS tstb ON cstb.testcase_id =  tstb.testcase_id AND cstb.project=tstb.project AND cstb.testplan=tstb.testplan AND cstb.executed_history_id = tstb.executed_history_id WHERE tstb.project= %s AND tstb.testplan=%s AND cstb.testcase_id=%s AND cstb.executed_history_id = %s  data：('pj_wecharno', 'plan1_of_wecharno', 98, '20160720173228')
2016-07-20 17:32:34,114 htmlreporter.py[line: 158] INFO: 正在查询测试用例[id=88]步骤运行结果
2016-07-20 17:32:34,114 mydb.py[line: 93] INFO: query：SELECT step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, cstb.runresult, reason, cstb.runtime FROM case_step_report_tb AS cstb JOIN testcase_report_tb AS tstb ON cstb.testcase_id =  tstb.testcase_id AND cstb.project=tstb.project AND cstb.testplan=tstb.testplan AND cstb.executed_history_id = tstb.executed_history_id WHERE tstb.project= %s AND tstb.testplan=%s AND cstb.testcase_id=%s AND cstb.executed_history_id = %s  data：('pj_wecharno', 'plan1_of_wecharno', 88, '20160720173228')
2016-07-20 17:32:34,116 htmlreporter.py[line: 158] INFO: 正在查询测试用例[id=93]步骤运行结果
2016-07-20 17:32:34,116 mydb.py[line: 93] INFO: query：SELECT step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, cstb.runresult, reason, cstb.runtime FROM case_step_report_tb AS cstb JOIN testcase_report_tb AS tstb ON cstb.testcase_id =  tstb.testcase_id AND cstb.project=tstb.project AND cstb.testplan=tstb.testplan AND cstb.executed_history_id = tstb.executed_history_id WHERE tstb.project= %s AND tstb.testplan=%s AND cstb.testcase_id=%s AND cstb.executed_history_id = %s  data：('pj_wecharno', 'plan1_of_wecharno', 93, '20160720173228')
2016-07-20 17:32:34,117 htmlreporter.py[line: 177] INFO: 正在设置测试报告结果文件名
2016-07-20 17:32:34,118 htmlreporter.py[line: 187] INFO: 测试报告文件名所在路径为：E:\\Projects\\report\\test_report20160720173228.html
2016-07-20 17:32:34,118 htmlreporter.py[line: 180] INFO: 正在生成测试报告
2016-07-20 17:32:34,119 main.py[line: 252] INFO: 生成测试报告成功
2016-07-20 17:32:35,348 main.py[line: 259] INFO: E:\\Projects\\report\\test_report20160720173228.html
2016-07-20 17:32:35,348 main.py[line: 262] INFO: 正在发送测试报告邮件...
2016-07-20 17:32:35,348 main.py[line: 266] INFO: 发送邮件成功
2016-07-20 17:34:03,582 globalpy.py[line: 14] INFO: 正在初始化数据库[名称：TESTDB]对象
2016-07-20 17:34:03,592 globalpy.py[line: 17] INFO: 正在初始化数据库[名称：SAOFUDB]对象
2016-07-20 17:34:03,597 globalpy.py[line: 20] INFO: 正在获取testlink
2016-07-20 17:34:03,651 main.py[line: 60] INFO: 正在创建测试用例报告报表
2016-07-20 17:34:03,651 mydb.py[line: 37] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime)
2016-07-20 17:34:03,653 main.py[line: 63] INFO: 正在创建测试步骤报告报表
2016-07-20 17:34:03,654 mydb.py[line: 37] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2016-07-20 17:34:03,654 main.py[line: 66] INFO: 正在读取运行模式配置
2016-07-20 17:34:03,656 main.py[line: 71] INFO: 按项目运行测试
2016-07-20 17:34:03,656 main.py[line: 107] INFO: 运行指定项目
2016-07-20 17:34:03,771 main.py[line: 123] INFO: 正在读取测项目[id：73, project：pj_wecharno]的协议，host，端口配置...
2016-07-20 17:34:03,772 main.py[line: 126] INFO: 成功读取配置信息：{"protocol":"http","host":"m.test.saofu.cn","port":80} 
2016-07-20 17:34:03,773 main.py[line: 142] INFO: 正在执行测试项目[id：73, project：pj_wecharno]
2016-07-20 17:34:03,773 testproject.py[line: 23] INFO: 正在获取测试项目[id：73, name：pj_wecharno]对应对应的测试计划名称列表
2016-07-20 17:34:03,887 testproject.py[line: 28] INFO: 成功获取项目测试计划名称列表[list=['plan1_of_wecharno']]
2016-07-20 17:34:04,012 testproject.py[line: 38] INFO: 正在执行项目测试计划[project：pj_wecharno，testplan：plan1_of_wecharno]
2016-07-20 17:34:04,013 testplan.py[line: 29] INFO: 正在获取测试计划[project=pj_wecharno，name=plan1_of_wecharno]的测试用例
2016-07-20 17:34:04,138 testplan.py[line: 35] INFO: 成功获取测试计划[project=pj_wecharno，name=plan1_of_wecharno]的测试用例id：dict_keys(['88', '98', '76', '102', '93', '80'])
2016-07-20 17:34:04,378 testplan.py[line: 57] INFO: 记录测试用例到测试用例报表
2016-07-20 17:34:04,378 mydb.py[line: 50] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720173403', 88, 'test-n-把商品加入购物车', '微商城-把商品加入购物车接口', 'plan1_of_wecharno', 'pj_wecharno', 'Block', '')
2016-07-20 17:34:04,379 testplan.py[line: 60] INFO: 开始执行测试用例[id=88，name=test-n-把商品加入购物车]
2016-07-20 17:34:04,379 testcase.py[line: 48] INFO: 记录测试步骤到测试步骤报告表
2016-07-20 17:34:04,379 mydb.py[line: 50] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720173403', 88, 'test-n-把商品加入购物车', 'plan1_of_wecharno', 'pj_wecharno', 90, 1, '', 'http', 'm.test.saofu.cn', 80, '{"class":"AddToCart","function":"test_add_to_cart","method":"post","url":"/addtocart","params":{"mallGoodsId":26838,"standardId":"undefined","amount":2,"serial":"var","openId":"var"}}', '{"success":"True", "amount":2, "mall_goods_id":26838,"shop_id":42, "closed":1}', 'Block', '', '')
2016-07-20 17:34:04,381 testcase.py[line: 60] INFO: 开始执行步骤操作[第1步]
2016-07-20 17:34:04,381 casestep.py[line: 64] INFO: 调用的方法为：AddToCart.test_add_to_cart
2016-07-20 17:34:04,381 mydb.py[line: 77] INFO: query：SELECT id FROM customer WHERE channel_serial=%s  data：('ous64uFCCLMyXYDJ-MkNilyCI5CY',)
2016-07-20 17:34:04,384 mydb.py[line: 63] INFO: query：UPDATE mall_shopping_cart SET amount = 0 WHERE customer_id = 6840 and closed=1
2016-07-20 17:34:04,388 mydb.py[line: 77] INFO: query：SELECT id FROM customer WHERE channel_serial=%s  data：('ous64uFCCLMyXYDJ-MkNilyCI5CY',)
2016-07-20 17:34:04,390 mydb.py[line: 77] INFO: query：SELECT id FROM shop WHERE serial=%s  data：('10549840601068216320',)
2016-07-20 17:34:04,392 wechatno_wemall.py[line: 133] INFO: 正在发起POST请求...
2016-07-20 17:34:04,393 httpprotocol.py[line: 67] INFO: 发起的请求为：http://m.test.saofu.cn:80/addtocart
2016-07-20 17:34:04,643 wechatno_wemall.py[line: 140] INFO: 正在解析返回结果:{'attach': None, 'message': None, 'success': True}
2016-07-20 17:34:04,643 mydb.py[line: 77] INFO: query：SELECT amount, mall_goods_id, shop_id, closed, id FROM mall_shopping_cart WHERE customer_id = %s and closed=%s ORDER BY id DESC LIMIT 1  data：(6840, 1)
2016-07-20 17:34:04,648 testcase.py[line: 98] INFO: 正在更新步骤执行结果
2016-07-20 17:34:04,648 mydb.py[line: 63] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="post", runtime="2016-07-20 17:34:04" WHERE executed_history_id = 20160720173403 AND testcase_id = 88 AND step_id = 90 AND project='pj_wecharno' AND testplan='plan1_of_wecharno'
2016-07-20 17:34:04,655 testcase.py[line: 101] INFO: 测试用例[id=88, name=test-n-把商品加入购物车]执行成功
2016-07-20 17:34:04,655 testplan.py[line: 64] INFO: 正在更新用例执行结果
2016-07-20 17:34:04,656 mydb.py[line: 63] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2016-07-20 17:34:04" WHERE executed_history_id = 20160720173403 AND testcase_id = 88 AND project='pj_wecharno' AND testplan='plan1_of_wecharno'
2016-07-20 17:34:04,786 testplan.py[line: 75] INFO: 正在更新testlink上测试计划[testplan_id=74, bulid_version=v1.0.0],对应用例[testcase_id=88]的执行结果
2016-07-20 17:34:05,181 testplan.py[line: 57] INFO: 记录测试用例到测试用例报表
2016-07-20 17:34:05,181 mydb.py[line: 50] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720173403', 98, 'test-n-查看购物车商品列表', '微商城-查看购物车商品列表接口', 'plan1_of_wecharno', 'pj_wecharno', 'Block', '')
2016-07-20 17:34:05,182 testplan.py[line: 60] INFO: 开始执行测试用例[id=98，name=test-n-查看购物车商品列表]
2016-07-20 17:34:05,182 testcase.py[line: 48] INFO: 记录测试步骤到测试步骤报告表
2016-07-20 17:34:05,183 mydb.py[line: 50] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720173403', 98, 'test-n-查看购物车商品列表', 'plan1_of_wecharno', 'pj_wecharno', 100, 1, '', 'http', 'm.test.saofu.cn', 80, '{"class":"AddToCart","function":"test_add_to_cart","method":"post","url":"/addtocart","params":{"mallGoodsId":26838,"standardId":"undefined","amount":2,"serial":"var","openId":"var"}}', '{"success":"True", "amount":2, "mall_goods_id":26838,"shop_id":"var", "closed":1}', 'Block', '', '')
2016-07-20 17:34:05,183 testcase.py[line: 60] INFO: 开始执行步骤操作[第1步]
2016-07-20 17:34:05,184 casestep.py[line: 64] INFO: 调用的方法为：AddToCart.test_add_to_cart
2016-07-20 17:34:05,184 mydb.py[line: 77] INFO: query：SELECT id FROM customer WHERE channel_serial=%s  data：('ous64uFCCLMyXYDJ-MkNilyCI5CY',)
2016-07-20 17:34:05,187 mydb.py[line: 63] INFO: query：UPDATE mall_shopping_cart SET amount = 0 WHERE customer_id = 6840 and closed=1
2016-07-20 17:34:05,265 mydb.py[line: 77] INFO: query：SELECT id FROM customer WHERE channel_serial=%s  data：('ous64uFCCLMyXYDJ-MkNilyCI5CY',)
2016-07-20 17:34:05,269 mydb.py[line: 77] INFO: query：SELECT id FROM shop WHERE serial=%s  data：('10549840601068216320',)
2016-07-20 17:34:05,274 wechatno_wemall.py[line: 133] INFO: 正在发起POST请求...
2016-07-20 17:34:05,275 httpprotocol.py[line: 67] INFO: 发起的请求为：http://m.test.saofu.cn:80/addtocart
2016-07-20 17:34:05,401 wechatno_wemall.py[line: 140] INFO: 正在解析返回结果:{'attach': None, 'message': None, 'success': True}
2016-07-20 17:34:05,401 mydb.py[line: 77] INFO: query：SELECT amount, mall_goods_id, shop_id, closed, id FROM mall_shopping_cart WHERE customer_id = %s and closed=%s ORDER BY id DESC LIMIT 1  data：(6840, 1)
2016-07-20 17:34:05,406 testcase.py[line: 98] INFO: 正在更新步骤执行结果
2016-07-20 17:34:05,406 mydb.py[line: 63] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="post", runtime="2016-07-20 17:34:05" WHERE executed_history_id = 20160720173403 AND testcase_id = 98 AND step_id = 100 AND project='pj_wecharno' AND testplan='plan1_of_wecharno'
2016-07-20 17:34:05,416 testcase.py[line: 48] INFO: 记录测试步骤到测试步骤报告表
2016-07-20 17:34:05,416 mydb.py[line: 50] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720173403', 98, 'test-n-查看购物车商品列表', 'plan1_of_wecharno', 'pj_wecharno', 101, 2, '', 'http', 'm.test.saofu.cn', 80, '{"class":"CartList","function":"test_view_cart_list","method":"get","url":"/cartlist?","params":{"serial":"var","openId":"var"}} ', '{"amount":2,"goodsID":26838}', 'Block', '', '')
2016-07-20 17:34:05,417 testcase.py[line: 60] INFO: 开始执行步骤操作[第2步]
2016-07-20 17:34:05,418 casestep.py[line: 64] INFO: 调用的方法为：CartList.test_view_cart_list
2016-07-20 17:34:05,418 wechatno_wemall.py[line: 190] INFO: 正在发起GET请求...
2016-07-20 17:34:05,418 httpprotocol.py[line: 50] INFO: 发起的请求为：http://m.test.saofu.cn:80/cartlist?openId=ous64uFCCLMyXYDJ-MkNilyCI5CY&serial=10549840601068216320
2016-07-20 17:34:05,433 wechatno_wemall.py[line: 196] INFO: 正在解析返回结果:[{'shopBranchId': None, 'customer': None, 'cateringType': None, 'mallGoodsStandard': None, 'mallGoods': {'lunchBoxCount': None, 'rank': None, 'soldCount': 0, 'baiduSyncStatus': None, 'standard': 1, 'delFlag': None, 'oriPrice': 0, 'detail': None, 'status': 1, 'isSku': 0, 'transientPrice': 0.0, 'waimaiChannel': None, 'mallGoodsCatagoryId': None, 'relType': None, 'expirTime': None, 'skuQuantity': None, 'meituanSyncStatus': None, 'dishCount': None, 'cateName': None, 'useTime': None, 'business': None, 'cwId': None, 'standardLowPrice': 0.0, 'cateId': 0, 'shopId': None, 'name': '接口-测试商品1', 'transientOriPrice': 0.0, 'price': 1, 'goodsCopyId': None, 'mallGoodsStandards': None, 'iconUrl': 'http://res.test.saofu.cn/saofu/upload/image/2016/07/18/352c9a44-5fe7-4546-9786-563d8700a773.jpg,', 'standardAllSku': None, 'standardTopPrice': 0.0, 'shop': None, 'syncStatus': 0, 'preRemind': None, 'servicePhone': None, 'cannotUseTime': None, 'relBranchList': None, 'id': 26838, 'rules': None, 'hasActivity': 0, 'description': '接口测试专用,烦请勿删,勿操作', 'elemeSyncStatus': None, 'createTime': None, 'istop': 0, 'branch': None, 'outerId': None, 'mallGoodsCate': None, 'soldAllCount': 0}, 'closed': None, 'id': 15772, 'amount': 2, 'shop': None}]
2016-07-20 17:34:05,433 testcase.py[line: 98] INFO: 正在更新步骤执行结果
2016-07-20 17:34:05,433 mydb.py[line: 63] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2016-07-20 17:34:05" WHERE executed_history_id = 20160720173403 AND testcase_id = 98 AND step_id = 101 AND project='pj_wecharno' AND testplan='plan1_of_wecharno'
2016-07-20 17:34:05,436 testcase.py[line: 101] INFO: 测试用例[id=98, name=test-n-查看购物车商品列表]执行成功
2016-07-20 17:34:05,436 testplan.py[line: 64] INFO: 正在更新用例执行结果
2016-07-20 17:34:05,436 mydb.py[line: 63] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2016-07-20 17:34:05" WHERE executed_history_id = 20160720173403 AND testcase_id = 98 AND project='pj_wecharno' AND testplan='plan1_of_wecharno'
2016-07-20 17:34:05,551 testplan.py[line: 75] INFO: 正在更新testlink上测试计划[testplan_id=74, bulid_version=v1.0.0],对应用例[testcase_id=98]的执行结果
2016-07-20 17:34:05,958 testplan.py[line: 57] INFO: 记录测试用例到测试用例报表
2016-07-20 17:34:05,959 mydb.py[line: 50] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720173403', 76, 'test-n-显示默认页面', '微商城-显示商品列表接口', 'plan1_of_wecharno', 'pj_wecharno', 'Block', '')
2016-07-20 17:34:05,960 testplan.py[line: 60] INFO: 开始执行测试用例[id=76，name=test-n-显示默认页面]
2016-07-20 17:34:05,960 testcase.py[line: 48] INFO: 记录测试步骤到测试步骤报告表
2016-07-20 17:34:05,960 mydb.py[line: 50] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720173403', 76, 'test-n-显示默认页面', 'plan1_of_wecharno', 'pj_wecharno', 78, 1, '', 'http', 'm.test.saofu.cn', 80, '{"class":"PList","function":"test_plist_default","method":"post","url":"/goods/plist","params":{"page_size":"10","page_no":"1","cateIds":"","orderBy":"","serial":"var","name":""}}', '{"currentPage":1,"pageSize":10,"pageStartRow":0,"pagination":"True","totalPages":"var","totalRows":"var","goodsinfo":[{"id": 26838,"name": "接口-测试商品1","price": 1,"description": "接口测试专用,烦请勿删,勿操作","iconUrl": "http://res.test.saofu.cn/saofu/upload/image/2016/07/18/352c9a44-5fe7-4546-9786-563d8700a773.jpg","skuQuantity":"var","standard": 1},{"id": 26839,"name": "接口-测试商品2","price": 0,"description": "接口测试专用,勿动","iconUrl": "http://res.test.saofu.cn/saofu/upload/image/2016/07/18/2c2ebeef-8d4f-483f-8ff4-ebcd5d209bb7.jpg","skuQuantity":"var","standard": 2}]}', 'Block', '', '')
2016-07-20 17:34:05,963 testcase.py[line: 60] INFO: 开始执行步骤操作[第1步]
2016-07-20 17:34:05,963 casestep.py[line: 64] INFO: 调用的方法为：PList.test_plist_default
2016-07-20 17:34:05,963 wechatno_wemall.py[line: 29] INFO: 正在发起POST请求...
2016-07-20 17:34:05,964 httpprotocol.py[line: 67] INFO: 发起的请求为：http://m.test.saofu.cn:80/goods/plist
2016-07-20 17:34:06,020 wechatno_wemall.py[line: 38] INFO: 正在解析返回结果:{'pageInfo': {'totalRows': 5, 'pagination': True, 'hasPreviousPage': False, 'pageEndRow': 5, 'currentPage': 1, 'hasNextPage': False, 'pageStartRow': 0, 'params': None, 'pageSize': 10, 'totalPages': 1}, 'dataList': [{'lunchBoxCount': None, 'rank': None, 'soldCount': 268, 'baiduSyncStatus': None, 'standard': 1, 'delFlag': None, 'oriPrice': 0, 'detail': None, 'status': 1, 'isSku': 0, 'transientPrice': 0.0, 'waimaiChannel': None, 'mallGoodsCatagoryId': None, 'relType': None, 'expirTime': None, 'skuQuantity': 0, 'meituanSyncStatus': None, 'dishCount': None, 'cateName': None, 'useTime': None, 'business': None, 'cwId': None, 'standardLowPrice': 0.0, 'cateId': 0, 'shopId': None, 'name': '插线板更名后', 'transientOriPrice': 0.0, 'price': 1000, 'goodsCopyId': None, 'mallGoodsStandards': None, 'iconUrl': 'http://res.test.saofu.cn/saofu/upload/image/2016/04/25/bef60928-a428-4dde-85b1-17fff4005959.jpg', 'standardAllSku': None, 'standardTopPrice': 0.0, 'shop': {'printAdUrl': None, 'thirdAppId': None, 'printAdText': None, 'id': 42, 'fullName': None, 'name': None, 'email': None, 'parent': None, 'suffixShop': None, 'createTime': None, 'phoneNumber': None, 'serial': None, 'logoUrl': None}, 'syncStatus': 0, 'preRemind': None, 'servicePhone': None, 'cannotUseTime': None, 'relBranchList': None, 'id': 26189, 'rules': None, 'hasActivity': 0, 'description': '100', 'elemeSyncStatus': None, 'createTime': None, 'istop': 0, 'branch': None, 'outerId': None, 'mallGoodsCate': {'branchId': None, 'delFlag': None, 'orderNum': None, 'oldName': None, 'goodsSoldOutAmount': 0, 'id': 260, 'goodsAmount': 0, 'name': None, 'shop': None}, 'soldAllCount': 274}, {'lunchBoxCount': None, 'rank': None, 'soldCount': 72, 'baiduSyncStatus': None, 'standard': 1, 'delFlag': None, 'oriPrice': 0, 'detail': None, 'status': 1, 'isSku': 0, 'transientPrice': 0.0, 'waimaiChannel': None, 'mallGoodsCatagoryId': None, 'relType': None, 'expirTime': None, 'skuQuantity': 9265759, 'meituanSyncStatus': None, 'dishCount': None, 'cateName': None, 'useTime': None, 'business': None, 'cwId': None, 'standardLowPrice': 0.0, 'cateId': 0, 'shopId': None, 'name': '水淀粉', 'transientOriPrice': 0.0, 'price': 100000000, 'goodsCopyId': None, 'mallGoodsStandards': None, 'iconUrl': 'http://res.test.saofu.cn/saofu/upload/image/2016/04/25/7a59f0ca-ccb6-41ec-a1ab-27a854237d2f.jpg', 'standardAllSku': None, 'standardTopPrice': 0.0, 'shop': {'printAdUrl': None, 'thirdAppId': None, 'printAdText': None, 'id': 42, 'fullName': None, 'name': None, 'email': None, 'parent': None, 'suffixShop': None, 'createTime': None, 'phoneNumber': None, 'serial': None, 'logoUrl': None}, 'syncStatus': 0, 'preRemind': None, 'servicePhone': None, 'cannotUseTime': None, 'relBranchList': None, 'id': 26188, 'rules': None, 'hasActivity': 0, 'description': '阿斯达', 'elemeSyncStatus': None, 'createTime': None, 'istop': 0, 'branch': None, 'outerId': None, 'mallGoodsCate': {'branchId': None, 'delFlag': None, 'orderNum': None, 'oldName': None, 'goodsSoldOutAmount': 0, 'id': 260, 'goodsAmount': 0, 'name': None, 'shop': None}, 'soldAllCount': 72}, {'lunchBoxCount': None, 'rank': None, 'soldCount': 0, 'baiduSyncStatus': None, 'standard': 2, 'delFlag': None, 'oriPrice': 0, 'detail': None, 'status': 1, 'isSku': 0, 'transientPrice': 0.0, 'waimaiChannel': None, 'mallGoodsCatagoryId': None, 'relType': None, 'expirTime': None, 'skuQuantity': None, 'meituanSyncStatus': None, 'dishCount': None, 'cateName': None, 'useTime': None, 'business': None, 'cwId': None, 'standardLowPrice': 0.01, 'cateId': 0, 'shopId': None, 'name': '接口-测试商品2', 'transientOriPrice': 0.0, 'price': 0, 'goodsCopyId': None, 'mallGoodsStandards': None, 'iconUrl': 'http://res.test.saofu.cn/saofu/upload/image/2016/07/18/2c2ebeef-8d4f-483f-8ff4-ebcd5d209bb7.jpg', 'standardAllSku': None, 'standardTopPrice': 0.0, 'shop': {'printAdUrl': None, 'thirdAppId': None, 'printAdText': None, 'id': 42, 'fullName': None, 'name': None, 'email': None, 'parent': None, 'suffixShop': None, 'createTime': None, 'phoneNumber': None, 'serial': None, 'logoUrl': None}, 'syncStatus': 0, 'preRemind': None, 'servicePhone': None, 'cannotUseTime': None, 'relBranchList': None, 'id': 26839, 'rules': None, 'hasActivity': 0, 'description': '接口测试专用,勿动', 'elemeSyncStatus': None, 'createTime': None, 'istop': 0, 'branch': None, 'outerId': None, 'mallGoodsCate': {'branchId': None, 'delFlag': None, 'orderNum': None, 'oldName': None, 'goodsSoldOutAmount': 0, 'id': 268, 'goodsAmount': 0, 'name': None, 'shop': None}, 'soldAllCount': 35}, {'lunchBoxCount': None, 'rank': None, 'soldCount': 5, 'baiduSyncStatus': None, 'standard': 1, 'delFlag': None, 'oriPrice': 0, 'detail': None, 'status': 1, 'isSku': 0, 'transientPrice': 0.0, 'waimaiChannel': None, 'mallGoodsCatagoryId': None, 'relType': None, 'expirTime': None, 'skuQuantity': 999995, 'meituanSyncStatus': None, 'dishCount': None, 'cateName': None, 'useTime': None, 'business': None, 'cwId': None, 'standardLowPrice': 0.0, 'cateId': 0, 'shopId': None, 'name': '接口-测试商品1', 'transientOriPrice': 0.0, 'price': 1, 'goodsCopyId': None, 'mallGoodsStandards': None, 'iconUrl': 'http://res.test.saofu.cn/saofu/upload/image/2016/07/18/352c9a44-5fe7-4546-9786-563d8700a773.jpg', 'standardAllSku': None, 'standardTopPrice': 0.0, 'shop': {'printAdUrl': None, 'thirdAppId': None, 'printAdText': None, 'id': 42, 'fullName': None, 'name': None, 'email': None, 'parent': None, 'suffixShop': None, 'createTime': None, 'phoneNumber': None, 'serial': None, 'logoUrl': None}, 'syncStatus': 0, 'preRemind': None, 'servicePhone': None, 'cannotUseTime': None, 'relBranchList': None, 'id': 26838, 'rules': None, 'hasActivity': 0, 'description': '接口测试专用,烦请勿删,勿操作', 'elemeSyncStatus': None, 'createTime': None, 'istop': 0, 'branch': None, 'outerId': None, 'mallGoodsCate': {'branchId': None, 'delFlag': None, 'orderNum': None, 'oldName': None, 'goodsSoldOutAmount': 0, 'id': 268, 'goodsAmount': 0, 'name': None, 'shop': None}, 'soldAllCount': 5}, {'lunchBoxCount': None, 'rank': None, 'soldCount': 0, 'baiduSyncStatus': None, 'standard': 2, 'delFlag': None, 'oriPrice': 0, 'detail': None, 'status': 1, 'isSku': 0, 'transientPrice': 0.0, 'waimaiChannel': None, 'mallGoodsCatagoryId': None, 'relType': None, 'expirTime': None, 'skuQuantity': None, 'meituanSyncStatus': None, 'dishCount': None, 'cateName': None, 'useTime': None, 'business': None, 'cwId': None, 'standardLowPrice': 1.0, 'cateId': 0, 'shopId': None, 'name': '多规格冗余测试', 'transientOriPrice': 0.0, 'price': 0, 'goodsCopyId': None, 'mallGoodsStandards': None, 'iconUrl': 'http://res.test.saofu.cn/saofu/upload/file/2016/07/13/f99f5e55-d23c-4d73-980e-031b0e1643ea.png', 'standardAllSku': None, 'standardTopPrice': 0.0, 'shop': {'printAdUrl': None, 'thirdAppId': None, 'printAdText': None, 'id': 42, 'fullName': None, 'name': None, 'email': None, 'parent': None, 'suffixShop': None, 'createTime': None, 'phoneNumber': None, 'serial': None, 'logoUrl': None}, 'syncStatus': 0, 'preRemind': None, 'servicePhone': None, 'cannotUseTime': None, 'relBranchList': None, 'id': 26836, 'rules': None, 'hasActivity': 0, 'description': '啊啊啊啊啊', 'elemeSyncStatus': None, 'createTime': None, 'istop': 0, 'branch': None, 'outerId': None, 'mallGoodsCate': {'branchId': None, 'delFlag': None, 'orderNum': None, 'oldName': None, 'goodsSoldOutAmount': 0, 'id': 259, 'goodsAmount': 0, 'name': None, 'shop': None}, 'soldAllCount': 9}]}
2016-07-20 17:34:06,023 mydb.py[line: 77] INFO: query：SELECT COUNT(*) FROM mall_goods AS mg JOIN mall_goods_cate AS mgc ON mg.cate_id=mgc.id JOIN template_cate AS tc ON tc.cate_id=mgc.id AND tc.template_id=1 AND tc.status=1 WHERE mg.shop_id=%s AND mg.del_flag=%s AND mg.status=%s AND mg.business_id NOT IN (%s, %s)  data：(42, 0, 1, 1, 2)
2016-07-20 17:34:06,037 mydb.py[line: 77] INFO: query：SELECT sku_quantity FROM mall_goods WHERE id=%s  data：(26838,)
2016-07-20 17:34:06,042 mydb.py[line: 77] INFO: query：SELECT sku_quantity FROM mall_goods WHERE id=%s  data：(26839,)
2016-07-20 17:34:06,045 testcase.py[line: 98] INFO: 正在更新步骤执行结果
2016-07-20 17:34:06,046 mydb.py[line: 63] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="post", runtime="2016-07-20 17:34:05" WHERE executed_history_id = 20160720173403 AND testcase_id = 76 AND step_id = 78 AND project='pj_wecharno' AND testplan='plan1_of_wecharno'
2016-07-20 17:34:06,048 testcase.py[line: 101] INFO: 测试用例[id=76, name=test-n-显示默认页面]执行成功
2016-07-20 17:34:06,048 testplan.py[line: 64] INFO: 正在更新用例执行结果
2016-07-20 17:34:06,048 mydb.py[line: 63] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2016-07-20 17:34:05" WHERE executed_history_id = 20160720173403 AND testcase_id = 76 AND project='pj_wecharno' AND testplan='plan1_of_wecharno'
2016-07-20 17:34:06,168 testplan.py[line: 75] INFO: 正在更新testlink上测试计划[testplan_id=74, bulid_version=v1.0.0],对应用例[testcase_id=76]的执行结果
2016-07-20 17:34:06,557 testplan.py[line: 57] INFO: 记录测试用例到测试用例报表
2016-07-20 17:34:06,557 mydb.py[line: 50] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720173403', 102, 'test-n-模拟点击立即购买按钮', '微商城-模拟点击页面跳转', 'plan1_of_wecharno', 'pj_wecharno', 'Block', '')
2016-07-20 17:34:06,558 testplan.py[line: 60] INFO: 开始执行测试用例[id=102，name=test-n-模拟点击立即购买按钮]
2016-07-20 17:34:06,559 testcase.py[line: 48] INFO: 记录测试步骤到测试步骤报告表
2016-07-20 17:34:06,559 mydb.py[line: 50] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720173403', 102, 'test-n-模拟点击立即购买按钮', 'plan1_of_wecharno', 'pj_wecharno', 104, 1, '', 'http', 'm.test.saofu.cn', 80, '{"class":"ToBuyGoods","function":"test_to_buy_goods","method":"get","url":"/mall/tobuy/1?","params":{"mallGoodsId":"26838","amount":1,"type":1,"serial":"var"}}', '{"status":200}', 'Block', '', '')
2016-07-20 17:34:06,560 testcase.py[line: 60] INFO: 开始执行步骤操作[第1步]
2016-07-20 17:34:06,560 casestep.py[line: 64] INFO: 调用的方法为：ToBuyGoods.test_to_buy_goods
2016-07-20 17:34:06,560 wechatno_wemall.py[line: 210] INFO: 正在发起GET请求...
2016-07-20 17:34:06,560 httpprotocol.py[line: 50] INFO: 发起的请求为：http://m.test.saofu.cn:80/mall/tobuy/1?mallGoodsId=26838&type=1&amount=1&serial=10549840601068216320
2016-07-20 17:34:06,571 wechatno_wemall.py[line: 216] INFO: 正在解析返回结果:





<!DOCTYPE html>
<link rel="stylesheet" href="/css/bind/banner.css?v=3.4.0-f5bd5" />  
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <link rel="stylesheet" href="/css/skin-nr-min.css?v=3.4.0-f5bd5">
        <link rel="stylesheet" href="/css/cpn.css?v=3.4.0-f5bd5">
        <link rel="stylesheet" type="text/css" href="/css/zepto.alert.css?v=3.4.0-f5bd5">
        <title>哎哟~出错啦~</title>
    </head>
    <body>
        <script type="text/javascript" src="/js/zepto.min.js?v=3.4.0-f5bd5" ></script>
        <script type="text/javascript" src="/js/zepto.alert.min.js?v=3.4.0-f5bd5"></script>
        <script type="text/javascript">
        Zepto(function($){
			function myAlert(content) {
		    	$.dialog({
		    		content : content,
		    		title : "alert"
		    	});
		    }
			
				
				
					myAlert("噢...出错了!请等待管理员处理,稍后重试");					
				
			
        });
        </script>
    </body>
</html>

2016-07-20 17:34:06,571 htmlparser.py[line: 28] INFO: Data 






2016-07-20 17:34:06,573 testcase.py[line: 69] ERROR: 步骤[1]执行出错,停止执行用例[id=102, name=test-n-模拟点击立即购买按钮]
2016-07-20 17:34:06,573 testcase.py[line: 75] INFO: 正在更新步骤执行结果
2016-07-20 17:34:06,573 mydb.py[line: 63] INFO: query：UPDATE case_step_report_tb SET runresult="Error",reason="Traceback (most recent call last):  File E:\Projects\interface_project\interface\wechatno_wemall.py, line 220, in test_to_buy_goods    parser.feed(response)  File D:\Program Files\python33\lib\html\parser.py, line 145, in feed    self.goahead(0)  File D:\Program Files\python33\lib\html\parser.py, line 200, in goahead    k = self.parse_html_declaration(i)  File D:\Program Files\python33\lib\html\parser.py, line 290, in parse_html_declaration    self.handle_decl(rawdata[i+2:gtpos])  File E:\Projects\interface_project\htmlparser.py, line 47, in handle_decl    logger.info(Decl： % data)TypeError: not all arguments converted during string formatting", protocol_method="get", runtime="2016-07-20 17:34:06" WHERE executed_history_id = 20160720173403 AND testcase_id = 102 AND step_id = 104 AND project='pj_wecharno' AND testplan='plan1_of_wecharno'
2016-07-20 17:34:06,575 testplan.py[line: 64] INFO: 正在更新用例执行结果
2016-07-20 17:34:06,575 mydb.py[line: 63] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2016-07-20 17:34:06" WHERE executed_history_id = 20160720173403 AND testcase_id = 102 AND project='pj_wecharno' AND testplan='plan1_of_wecharno'
2016-07-20 17:34:06,686 testplan.py[line: 75] INFO: 正在更新testlink上测试计划[testplan_id=74, bulid_version=v1.0.0],对应用例[testcase_id=102]的执行结果
2016-07-20 17:34:07,075 testplan.py[line: 57] INFO: 记录测试用例到测试用例报表
2016-07-20 17:34:07,075 mydb.py[line: 50] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720173403', 93, 'test-n-把商品移出购物车', '微商城-把商品移出购物车接口', 'plan1_of_wecharno', 'pj_wecharno', 'Block', '')
2016-07-20 17:34:07,077 testplan.py[line: 60] INFO: 开始执行测试用例[id=93，name=test-n-把商品移出购物车]
2016-07-20 17:34:07,077 testcase.py[line: 48] INFO: 记录测试步骤到测试步骤报告表
2016-07-20 17:34:07,077 mydb.py[line: 50] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720173403', 93, 'test-n-把商品移出购物车', 'plan1_of_wecharno', 'pj_wecharno', 95, 1, '', 'http', 'm.test.saofu.cn', 80, '{"class":"AddToCart","function":"test_add_to_cart","method":"post","url":"/addtocart","params":{"mallGoodsId":26838,"standardId":"undefined","amount":2,"serial":"var","openId":"var"}} ', '{"success":"True", "amount":2, "mall_goods_id":26838,"shop_id":"var", "closed":1}', 'Block', '', '')
2016-07-20 17:34:07,078 testcase.py[line: 60] INFO: 开始执行步骤操作[第1步]
2016-07-20 17:34:07,079 casestep.py[line: 64] INFO: 调用的方法为：AddToCart.test_add_to_cart
2016-07-20 17:34:07,079 mydb.py[line: 77] INFO: query：SELECT id FROM customer WHERE channel_serial=%s  data：('ous64uFCCLMyXYDJ-MkNilyCI5CY',)
2016-07-20 17:34:07,082 mydb.py[line: 63] INFO: query：UPDATE mall_shopping_cart SET amount = 0 WHERE customer_id = 6840 and closed=1
2016-07-20 17:34:07,197 mydb.py[line: 77] INFO: query：SELECT id FROM customer WHERE channel_serial=%s  data：('ous64uFCCLMyXYDJ-MkNilyCI5CY',)
2016-07-20 17:34:07,202 mydb.py[line: 77] INFO: query：SELECT id FROM shop WHERE serial=%s  data：('10549840601068216320',)
2016-07-20 17:34:07,207 wechatno_wemall.py[line: 133] INFO: 正在发起POST请求...
2016-07-20 17:34:07,208 httpprotocol.py[line: 67] INFO: 发起的请求为：http://m.test.saofu.cn:80/addtocart
2016-07-20 17:34:07,344 wechatno_wemall.py[line: 140] INFO: 正在解析返回结果:{'attach': None, 'message': None, 'success': True}
2016-07-20 17:34:07,345 mydb.py[line: 77] INFO: query：SELECT amount, mall_goods_id, shop_id, closed, id FROM mall_shopping_cart WHERE customer_id = %s and closed=%s ORDER BY id DESC LIMIT 1  data：(6840, 1)
2016-07-20 17:34:07,348 testcase.py[line: 98] INFO: 正在更新步骤执行结果
2016-07-20 17:34:07,348 mydb.py[line: 63] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="post", runtime="2016-07-20 17:34:07" WHERE executed_history_id = 20160720173403 AND testcase_id = 93 AND step_id = 95 AND project='pj_wecharno' AND testplan='plan1_of_wecharno'
2016-07-20 17:34:07,351 testcase.py[line: 48] INFO: 记录测试步骤到测试步骤报告表
2016-07-20 17:34:07,351 mydb.py[line: 50] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720173403', 93, 'test-n-把商品移出购物车', 'plan1_of_wecharno', 'pj_wecharno', 96, 2, '', 'http', 'm.test.saofu.cn', 80, '{"class":"DelFromCart","function":"test_del_from_cart","method":"get","url":"/delfromcart?","params":{"strIds":"var","serial":"var"}}', '{"success":"True"}', 'Block', '', '')
2016-07-20 17:34:07,352 testcase.py[line: 60] INFO: 开始执行步骤操作[第2步]
2016-07-20 17:34:07,353 casestep.py[line: 64] INFO: 调用的方法为：DelFromCart.test_del_from_cart
2016-07-20 17:34:07,353 wechatno_wemall.py[line: 166] INFO: 正在发起POST请求...
2016-07-20 17:34:07,353 httpprotocol.py[line: 67] INFO: 发起的请求为：http://m.test.saofu.cn:80/delfromcart?
2016-07-20 17:34:07,520 wechatno_wemall.py[line: 173] INFO: 正在解析返回结果:{'attach': None, 'message': None, 'success': True}
2016-07-20 17:34:07,521 mydb.py[line: 77] INFO: query：SELECT amount, mall_goods_id, shop_id, closed, id FROM mall_shopping_cart WHERE id=%s  data：(15772,)
2016-07-20 17:34:07,526 testcase.py[line: 98] INFO: 正在更新步骤执行结果
2016-07-20 17:34:07,526 mydb.py[line: 63] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2016-07-20 17:34:07" WHERE executed_history_id = 20160720173403 AND testcase_id = 93 AND step_id = 96 AND project='pj_wecharno' AND testplan='plan1_of_wecharno'
2016-07-20 17:34:07,533 testcase.py[line: 101] INFO: 测试用例[id=93, name=test-n-把商品移出购物车]执行成功
2016-07-20 17:34:07,534 testplan.py[line: 64] INFO: 正在更新用例执行结果
2016-07-20 17:34:07,534 mydb.py[line: 63] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2016-07-20 17:34:07" WHERE executed_history_id = 20160720173403 AND testcase_id = 93 AND project='pj_wecharno' AND testplan='plan1_of_wecharno'
2016-07-20 17:34:07,718 testplan.py[line: 75] INFO: 正在更新testlink上测试计划[testplan_id=74, bulid_version=v1.0.0],对应用例[testcase_id=93]的执行结果
2016-07-20 17:34:08,146 testplan.py[line: 57] INFO: 记录测试用例到测试用例报表
2016-07-20 17:34:08,146 mydb.py[line: 50] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720173403', 80, 'test-n-点击商品', '微商城-模拟点击页面跳转', 'plan1_of_wecharno', 'pj_wecharno', 'Block', '')
2016-07-20 17:34:08,148 testplan.py[line: 60] INFO: 开始执行测试用例[id=80，name=test-n-点击商品]
2016-07-20 17:34:08,149 testcase.py[line: 48] INFO: 记录测试步骤到测试步骤报告表
2016-07-20 17:34:08,149 mydb.py[line: 50] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720173403', 80, 'test-n-点击商品', 'plan1_of_wecharno', 'pj_wecharno', 82, 1, '', 'http', 'm.test.saofu.cn', 80, '{"class":"Goods","function":"test_click_goods","method":"get","url":"/goods/item?","params":{"id":26838, "serial":"var"}}', '{"status":200}', 'Block', '', '')
2016-07-20 17:34:08,151 testcase.py[line: 60] INFO: 开始执行步骤操作[第1步]
2016-07-20 17:34:08,151 casestep.py[line: 64] INFO: 调用的方法为：Goods.test_click_goods
2016-07-20 17:34:08,151 wechatno_wemall.py[line: 89] INFO: 正在发起GET请求...
2016-07-20 17:34:08,152 httpprotocol.py[line: 50] INFO: 发起的请求为：http://m.test.saofu.cn:80/goods/item?id=26838&serial=10549840601068216320
2016-07-20 17:34:08,394 wechatno_wemall.py[line: 93] INFO: 正在解析返回结果:b'\r\n\r\n\r\n\r\n\r\n\r\n<!DOCTYPE html>\r\n<link rel="stylesheet" href="/css/bind/banner.css?v=3.4.0-f5bd5" />  \r\n<!DOCTYPE html>\r\n<html lang="en">\r\n<head>\r\n<meta charset="UTF-8">\r\n<meta name="viewport"\r\n\tcontent="width=device-width, initial-scale=1, user-scalable=no">\r\n<meta name="format-detection" content="telephone=no">\r\n<meta http-equiv="Expires" CONTENT="0">\r\n<meta http-equiv="Cache-Control" CONTENT="no-cache">\r\n<meta http-equiv="Pragma" CONTENT="no-cache">\r\n<title>\xe5\xbe\xae\xe5\x95\x86\xe5\x9f\x8e</title>\r\n<link rel="stylesheet" href="/css/mall/pure.css?v=3.4.0-f5bd5">\r\n<link rel="stylesheet" href="/css/mall/grids-core.css?v=3.4.0-f5bd5">\r\n<link rel="stylesheet" href="/css/mall/zepto.alert.css?v=3.4.0-f5bd5">\r\n<script type="text/javascript" src="/js/TouchSlide.1.1.js?v=3.4.0-f5bd5"></script>\r\n</head>\r\n<style type="text/css">\r\n* {\r\n\tmargin: 0;\r\n\tpadding: 0;\r\n}\r\n\r\nhtml {\r\n\tcolor: #626262;\r\n}\r\n\r\na {\r\n\ttext-decoration: none;\r\n}\r\n\r\nol,ul {\r\n\tlist-style: outside none none;\r\n}\r\n\r\n.left {\r\n\tfloat: left;\r\n}\r\n\r\n.right {\r\n\tfloat: right;\r\n}\r\n\r\n.in-block {\r\n\tdisplay: inline-block;\r\n}\r\n\r\n.orange {\r\n\tcolor: #c58d04;\r\n}\r\n\r\n.grey {\r\n\tcolor: #adadad;\r\n}\r\n\r\n.bg-color {\r\n\tbackground: #ececec;\r\n}\r\n\r\n#wrapper {\r\n\twidth: 100%;\r\n\tmargin: 0 auto;\r\n}\r\n\r\n.header {\r\n\twidth: 100%;\r\n\toverflow: hidden;\r\n\tborder-bottom: 1px solid #eaeaea;\r\n}\r\n\r\n.top {\r\n\twidth: 90%;\r\n\tmargin: 0 auto;\r\n\tpadding-bottom: 1em;\r\n}\r\n\r\n.top p {\r\n\tmargin: 0.5em 0;\r\n\tfont-size: 0.8em;\r\n}\r\n.top>p:first-child{\r\n\tfont-size:1.1em;\r\n}\r\n\r\n.fonts {\r\n\tfont-size: 1em !important;\r\n\tmargin: 0.8em 0 !important;\r\n}\r\n\r\n\r\n.jian {\r\n\tdisplay: inline-block;\r\n\twidth: 1.5em;\r\n\theight: 1.5em;\r\n\tline-height: 1.5em;\r\n\tborder: 1px solid #d1d1d1;\r\n\tborder-right: 0 none;\r\n\tborder-top-left-radius: 4px;\r\n\tborder-bottom-left-radius: 4px;\r\n\ttext-align: center;\r\n\tmargin-left:0.4em;\r\n}\r\n\r\n.val {\r\n\tbackground: #fff;\r\n\tdisplay: inline-block;\r\n\twidth: 3.5em;\r\n\theight: 1.5em;\r\n\tline-height: 1.5em;\r\n\tborder: 1px solid #d1d1d1;\r\n\ttext-align: center;\r\n}\r\n\r\n.jia {\r\n\tdisplay: inline-block;\r\n\twidth: 1.5em;\r\n\theight: 1.5em;\r\n\tline-height: 1.5em;\r\n\tborder: 1px solid #d1d1d1;\r\n\tborder-left: 0 none;\r\n\tborder-top-right-radius: 4px;\r\n\tborder-bottom-right-radius: 4px;\r\n\ttext-align: center;\r\n}\r\n\r\n.button {\r\n\twidth: 47%;\r\n\theight: 3em;\r\n\tcolor: #fff;\r\n\tborder: none;\r\n\tborder-radius: 4px;\r\n}\r\n\r\n.addbtn {\r\n\tbackground: #edb23e;\r\n\tmargin-right: 3%;\r\n}\r\n\r\n.buybtn {\r\n\tbackground: #f96364;\r\n}\r\n\r\n.bottom {\r\n\tborder-top: 0.5em solid #eeeeee;\r\n\tpadding-bottom: 3em;\r\n    position: relative;\r\n    width:100%;\r\n}\r\n\r\n.bottom .bottom-details{\r\n\twidth:100%;\t\r\n\tword-break:break-all;\r\n\toverflow-x: hidden; \r\n}\r\n\r\n.bottom-details h1,.bottom-details h2,.bottom-details h3,.bottom-details h4,.bottom-details h5{\r\n\tword-break:break-all;\r\n}\r\n\r\n.bottom > p:first-child {\r\n\ttext-indent: 1em;\r\n}\r\n\r\n.bottom > p img{\r\n    width: 1em;\r\n    position: absolute;\r\n    top:0.8em;\r\n    right: 1em;\r\n}\r\n\r\n.bottom-details p {\r\n\ttext-indent: 1em;\r\n\tword-break:break-all;\r\n}\r\n\r\n.inline-padding {\r\n\tdisplay: inline-block;\r\n\tpadding-left: 0.8em;\r\n}\r\n\r\n.inline-paddings {\r\n\tdisplay: inline-block;\r\n\tpadding-left: 1.6em;\r\n}\r\n\r\n.footer {\r\n\twidth: 100%;\r\n\theight: 3em;\r\n\tposition: fixed;\r\n\tbottom: 0;\r\n\tbackground: #fff;\r\n\tcolor: #b6b6b6;\r\n\ttext-align: center;\r\n\tborder-top: 1px solid #eaeaea;\r\n}\r\n\r\n.footer a {\r\n\tcolor: #626262;\r\n\tdisplay: inline-block;\r\n\theight:1em;\r\n\tline-height:1em;\r\n\tpadding-top: 1em;\r\n\tpadding-bottom: 1em;\r\n}\r\n.footer .inline-paddings-right{\r\n    padding-top: 1em;\r\n    float: right;\r\n}\r\n.footer img {\r\n\tdisplay: inline-block;\r\n\twidth: 1em;\r\n}\r\n\r\n.top-bg{\r\n    position: fixed;\r\n    bottom: 3.5em;\r\n    right: 1em;\r\n    width: 2em;\r\n    display: none;\r\n    filter:alpha(opacity=40);       /* IE */\r\n    -moz-opacity:0.4;              /* Moz + FF */\r\n    opacity: 0.4;     \r\n}\r\n.spec{\r\n    display: inline-block;\r\n    margin: 0 1em 0.8em 0;\r\n    font-size:0.7em;\r\n    padding:0.3em 1em;\r\n    border:1px solid #ccc;\r\n    border-radius:3px;\r\n    cursor:pointer;\r\n}\r\n.fonts a.active{\r\n    border: 2px solid #d2b57b;\r\n}\r\n.guige{\r\n    float: left;\r\n    width: 40px;\r\n}\r\n.guige-detail{\r\n    margin-left: 40px;\r\n}\r\n.guige-detail a[disabled]{\r\n    background: none repeat scroll 0 0 #fff;\r\n    color: #e3e3e3;\r\n    cursor: default;\r\n}\r\n/* \xe6\x9c\xac\xe4\xbe\x8b\xe5\xad\x90css -------------------------------------- */\r\n.slideBox {\r\n\tposition: relative;\r\n\twidth: 100%;\r\n\theight: 240px;\r\n\toverflow: hidden;\r\n}\r\n\r\n.slideBox .hd {\r\n\tposition: absolute;\r\n\twidth: 100%;\r\n\theight: 27px;\r\n\tbottom: 0;\r\n\tleft: 0;\r\n\tz-index: 1;\r\n}\r\n\r\n.slideBox .hd img {\r\n\twidth: 11px;\r\n}\r\n\r\n.slideBox .bd {\r\n\tposition: relative;\r\n\tz-index: 0;\r\n}\r\n\r\n.slideBox .bd li {\r\n\tposition: relative;\r\n}\r\n\r\n.slideBox .bd li img {\r\n\twidth: 100%;\r\n\theight: 240px;\r\n\tdisplay: block;\r\n}\r\n\r\n.slideBox .bd li a {\r\n\t-webkit-tap-highlight-color: rgba(0, 0, 0, 0); /* \xe5\x8f\x96\xe6\xb6\x88\xe9\x93\xbe\xe6\x8e\xa5\xe9\xab\x98\xe4\xba\xae */\r\n}\r\n\r\n.slideBox .hd a {\r\n\tdisplay: block;\r\n\twidth: auto;\r\n\tposition: absolute;\r\n\tbottom: 0.5em;\r\n\tright: 0.5em;\r\n\tpadding: 0.1em 0.7em;\r\n\ttext-align: center;\r\n\tcolor: #fff;\r\n\tbackground-color: rgba(0, 0, 0, 0.6);\r\n\tborder-radius: 4px;\r\n}\r\n.slideBox>.a-img{\r\n    position: fixed;\r\n    top:1em;\r\n    right: 0.5em;\r\n    display: block;\r\n    width:2em;\r\n    height: 2em;\r\n    border-radius: 2em;\r\n    background-color: rgba(0, 0, 0, 0.6); \r\n    z-index: 2;\r\n}\r\n.slideBox>.a-img>img{\r\n    width: 1em;            \r\n    position: absolute;\r\n    top:50%;\r\n    left: 50%;\r\n    margin-top:-0.5em;\r\n    margin-left: -0.5em;\r\n}\r\n.carts{\r\n\tposition: relative;\r\n}\r\n.cartNum{                      \r\n    display: inline-block;\r\n    width: 1.2em;\r\n    height: 1.2em;\r\n    line-height:1.2em;\r\n    border-radius: 1.5em;\r\n    background:#ff0000;  \r\n    position: absolute;\r\n    right: -0.7em;\r\n    top: 0.3em;\r\n    color: #fff;\r\n}\r\n#soldCount{\r\n\tfloat: right; \r\n\tfont-size: 0.8em; \r\n\tpadding-top: 0.3em;\r\n\tcolor:#adadad;\r\n}\r\n.freight{\r\n\tfont-size:0.8em;\r\n\tcolor:#adadad;\r\n}\r\n.standard_sku{\r\n\tfont-size:0.9em;\r\n\tcolor:#adadad;\r\n}\r\n@media all and (max-width:320px){\r\n\t.slideBox{\r\n\t\theight:240px;\r\n\t}\r\n\t.slideBox .bd li img {\r\n\t\theight:240px;\r\n\t}\r\n}\r\n@media all and (min-width:321px) and (max-width:360px){\r\n\t.slideBox{\r\n\t\theight:270px;\r\n\t}\r\n\t.slideBox .bd li img {\r\n\t\theight:270px;\r\n\t}\r\n}\r\n@media all and (min-width:361px) and (max-width:375px){\r\n\t.slideBox{\r\n\t\theight:281px;\r\n\t}\r\n\t.slideBox .bd li img {\r\n\t\theight:281px;\r\n\t}\r\n}\r\n@media all and (min-width:376px) and (max-width:384px){\r\n\t.slideBox{\r\n\t\theight:288px;\r\n\t}\r\n\t.slideBox .bd li img {\r\n\t\theight:288px;\r\n\t}\r\n}\r\n@media all and (min-width:385px) and (max-width:414px){\r\n\t.slideBox{\r\n\t\theight:311px;\r\n\t}\r\n\t.slideBox .bd li img {\r\n\t\theight:311px;\r\n\t}\r\n}\r\n@media all and (min-width:415px){\r\n\t.slideBox{\r\n\t\theight:360px;\r\n\t}\r\n\t.slideBox .bd li img {\r\n\t\theight:360px;\r\n\t}\r\n}\r\n</style>\r\n<body>\r\n\t<div id="wrapper">\r\n\t\t<div class="header">\r\n\t\t\t<div id="slideBox" class="slideBox">\r\n\t\t\t\t<a class="a-img" href="/cart?serial=10549840601068216320">\r\n                  <img src="/images/mall/detail_cart_icon.png?v=3.4.0-f5bd5" class="pure-img">\r\n              \t</a>\r\n\t\t\t\t<div class="bd">\r\n\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t<li><img src="http://res.test.saofu.cn/saofu/upload/image/2016/07/18/352c9a44-5fe7-4546-9786-563d8700a773.jpg" class="pure-img" /></li>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="hd">\r\n\t\t\t\t\t<a class="pageState"></a>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\t\t\r\n\t\t<div class="content">\r\n\t\t\t<div class="top">\r\n\t\t\t\t<p>\r\n\t\t\t\t\t\xe6\x8e\xa5\xe5\x8f\xa3-\xe6\xb5\x8b\xe8\xaf\x95\xe5\x95\x86\xe5\x93\x811\r\n\t\t\t\t</p>\r\n\t\t\t\t<p class="grey">\r\n\t\t\t\t\t\xe6\x8e\xa5\xe5\x8f\xa3\xe6\xb5\x8b\xe8\xaf\x95\xe4\xb8\x93\xe7\x94\xa8,\xe7\x83\xa6\xe8\xaf\xb7\xe5\x8b\xbf\xe5\x88\xa0,\xe5\x8b\xbf\xe6\x93\x8d\xe4\xbd\x9c\r\n\t\t\t\t</p>\t\t\t\t\r\n\t\t\t\t<p class="fonts">\r\n\t\t\t\t\t\xe5\x8d\x95\xe4\xbb\xb7:\r\n\t\t\t\t\t<span class="orange">\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\xef\xbf\xa50.01\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t</span>\r\n\t\t\t\t\t<span id = "soldCount">\xe9\x94\x80\xe9\x87\x8f:5\xe4\xbb\xb6</span>\r\n\t\t\t\t</p>\r\n\t\t\t\t\r\n\t\t\t\t\t<p class="freight">\xe8\xbf\x90\xe8\xb4\xb9:<span>4.00\xe5\x85\x83</span></p>\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t<p class="fonts shuliang">\r\n\t\t\t\t\t\xe6\x95\xb0\xe9\x87\x8f:<span class="jian">-</span><span class="val">1</span><span class="jia">+</span>\r\n\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<span class="standard_sku">(\xe5\xba\x93\xe5\xad\x98\xef\xbc\x9a999995\xe4\xbb\xb6)</span>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t</p> \r\n\t\t\t\t<div>\r\n\t\t\t\t\t<input type="button" class="button addbtn" value="\xe5\x8a\xa0\xe5\x85\xa5\xe8\xb4\xad\xe7\x89\xa9\xe8\xbd\xa6" />\r\n\t\t\t\t\t<input type="button" class="button buybtn" value="\xe7\xab\x8b\xe5\x8d\xb3\xe8\xb4\xad\xe4\xb9\xb0" />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class="bottom">\r\n\t\t\t\t<p>\xe5\x9b\xbe\xe6\x96\x87\xe8\xaf\xa6\xe6\x83\x85<img src="/images/mall/down.png?v=3.4.0-f5bd5" class="pure-img"></p>\r\n\t\t\t\t<div class="bottom-details">\r\n\t\t\t\t\t<p>\t\t\t\t\t\t\t\t\t\t\t</p><p><br/></p><p><br/></p><p><br/></p><p>\xe6\x8e\xa5\xe5\x8f\xa3\xe6\xb5\x8b\xe8\xaf\x95\xe4\xb8\x93\xe7\x94\xa8\xe5\x95\x86\xe5\x93\x81,\xe5\x95\x86\xe5\x93\x81\xe8\xaf\xa6\xe6\x83\x85\xe7\xae\x80\xe4\xbb\x8b<br/></p>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\t\t\r\n\t</div>\r\n\t<img src="/images/mall/top_bg.png?v=3.4.0-f5bd5" class="pure-img top-bg">\r\n\t<script type="text/javascript" src="/js/zepto.min.js?v=3.4.0-f5bd5"></script>\r\n    <script type="text/javascript" src="/js/touch.js?v=3.4.0-f5bd5"></script>\r\n    <script type="text/javascript" src="/js/mall/zepto.alert.js?v=3.4.0-f5bd5"></script>\r\n\t<script type="text/javascript" src="/js/mall/mall.js?v=3.4.0-f5bd5"></script>\r\n\t<script type="text/javascript">\r\n\t\t\t\r\n\tvar priceLimita = $(".orange").text();\r\n\tvar soldCounta = $("#soldCount").text();\r\n\tvar skua = $(".standard_sku").text();\r\n\t\r\n            // \xe6\xbb\x9a\xe5\x8a\xa8\xe7\xaa\x97\xe5\x8f\xa3\xe6\x9d\xa5\xe5\x88\xa4\xe6\x96\xad\xe6\x8c\x89\xe9\x92\xae\xe6\x98\xbe\xe7\xa4\xba\xe6\x88\x96\xe9\x9a\x90\xe8\x97\x8f\r\n            $(window).scroll(function() {\r\n                if ($(this).scrollTop() > 120) {\r\n                    $(\'.top-bg\').show(100);\r\n                } else {\r\n                    $(\'.top-bg\').hide(100);\r\n                }\r\n            });\r\n            \r\n            function choose(obj,price,sku,standardSoldCount){\r\n            \tif(!$(obj).attr(\'disabled\')){\r\n            \tif($(obj).hasClass(\'active\')){\r\n            \t\t$(".orange").text(priceLimita);\r\n                \t$("#soldCount").text(soldCounta);\r\n                \t$(".standard_sku").text(skua);\r\n                \t $(obj).removeClass(\'active\');\r\n            \t}else{\r\n\t            \t$(".standard_sku").text("(\xe5\xba\x93\xe5\xad\x98:"+sku+"\xe4\xbb\xb6)");\r\n\t            \t$(".orange").text("\xef\xbf\xa5"+price);\r\n\t            \t$("#soldCount").text("\xe9\x94\x80\xe9\x87\x8f:"+standardSoldCount+"\xe4\xbb\xb6");\r\n\t            \t$(".spec").removeClass(\'active\');\r\n                    $(obj).addClass(\'active\');\r\n            \t}\r\n            \t}\r\n            }\r\n            \r\n           \r\n            \r\n            $(function(){\r\n            \t/* $(".spec").tap(function(){\r\n                    if(!$(this).attr(\'disabled\')){\r\n                        if($(this).hasClass(\'active\')){\r\n                            $(this).removeClass(\'active\');\r\n                            \r\n                        }else{\r\n                        \t\r\n                        }\r\n                    }                    \r\n                }); */\r\n                \r\n            \tTouchSlide({\r\n    \t\t\t\tslideCell : "#slideBox",\r\n    \t\t\t\tmainCell : ".bd ul",\r\n    \t\t\t\teffect : "leftLoop",\r\n    \t\t\t\tpageStateCell : ".pageState"\r\n    \t\t\t});            \t            \t\r\n\t\t\t\t\r\n            \t$(".bottom-details img").width($(".top").width());\r\n            });\r\n            \r\n            // jQuery\xe5\xae\x9e\xe7\x8e\xb0\xe5\x8a\xa8\xe7\x94\xbb\xe6\xbb\x9a\xe5\x8a\xa8\r\n            $(\'.top-bg\').click(function(event) {\r\n                event.preventDefault();\r\n                $(\'html, body\').scrollTop(0);\r\n            });\r\n\t\t\t\r\n\t\t\t$(".bottom > p img").click(function(){\r\n                $(this).parent().next().toggle();\r\n                if($(this).parent().next().css("display")=="block"){\r\n                    $(this).attr("src","/images/mall/down.png");\r\n                }else{\r\n                    $(this).attr("src","/images/mall/up.png");\r\n                }\r\n            });\r\n            \r\n            $(".jia").click(function(){\r\n            \tvar val = $(this).siblings(".val");\r\n            \tvar count = parseInt(val.text());\r\n                if (isNaN(count)) {\r\n                \tcount = 1;\r\n                } else {\r\n                \tcount += 1;\r\n                }\r\n                val.text(count);\r\n            });\r\n            $(".jian").click(function(){\r\n            \tvar val = $(this).siblings(".val");\r\n            \tvar count = parseInt(val.text());\r\n                if (isNaN(count) || count <= 1) {\r\n                \tcount = 1;\r\n                } else {\r\n                \tcount -= 1;\r\n                }\r\n                val.text(count);\r\n            });\r\n            \r\n            $(".addbtn").click(function(event){\r\n            \tif($(this).prop("disabled") == true)\r\n            \t\treturn false;\r\n            \tvar params = {\r\n   \t\t\t\t\tmallGoodsId : "26838",\r\n   \t\t\t\t\tstandardId : standardId,\r\n   \t\t\t\t\tamount : $(".val").text(),\r\n   \t\t\t\t\tserial : "10549840601068216320",\r\n   \t\t\t\t\topenId : "ous64uFCCLMyXYDJ-MkNilyCI5C"\r\n   \t\t\t\t};\r\n            \t\r\n            \tvar standard = 1;\r\n            \tif(standard == 2 && $(".active").length < 1){\r\n    \t\t\t\tdoAlert("no", "\xe8\xaf\xb7\xe9\x80\x89\xe6\x8b\xa9\xe5\x95\x86\xe5\x93\x81\xe7\x9a\x84\xe8\xa7\x84\xe6\xa0\xbc");\r\n    \t\t\t\treturn;\r\n    \t\t\t}\r\n            \tif(standard == 2){\r\n            \t\tvar standardId = $(".active").attr("data");\r\n    \t\t\t\tparams.standardId = standardId;\r\n            \t}\r\n            \t$.post("/addtocart", params, function(result){\r\n            \t\tif (null == result || !result.success) {\r\n            \t\t\ttoast(result.message);\r\n    \t\t\t\t\treturn;\r\n    \t\t\t\t}\r\n    \t\t\t\t//\xe6\x9b\xb4\xe6\x96\xb0\xe8\xb4\xad\xe7\x89\xa9\xe8\xbd\xa6\xe6\x95\xb0\xe9\x87\x8f\r\n    \t\t\t\t/* var cartNum = $(".cartNum").text();\r\n    \t\t\t\tif (null == cartNum || "" == cartNum || typeof (cartNum) == undefined) {\r\n    \t\t\t\t\t$(".carts").append("<span class=\'cartNum\'>1</span>");\r\n    \t\t\t\t} else {\r\n    \t\t\t\t\tif (null != result.attach && result.attach > 0) {\r\n    \t\t\t\t\t\t$(".cartNum").text(result.attach);\r\n    \t\t\t\t\t}\r\n    \t\t\t\t} */\r\n    \t\t\t\ttoast("\xe5\xb7\xb2\xe7\xbb\x8f\xe6\x88\x90\xe5\x8a\x9f\xe5\x8a\xa0\xe5\x85\xa5\xe8\xb4\xad\xe7\x89\xa9\xe8\xbd\xa6");\r\n            \t});\r\n            });\r\n\t\t$(".buybtn").click(function(event) {\r\n\t\t\tif($(this).prop("disabled") == true)\r\n        \t\treturn false;\r\n\t\t\t$(this).attr("disabled","disabled");\r\n\t\t\tvar standard = 1;\r\n        \tif(standard == 2 && $(".active").length < 1){\r\n\t\t\t\tdoAlert("no", "\xe8\xaf\xb7\xe9\x80\x89\xe6\x8b\xa9\xe5\x95\x86\xe5\x93\x81\xe7\x9a\x84\xe8\xa7\x84\xe6\xa0\xbc");\r\n\t\t\t\t$(this).removeAttr("disabled");\r\n\t\t\t\treturn;\r\n        \t}\r\n        \tif(standard == 2){\r\n        \t\tvar standardId = $(".active").attr("data");\r\n        \t\twindow.location.href = "/mall/tobuy/1?mallGoodsId=26838&amount=" + $(".val").text() + "&type=1&serial=10549840601068216320&standardId="+standardId;\r\n        \t\treturn;\r\n        \t}\r\n\t\t\twindow.location.href = "/mall/tobuy/1?mallGoodsId=26838&amount=" + $(".val").text() + "&type=1&serial=10549840601068216320";\r\n\t\t});\r\n\t</script>\r\n</body>\r\n</html>\r\n<!--\xe5\x8a\xa0\xe5\x85\xa5\xe5\x88\xa4\xe6\x96\xad\xe7\x94\xa8\xe6\x88\xb7\xe6\x98\xaf\xe5\x90\xa6\xe5\x85\xb3\xe6\xb3\xa8\xe5\x85\xac\xe4\xbc\x97\xe5\x8f\xb7\xe5\x8a\x9f\xe8\x83\xbd add by lipengfei at 2015-11-9  -->\r\n  \t\r\n\t<script type="text/javascript" src="/js/bind/banner.js?v=3.4.0-f5bd5"></script>\r\n\t<script type="text/javascript">\r\n\t\t$(function() {\r\n\t\t\t//var SHOP_SERIAL = getCookie("SHOP_SERIAL");\r\n\t\t\tvar SHOP_SERIAL = "10549840601068216320";\r\n\t\t\tif(null != SHOP_SERIAL && SHOP_SERIAL != ""){\r\n\t\t\t\t$.ajax({\r\n\t\t\t\t\turl : \'/saofu_mobile/checkUserBindStatus\',\r\n\t\t\t\t\tdata : {\r\n\t\t\t\t\t\t"serial" : SHOP_SERIAL\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttype : \'post\',\r\n\t\t\t\t\tcache : false,\r\n\t\t\t\t\tdataType : \'json\',\r\n\t\t\t\t\tsuccess : function(data) {\r\n\t\t\t\t\t\tif (data != null) {\r\n\t\t\t\t\t\t\tvar guildFocusStr = data.guildFocusStr;\r\n\t\t\t\t\t\t\tif(guildFocusStr != null && guildFocusStr == "1"){\r\n\t\t\t\t\t\t\t\tvar hasBindedShop = data.hasBindedShop;\r\n\t\t\t\t\t\t\t\tif(hasBindedShop == "0"){\r\n\t\t\t\t\t\t\t\t\tvar qrName = data.QRPublicName;\r\n\t\t\t\t\t\t\t\t\tvar qrUrl = data.QRCodeURL;\r\n\t\t\t\t\t\t\t\t\tif(qrName != "" && qrUrl != ""){\r\n\t\t\t\t\t\t\t\t\t\tvar params = qrName+"**"+qrUrl;\r\n\t\t\t\t\t\t\t\t\t\tfollowModule(params);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} \r\n\t\t\t\t\t},\r\n\t\t\t\t\terror : function() {\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t\t\t\t\r\n\t</script>\r\n'
2016-07-20 17:34:08,399 wechatno_wemall.py[line: 96] INFO: 正在解析返回结果:200
2016-07-20 17:34:08,399 testcase.py[line: 98] INFO: 正在更新步骤执行结果
2016-07-20 17:34:08,399 mydb.py[line: 63] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2016-07-20 17:34:08" WHERE executed_history_id = 20160720173403 AND testcase_id = 80 AND step_id = 82 AND project='pj_wecharno' AND testplan='plan1_of_wecharno'
2016-07-20 17:34:08,405 testcase.py[line: 101] INFO: 测试用例[id=80, name=test-n-点击商品]执行成功
2016-07-20 17:34:08,405 testplan.py[line: 64] INFO: 正在更新用例执行结果
2016-07-20 17:34:08,405 mydb.py[line: 63] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2016-07-20 17:34:08" WHERE executed_history_id = 20160720173403 AND testcase_id = 80 AND project='pj_wecharno' AND testplan='plan1_of_wecharno'
2016-07-20 17:34:08,530 testplan.py[line: 75] INFO: 正在更新testlink上测试计划[testplan_id=74, bulid_version=v1.0.0],对应用例[testcase_id=80]的执行结果
2016-07-20 17:34:08,667 testplan.py[line: 85] INFO: 测试计划[project=pj_wecharno ,testplan=plan1_of_wecharno]已执行完
2016-07-20 17:34:08,668 main.py[line: 229] INFO: 接口测试已执行完成，正在关闭数据库连接
2016-07-20 17:34:08,668 htmlreporter.py[line: 37] INFO: 正在查询测试用例总数
2016-07-20 17:34:08,668 mydb.py[line: 77] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20160720173403',)
2016-07-20 17:34:08,669 htmlreporter.py[line: 43] INFO: 正在查询执行通过的用例数
2016-07-20 17:34:08,670 mydb.py[line: 77] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20160720173403')
2016-07-20 17:34:08,670 htmlreporter.py[line: 49] INFO: 正在查询执行失败的用例数
2016-07-20 17:34:08,671 mydb.py[line: 77] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20160720173403')
2016-07-20 17:34:08,671 htmlreporter.py[line: 55] INFO: 正在查询执行出错的用例数
2016-07-20 17:34:08,671 mydb.py[line: 77] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20160720173403')
2016-07-20 17:34:08,672 htmlreporter.py[line: 61] INFO: 正在查询未执行的用例数
2016-07-20 17:34:08,672 mydb.py[line: 77] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20160720173403')
2016-07-20 17:34:08,673 htmlreporter.py[line: 72] INFO: 正在查询已运的测试计划
2016-07-20 17:34:08,674 mydb.py[line: 93] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20160720173403',)
2016-07-20 17:34:08,676 htmlreporter.py[line: 98] INFO: 正在查询测试计划[project：pj_wecharno, testplan：plan1_of_wecharno]的测试用例执行结果
2016-07-20 17:34:08,676 mydb.py[line: 93] INFO: query：SELECT id, executed_history_id, testcase_id, testcase_name,testsuit, testplan, project, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s ORDER BY id ASC  data：('pj_wecharno', 'plan1_of_wecharno', '20160720173403')
2016-07-20 17:34:08,679 htmlreporter.py[line: 105] INFO: 正在记录测试测试计划[project：pj_wecharno, testplan：plan1_of_wecharno]的测试用例运行结果到测试报告
2016-07-20 17:34:08,680 htmlreporter.py[line: 115] INFO: 正在查询已运的测试计划
2016-07-20 17:34:08,680 mydb.py[line: 93] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20160720173403',)
2016-07-20 17:34:08,681 htmlreporter.py[line: 127] INFO: 正在查询测试计划[project：pj_wecharno, testplan：plan1_of_wecharno]已运行的测试用例
2016-07-20 17:34:08,681 mydb.py[line: 93] INFO: query：SELECT testcase_id, testcase_name, project, testplan FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id ORDER BY id ASC  data：('pj_wecharno', 'plan1_of_wecharno', '20160720173403')
2016-07-20 17:34:08,682 htmlreporter.py[line: 158] INFO: 正在查询测试用例[id=88]步骤运行结果
2016-07-20 17:34:08,683 mydb.py[line: 93] INFO: query：SELECT step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, cstb.runresult, reason, cstb.runtime FROM case_step_report_tb AS cstb JOIN testcase_report_tb AS tstb ON cstb.testcase_id =  tstb.testcase_id AND cstb.project=tstb.project AND cstb.testplan=tstb.testplan AND cstb.executed_history_id = tstb.executed_history_id WHERE tstb.project= %s AND tstb.testplan=%s AND cstb.testcase_id=%s AND cstb.executed_history_id = %s  data：('pj_wecharno', 'plan1_of_wecharno', 88, '20160720173403')
2016-07-20 17:34:08,684 htmlreporter.py[line: 158] INFO: 正在查询测试用例[id=98]步骤运行结果
2016-07-20 17:34:08,684 mydb.py[line: 93] INFO: query：SELECT step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, cstb.runresult, reason, cstb.runtime FROM case_step_report_tb AS cstb JOIN testcase_report_tb AS tstb ON cstb.testcase_id =  tstb.testcase_id AND cstb.project=tstb.project AND cstb.testplan=tstb.testplan AND cstb.executed_history_id = tstb.executed_history_id WHERE tstb.project= %s AND tstb.testplan=%s AND cstb.testcase_id=%s AND cstb.executed_history_id = %s  data：('pj_wecharno', 'plan1_of_wecharno', 98, '20160720173403')
2016-07-20 17:34:08,686 htmlreporter.py[line: 158] INFO: 正在查询测试用例[id=76]步骤运行结果
2016-07-20 17:34:08,686 mydb.py[line: 93] INFO: query：SELECT step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, cstb.runresult, reason, cstb.runtime FROM case_step_report_tb AS cstb JOIN testcase_report_tb AS tstb ON cstb.testcase_id =  tstb.testcase_id AND cstb.project=tstb.project AND cstb.testplan=tstb.testplan AND cstb.executed_history_id = tstb.executed_history_id WHERE tstb.project= %s AND tstb.testplan=%s AND cstb.testcase_id=%s AND cstb.executed_history_id = %s  data：('pj_wecharno', 'plan1_of_wecharno', 76, '20160720173403')
2016-07-20 17:34:08,689 htmlreporter.py[line: 158] INFO: 正在查询测试用例[id=102]步骤运行结果
2016-07-20 17:34:08,689 mydb.py[line: 93] INFO: query：SELECT step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, cstb.runresult, reason, cstb.runtime FROM case_step_report_tb AS cstb JOIN testcase_report_tb AS tstb ON cstb.testcase_id =  tstb.testcase_id AND cstb.project=tstb.project AND cstb.testplan=tstb.testplan AND cstb.executed_history_id = tstb.executed_history_id WHERE tstb.project= %s AND tstb.testplan=%s AND cstb.testcase_id=%s AND cstb.executed_history_id = %s  data：('pj_wecharno', 'plan1_of_wecharno', 102, '20160720173403')
2016-07-20 17:34:08,691 htmlreporter.py[line: 158] INFO: 正在查询测试用例[id=93]步骤运行结果
2016-07-20 17:34:08,691 mydb.py[line: 93] INFO: query：SELECT step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, cstb.runresult, reason, cstb.runtime FROM case_step_report_tb AS cstb JOIN testcase_report_tb AS tstb ON cstb.testcase_id =  tstb.testcase_id AND cstb.project=tstb.project AND cstb.testplan=tstb.testplan AND cstb.executed_history_id = tstb.executed_history_id WHERE tstb.project= %s AND tstb.testplan=%s AND cstb.testcase_id=%s AND cstb.executed_history_id = %s  data：('pj_wecharno', 'plan1_of_wecharno', 93, '20160720173403')
2016-07-20 17:34:08,693 htmlreporter.py[line: 158] INFO: 正在查询测试用例[id=80]步骤运行结果
2016-07-20 17:34:08,693 mydb.py[line: 93] INFO: query：SELECT step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, cstb.runresult, reason, cstb.runtime FROM case_step_report_tb AS cstb JOIN testcase_report_tb AS tstb ON cstb.testcase_id =  tstb.testcase_id AND cstb.project=tstb.project AND cstb.testplan=tstb.testplan AND cstb.executed_history_id = tstb.executed_history_id WHERE tstb.project= %s AND tstb.testplan=%s AND cstb.testcase_id=%s AND cstb.executed_history_id = %s  data：('pj_wecharno', 'plan1_of_wecharno', 80, '20160720173403')
2016-07-20 17:34:08,695 htmlreporter.py[line: 177] INFO: 正在设置测试报告结果文件名
2016-07-20 17:34:08,695 htmlreporter.py[line: 187] INFO: 测试报告文件名所在路径为：E:\\Projects\\report\\test_report20160720173403.html
2016-07-20 17:34:08,695 htmlreporter.py[line: 180] INFO: 正在生成测试报告
2016-07-20 17:34:08,697 main.py[line: 252] INFO: 生成测试报告成功
2016-07-20 17:34:08,917 main.py[line: 259] INFO: E:\\Projects\\report\\test_report20160720173403.html
2016-07-20 17:34:08,917 main.py[line: 262] INFO: 正在发送测试报告邮件...
2016-07-20 17:34:08,917 main.py[line: 266] INFO: 发送邮件成功
2016-07-20 17:34:49,606 globalpy.py[line: 14] INFO: 正在初始化数据库[名称：TESTDB]对象
2016-07-20 17:34:49,618 globalpy.py[line: 17] INFO: 正在初始化数据库[名称：SAOFUDB]对象
2016-07-20 17:34:49,622 globalpy.py[line: 20] INFO: 正在获取testlink
2016-07-20 17:34:49,687 main.py[line: 60] INFO: 正在创建测试用例报告报表
2016-07-20 17:34:49,688 mydb.py[line: 37] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime)
2016-07-20 17:34:49,689 main.py[line: 63] INFO: 正在创建测试步骤报告报表
2016-07-20 17:34:49,689 mydb.py[line: 37] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2016-07-20 17:34:49,691 main.py[line: 66] INFO: 正在读取运行模式配置
2016-07-20 17:34:49,692 main.py[line: 71] INFO: 按项目运行测试
2016-07-20 17:34:49,692 main.py[line: 107] INFO: 运行指定项目
2016-07-20 17:34:49,809 main.py[line: 123] INFO: 正在读取测项目[id：73, project：pj_wecharno]的协议，host，端口配置...
2016-07-20 17:34:49,809 main.py[line: 126] INFO: 成功读取配置信息：{"protocol":"http","host":"m.test.saofu.cn","port":80} 
2016-07-20 17:34:49,810 main.py[line: 142] INFO: 正在执行测试项目[id：73, project：pj_wecharno]
2016-07-20 17:34:49,810 testproject.py[line: 23] INFO: 正在获取测试项目[id：73, name：pj_wecharno]对应对应的测试计划名称列表
2016-07-20 17:34:49,950 testproject.py[line: 28] INFO: 成功获取项目测试计划名称列表[list=['plan1_of_wecharno']]
2016-07-20 17:34:50,067 testproject.py[line: 38] INFO: 正在执行项目测试计划[project：pj_wecharno，testplan：plan1_of_wecharno]
2016-07-20 17:34:50,067 testplan.py[line: 29] INFO: 正在获取测试计划[project=pj_wecharno，name=plan1_of_wecharno]的测试用例
2016-07-20 17:34:50,191 testplan.py[line: 35] INFO: 成功获取测试计划[project=pj_wecharno，name=plan1_of_wecharno]的测试用例id：dict_keys(['88', '93', '76', '80', '102', '98'])
2016-07-20 17:34:50,430 testplan.py[line: 57] INFO: 记录测试用例到测试用例报表
2016-07-20 17:34:50,431 mydb.py[line: 50] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720173449', 88, 'test-n-把商品加入购物车', '微商城-把商品加入购物车接口', 'plan1_of_wecharno', 'pj_wecharno', 'Block', '')
2016-07-20 17:34:50,432 testplan.py[line: 60] INFO: 开始执行测试用例[id=88，name=test-n-把商品加入购物车]
2016-07-20 17:34:50,432 testcase.py[line: 48] INFO: 记录测试步骤到测试步骤报告表
2016-07-20 17:34:50,432 mydb.py[line: 50] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720173449', 88, 'test-n-把商品加入购物车', 'plan1_of_wecharno', 'pj_wecharno', 90, 1, '', 'http', 'm.test.saofu.cn', 80, '{"class":"AddToCart","function":"test_add_to_cart","method":"post","url":"/addtocart","params":{"mallGoodsId":26838,"standardId":"undefined","amount":2,"serial":"var","openId":"var"}}', '{"success":"True", "amount":2, "mall_goods_id":26838,"shop_id":42, "closed":1}', 'Block', '', '')
2016-07-20 17:34:50,433 testcase.py[line: 60] INFO: 开始执行步骤操作[第1步]
2016-07-20 17:34:50,433 casestep.py[line: 64] INFO: 调用的方法为：AddToCart.test_add_to_cart
2016-07-20 17:34:50,434 mydb.py[line: 77] INFO: query：SELECT id FROM customer WHERE channel_serial=%s  data：('ous64uFCCLMyXYDJ-MkNilyCI5CY',)
2016-07-20 17:34:50,436 mydb.py[line: 63] INFO: query：UPDATE mall_shopping_cart SET amount = 0 WHERE customer_id = 6840 and closed=1
2016-07-20 17:34:50,439 mydb.py[line: 77] INFO: query：SELECT id FROM customer WHERE channel_serial=%s  data：('ous64uFCCLMyXYDJ-MkNilyCI5CY',)
2016-07-20 17:34:50,441 mydb.py[line: 77] INFO: query：SELECT id FROM shop WHERE serial=%s  data：('10549840601068216320',)
2016-07-20 17:34:50,444 wechatno_wemall.py[line: 133] INFO: 正在发起POST请求...
2016-07-20 17:34:50,444 httpprotocol.py[line: 67] INFO: 发起的请求为：http://m.test.saofu.cn:80/addtocart
2016-07-20 17:34:50,574 wechatno_wemall.py[line: 140] INFO: 正在解析返回结果:{'message': None, 'attach': None, 'success': True}
2016-07-20 17:34:50,575 mydb.py[line: 77] INFO: query：SELECT amount, mall_goods_id, shop_id, closed, id FROM mall_shopping_cart WHERE customer_id = %s and closed=%s ORDER BY id DESC LIMIT 1  data：(6840, 1)
2016-07-20 17:34:50,581 testcase.py[line: 98] INFO: 正在更新步骤执行结果
2016-07-20 17:34:50,582 mydb.py[line: 63] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="post", runtime="2016-07-20 17:34:50" WHERE executed_history_id = 20160720173449 AND testcase_id = 88 AND step_id = 90 AND project='pj_wecharno' AND testplan='plan1_of_wecharno'
2016-07-20 17:34:50,591 testcase.py[line: 101] INFO: 测试用例[id=88, name=test-n-把商品加入购物车]执行成功
2016-07-20 17:34:50,592 testplan.py[line: 64] INFO: 正在更新用例执行结果
2016-07-20 17:34:50,592 mydb.py[line: 63] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2016-07-20 17:34:50" WHERE executed_history_id = 20160720173449 AND testcase_id = 88 AND project='pj_wecharno' AND testplan='plan1_of_wecharno'
2016-07-20 17:34:50,751 testplan.py[line: 75] INFO: 正在更新testlink上测试计划[testplan_id=74, bulid_version=v1.0.0],对应用例[testcase_id=88]的执行结果
2016-07-20 17:34:51,199 testplan.py[line: 57] INFO: 记录测试用例到测试用例报表
2016-07-20 17:34:51,200 mydb.py[line: 50] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720173449', 93, 'test-n-把商品移出购物车', '微商城-把商品移出购物车接口', 'plan1_of_wecharno', 'pj_wecharno', 'Block', '')
2016-07-20 17:34:51,201 testplan.py[line: 60] INFO: 开始执行测试用例[id=93，name=test-n-把商品移出购物车]
2016-07-20 17:34:51,201 testcase.py[line: 48] INFO: 记录测试步骤到测试步骤报告表
2016-07-20 17:34:51,201 mydb.py[line: 50] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720173449', 93, 'test-n-把商品移出购物车', 'plan1_of_wecharno', 'pj_wecharno', 95, 1, '', 'http', 'm.test.saofu.cn', 80, '{"class":"AddToCart","function":"test_add_to_cart","method":"post","url":"/addtocart","params":{"mallGoodsId":26838,"standardId":"undefined","amount":2,"serial":"var","openId":"var"}} ', '{"success":"True", "amount":2, "mall_goods_id":26838,"shop_id":"var", "closed":1}', 'Block', '', '')
2016-07-20 17:34:51,203 testcase.py[line: 60] INFO: 开始执行步骤操作[第1步]
2016-07-20 17:34:51,203 casestep.py[line: 64] INFO: 调用的方法为：AddToCart.test_add_to_cart
2016-07-20 17:34:51,203 mydb.py[line: 77] INFO: query：SELECT id FROM customer WHERE channel_serial=%s  data：('ous64uFCCLMyXYDJ-MkNilyCI5CY',)
2016-07-20 17:34:51,206 mydb.py[line: 63] INFO: query：UPDATE mall_shopping_cart SET amount = 0 WHERE customer_id = 6840 and closed=1
2016-07-20 17:34:51,343 mydb.py[line: 77] INFO: query：SELECT id FROM customer WHERE channel_serial=%s  data：('ous64uFCCLMyXYDJ-MkNilyCI5CY',)
2016-07-20 17:34:51,347 mydb.py[line: 77] INFO: query：SELECT id FROM shop WHERE serial=%s  data：('10549840601068216320',)
2016-07-20 17:34:51,351 wechatno_wemall.py[line: 133] INFO: 正在发起POST请求...
2016-07-20 17:34:51,351 httpprotocol.py[line: 67] INFO: 发起的请求为：http://m.test.saofu.cn:80/addtocart
2016-07-20 17:34:51,570 wechatno_wemall.py[line: 140] INFO: 正在解析返回结果:{'message': None, 'attach': None, 'success': True}
2016-07-20 17:34:51,571 mydb.py[line: 77] INFO: query：SELECT amount, mall_goods_id, shop_id, closed, id FROM mall_shopping_cart WHERE customer_id = %s and closed=%s ORDER BY id DESC LIMIT 1  data：(6840, 1)
2016-07-20 17:34:51,575 testcase.py[line: 98] INFO: 正在更新步骤执行结果
2016-07-20 17:34:51,575 mydb.py[line: 63] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="post", runtime="2016-07-20 17:34:51" WHERE executed_history_id = 20160720173449 AND testcase_id = 93 AND step_id = 95 AND project='pj_wecharno' AND testplan='plan1_of_wecharno'
2016-07-20 17:34:51,581 testcase.py[line: 48] INFO: 记录测试步骤到测试步骤报告表
2016-07-20 17:34:51,582 mydb.py[line: 50] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720173449', 93, 'test-n-把商品移出购物车', 'plan1_of_wecharno', 'pj_wecharno', 96, 2, '', 'http', 'm.test.saofu.cn', 80, '{"class":"DelFromCart","function":"test_del_from_cart","method":"get","url":"/delfromcart?","params":{"strIds":"var","serial":"var"}}', '{"success":"True"}', 'Block', '', '')
2016-07-20 17:34:51,584 testcase.py[line: 60] INFO: 开始执行步骤操作[第2步]
2016-07-20 17:34:51,584 casestep.py[line: 64] INFO: 调用的方法为：DelFromCart.test_del_from_cart
2016-07-20 17:34:51,585 wechatno_wemall.py[line: 166] INFO: 正在发起POST请求...
2016-07-20 17:34:51,585 httpprotocol.py[line: 67] INFO: 发起的请求为：http://m.test.saofu.cn:80/delfromcart?
2016-07-20 17:34:51,838 wechatno_wemall.py[line: 173] INFO: 正在解析返回结果:{'message': None, 'attach': None, 'success': True}
2016-07-20 17:34:51,838 mydb.py[line: 77] INFO: query：SELECT amount, mall_goods_id, shop_id, closed, id FROM mall_shopping_cart WHERE id=%s  data：(15773,)
2016-07-20 17:34:51,843 testcase.py[line: 98] INFO: 正在更新步骤执行结果
2016-07-20 17:34:51,843 mydb.py[line: 63] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2016-07-20 17:34:51" WHERE executed_history_id = 20160720173449 AND testcase_id = 93 AND step_id = 96 AND project='pj_wecharno' AND testplan='plan1_of_wecharno'
2016-07-20 17:34:51,847 testcase.py[line: 101] INFO: 测试用例[id=93, name=test-n-把商品移出购物车]执行成功
2016-07-20 17:34:51,847 testplan.py[line: 64] INFO: 正在更新用例执行结果
2016-07-20 17:34:51,848 mydb.py[line: 63] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2016-07-20 17:34:51" WHERE executed_history_id = 20160720173449 AND testcase_id = 93 AND project='pj_wecharno' AND testplan='plan1_of_wecharno'
2016-07-20 17:34:51,995 testplan.py[line: 75] INFO: 正在更新testlink上测试计划[testplan_id=74, bulid_version=v1.0.0],对应用例[testcase_id=93]的执行结果
2016-07-20 17:34:52,356 testplan.py[line: 57] INFO: 记录测试用例到测试用例报表
2016-07-20 17:34:52,357 mydb.py[line: 50] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720173449', 76, 'test-n-显示默认页面', '微商城-显示商品列表接口', 'plan1_of_wecharno', 'pj_wecharno', 'Block', '')
2016-07-20 17:34:52,358 testplan.py[line: 60] INFO: 开始执行测试用例[id=76，name=test-n-显示默认页面]
2016-07-20 17:34:52,358 testcase.py[line: 48] INFO: 记录测试步骤到测试步骤报告表
2016-07-20 17:34:52,358 mydb.py[line: 50] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720173449', 76, 'test-n-显示默认页面', 'plan1_of_wecharno', 'pj_wecharno', 78, 1, '', 'http', 'm.test.saofu.cn', 80, '{"class":"PList","function":"test_plist_default","method":"post","url":"/goods/plist","params":{"page_size":"10","page_no":"1","cateIds":"","orderBy":"","serial":"var","name":""}}', '{"currentPage":1,"pageSize":10,"pageStartRow":0,"pagination":"True","totalPages":"var","totalRows":"var","goodsinfo":[{"id": 26838,"name": "接口-测试商品1","price": 1,"description": "接口测试专用,烦请勿删,勿操作","iconUrl": "http://res.test.saofu.cn/saofu/upload/image/2016/07/18/352c9a44-5fe7-4546-9786-563d8700a773.jpg","skuQuantity":"var","standard": 1},{"id": 26839,"name": "接口-测试商品2","price": 0,"description": "接口测试专用,勿动","iconUrl": "http://res.test.saofu.cn/saofu/upload/image/2016/07/18/2c2ebeef-8d4f-483f-8ff4-ebcd5d209bb7.jpg","skuQuantity":"var","standard": 2}]}', 'Block', '', '')
2016-07-20 17:34:52,359 testcase.py[line: 60] INFO: 开始执行步骤操作[第1步]
2016-07-20 17:34:52,359 casestep.py[line: 64] INFO: 调用的方法为：PList.test_plist_default
2016-07-20 17:34:52,359 wechatno_wemall.py[line: 29] INFO: 正在发起POST请求...
2016-07-20 17:34:52,360 httpprotocol.py[line: 67] INFO: 发起的请求为：http://m.test.saofu.cn:80/goods/plist
2016-07-20 17:34:52,406 wechatno_wemall.py[line: 38] INFO: 正在解析返回结果:{'dataList': [{'status': 1, 'business': None, 'description': '100', 'price': 1000, 'rules': None, 'elemeSyncStatus': None, 'skuQuantity': 0, 'dishCount': None, 'lunchBoxCount': None, 'waimaiChannel': None, 'preRemind': None, 'goodsCopyId': None, 'cateId': 0, 'outerId': None, 'relBranchList': None, 'transientOriPrice': 0.0, 'name': '插线板更名后', 'delFlag': None, 'oriPrice': 0, 'shopId': None, 'relType': None, 'baiduSyncStatus': None, 'meituanSyncStatus': None, 'cannotUseTime': None, 'createTime': None, 'shop': {'serial': None, 'email': None, 'parent': None, 'name': None, 'printAdText': None, 'suffixShop': None, 'printAdUrl': None, 'logoUrl': None, 'phoneNumber': None, 'fullName': None, 'createTime': None, 'thirdAppId': None, 'id': 42}, 'standardAllSku': None, 'istop': 0, 'mallGoodsCate': {'shop': None, 'goodsAmount': 0, 'branchId': None, 'name': None, 'delFlag': None, 'oldName': None, 'goodsSoldOutAmount': 0, 'orderNum': None, 'id': 260}, 'rank': None, 'hasActivity': 0, 'standard': 1, 'standardLowPrice': 0.0, 'standardTopPrice': 0.0, 'iconUrl': 'http://res.test.saofu.cn/saofu/upload/image/2016/04/25/bef60928-a428-4dde-85b1-17fff4005959.jpg', 'syncStatus': 0, 'transientPrice': 0.0, 'cwId': None, 'id': 26189, 'soldCount': 268, 'servicePhone': None, 'isSku': 0, 'expirTime': None, 'detail': None, 'cateName': None, 'branch': None, 'soldAllCount': 274, 'mallGoodsCatagoryId': None, 'useTime': None, 'mallGoodsStandards': None}, {'status': 1, 'business': None, 'description': '阿斯达', 'price': 100000000, 'rules': None, 'elemeSyncStatus': None, 'skuQuantity': 9265759, 'dishCount': None, 'lunchBoxCount': None, 'waimaiChannel': None, 'preRemind': None, 'goodsCopyId': None, 'cateId': 0, 'outerId': None, 'relBranchList': None, 'transientOriPrice': 0.0, 'name': '水淀粉', 'delFlag': None, 'oriPrice': 0, 'shopId': None, 'relType': None, 'baiduSyncStatus': None, 'meituanSyncStatus': None, 'cannotUseTime': None, 'createTime': None, 'shop': {'serial': None, 'email': None, 'parent': None, 'name': None, 'printAdText': None, 'suffixShop': None, 'printAdUrl': None, 'logoUrl': None, 'phoneNumber': None, 'fullName': None, 'createTime': None, 'thirdAppId': None, 'id': 42}, 'standardAllSku': None, 'istop': 0, 'mallGoodsCate': {'shop': None, 'goodsAmount': 0, 'branchId': None, 'name': None, 'delFlag': None, 'oldName': None, 'goodsSoldOutAmount': 0, 'orderNum': None, 'id': 260}, 'rank': None, 'hasActivity': 0, 'standard': 1, 'standardLowPrice': 0.0, 'standardTopPrice': 0.0, 'iconUrl': 'http://res.test.saofu.cn/saofu/upload/image/2016/04/25/7a59f0ca-ccb6-41ec-a1ab-27a854237d2f.jpg', 'syncStatus': 0, 'transientPrice': 0.0, 'cwId': None, 'id': 26188, 'soldCount': 72, 'servicePhone': None, 'isSku': 0, 'expirTime': None, 'detail': None, 'cateName': None, 'branch': None, 'soldAllCount': 72, 'mallGoodsCatagoryId': None, 'useTime': None, 'mallGoodsStandards': None}, {'status': 1, 'business': None, 'description': '接口测试专用,勿动', 'price': 0, 'rules': None, 'elemeSyncStatus': None, 'skuQuantity': None, 'dishCount': None, 'lunchBoxCount': None, 'waimaiChannel': None, 'preRemind': None, 'goodsCopyId': None, 'cateId': 0, 'outerId': None, 'relBranchList': None, 'transientOriPrice': 0.0, 'name': '接口-测试商品2', 'delFlag': None, 'oriPrice': 0, 'shopId': None, 'relType': None, 'baiduSyncStatus': None, 'meituanSyncStatus': None, 'cannotUseTime': None, 'createTime': None, 'shop': {'serial': None, 'email': None, 'parent': None, 'name': None, 'printAdText': None, 'suffixShop': None, 'printAdUrl': None, 'logoUrl': None, 'phoneNumber': None, 'fullName': None, 'createTime': None, 'thirdAppId': None, 'id': 42}, 'standardAllSku': None, 'istop': 0, 'mallGoodsCate': {'shop': None, 'goodsAmount': 0, 'branchId': None, 'name': None, 'delFlag': None, 'oldName': None, 'goodsSoldOutAmount': 0, 'orderNum': None, 'id': 268}, 'rank': None, 'hasActivity': 0, 'standard': 2, 'standardLowPrice': 0.01, 'standardTopPrice': 0.0, 'iconUrl': 'http://res.test.saofu.cn/saofu/upload/image/2016/07/18/2c2ebeef-8d4f-483f-8ff4-ebcd5d209bb7.jpg', 'syncStatus': 0, 'transientPrice': 0.0, 'cwId': None, 'id': 26839, 'soldCount': 0, 'servicePhone': None, 'isSku': 0, 'expirTime': None, 'detail': None, 'cateName': None, 'branch': None, 'soldAllCount': 35, 'mallGoodsCatagoryId': None, 'useTime': None, 'mallGoodsStandards': None}, {'status': 1, 'business': None, 'description': '接口测试专用,烦请勿删,勿操作', 'price': 1, 'rules': None, 'elemeSyncStatus': None, 'skuQuantity': 999995, 'dishCount': None, 'lunchBoxCount': None, 'waimaiChannel': None, 'preRemind': None, 'goodsCopyId': None, 'cateId': 0, 'outerId': None, 'relBranchList': None, 'transientOriPrice': 0.0, 'name': '接口-测试商品1', 'delFlag': None, 'oriPrice': 0, 'shopId': None, 'relType': None, 'baiduSyncStatus': None, 'meituanSyncStatus': None, 'cannotUseTime': None, 'createTime': None, 'shop': {'serial': None, 'email': None, 'parent': None, 'name': None, 'printAdText': None, 'suffixShop': None, 'printAdUrl': None, 'logoUrl': None, 'phoneNumber': None, 'fullName': None, 'createTime': None, 'thirdAppId': None, 'id': 42}, 'standardAllSku': None, 'istop': 0, 'mallGoodsCate': {'shop': None, 'goodsAmount': 0, 'branchId': None, 'name': None, 'delFlag': None, 'oldName': None, 'goodsSoldOutAmount': 0, 'orderNum': None, 'id': 268}, 'rank': None, 'hasActivity': 0, 'standard': 1, 'standardLowPrice': 0.0, 'standardTopPrice': 0.0, 'iconUrl': 'http://res.test.saofu.cn/saofu/upload/image/2016/07/18/352c9a44-5fe7-4546-9786-563d8700a773.jpg', 'syncStatus': 0, 'transientPrice': 0.0, 'cwId': None, 'id': 26838, 'soldCount': 5, 'servicePhone': None, 'isSku': 0, 'expirTime': None, 'detail': None, 'cateName': None, 'branch': None, 'soldAllCount': 5, 'mallGoodsCatagoryId': None, 'useTime': None, 'mallGoodsStandards': None}, {'status': 1, 'business': None, 'description': '啊啊啊啊啊', 'price': 0, 'rules': None, 'elemeSyncStatus': None, 'skuQuantity': None, 'dishCount': None, 'lunchBoxCount': None, 'waimaiChannel': None, 'preRemind': None, 'goodsCopyId': None, 'cateId': 0, 'outerId': None, 'relBranchList': None, 'transientOriPrice': 0.0, 'name': '多规格冗余测试', 'delFlag': None, 'oriPrice': 0, 'shopId': None, 'relType': None, 'baiduSyncStatus': None, 'meituanSyncStatus': None, 'cannotUseTime': None, 'createTime': None, 'shop': {'serial': None, 'email': None, 'parent': None, 'name': None, 'printAdText': None, 'suffixShop': None, 'printAdUrl': None, 'logoUrl': None, 'phoneNumber': None, 'fullName': None, 'createTime': None, 'thirdAppId': None, 'id': 42}, 'standardAllSku': None, 'istop': 0, 'mallGoodsCate': {'shop': None, 'goodsAmount': 0, 'branchId': None, 'name': None, 'delFlag': None, 'oldName': None, 'goodsSoldOutAmount': 0, 'orderNum': None, 'id': 259}, 'rank': None, 'hasActivity': 0, 'standard': 2, 'standardLowPrice': 1.0, 'standardTopPrice': 0.0, 'iconUrl': 'http://res.test.saofu.cn/saofu/upload/file/2016/07/13/f99f5e55-d23c-4d73-980e-031b0e1643ea.png', 'syncStatus': 0, 'transientPrice': 0.0, 'cwId': None, 'id': 26836, 'soldCount': 0, 'servicePhone': None, 'isSku': 0, 'expirTime': None, 'detail': None, 'cateName': None, 'branch': None, 'soldAllCount': 9, 'mallGoodsCatagoryId': None, 'useTime': None, 'mallGoodsStandards': None}], 'pageInfo': {'pagination': True, 'pageStartRow': 0, 'pageSize': 10, 'params': None, 'hasPreviousPage': False, 'hasNextPage': False, 'totalPages': 1, 'currentPage': 1, 'pageEndRow': 5, 'totalRows': 5}}
2016-07-20 17:34:52,411 mydb.py[line: 77] INFO: query：SELECT COUNT(*) FROM mall_goods AS mg JOIN mall_goods_cate AS mgc ON mg.cate_id=mgc.id JOIN template_cate AS tc ON tc.cate_id=mgc.id AND tc.template_id=1 AND tc.status=1 WHERE mg.shop_id=%s AND mg.del_flag=%s AND mg.status=%s AND mg.business_id NOT IN (%s, %s)  data：(42, 0, 1, 1, 2)
2016-07-20 17:34:52,426 mydb.py[line: 77] INFO: query：SELECT sku_quantity FROM mall_goods WHERE id=%s  data：(26838,)
2016-07-20 17:34:52,430 mydb.py[line: 77] INFO: query：SELECT sku_quantity FROM mall_goods WHERE id=%s  data：(26839,)
2016-07-20 17:34:52,434 testcase.py[line: 98] INFO: 正在更新步骤执行结果
2016-07-20 17:34:52,434 mydb.py[line: 63] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="post", runtime="2016-07-20 17:34:52" WHERE executed_history_id = 20160720173449 AND testcase_id = 76 AND step_id = 78 AND project='pj_wecharno' AND testplan='plan1_of_wecharno'
2016-07-20 17:34:52,438 testcase.py[line: 101] INFO: 测试用例[id=76, name=test-n-显示默认页面]执行成功
2016-07-20 17:34:52,439 testplan.py[line: 64] INFO: 正在更新用例执行结果
2016-07-20 17:34:52,439 mydb.py[line: 63] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2016-07-20 17:34:52" WHERE executed_history_id = 20160720173449 AND testcase_id = 76 AND project='pj_wecharno' AND testplan='plan1_of_wecharno'
2016-07-20 17:34:52,576 testplan.py[line: 75] INFO: 正在更新testlink上测试计划[testplan_id=74, bulid_version=v1.0.0],对应用例[testcase_id=76]的执行结果
2016-07-20 17:34:52,942 testplan.py[line: 57] INFO: 记录测试用例到测试用例报表
2016-07-20 17:34:52,942 mydb.py[line: 50] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720173449', 80, 'test-n-点击商品', '微商城-模拟点击页面跳转', 'plan1_of_wecharno', 'pj_wecharno', 'Block', '')
2016-07-20 17:34:52,944 testplan.py[line: 60] INFO: 开始执行测试用例[id=80，name=test-n-点击商品]
2016-07-20 17:34:52,944 testcase.py[line: 48] INFO: 记录测试步骤到测试步骤报告表
2016-07-20 17:34:52,944 mydb.py[line: 50] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720173449', 80, 'test-n-点击商品', 'plan1_of_wecharno', 'pj_wecharno', 82, 1, '', 'http', 'm.test.saofu.cn', 80, '{"class":"Goods","function":"test_click_goods","method":"get","url":"/goods/item?","params":{"id":26838, "serial":"var"}}', '{"status":200}', 'Block', '', '')
2016-07-20 17:34:52,945 testcase.py[line: 60] INFO: 开始执行步骤操作[第1步]
2016-07-20 17:34:52,945 casestep.py[line: 64] INFO: 调用的方法为：Goods.test_click_goods
2016-07-20 17:34:52,946 wechatno_wemall.py[line: 89] INFO: 正在发起GET请求...
2016-07-20 17:34:52,946 httpprotocol.py[line: 50] INFO: 发起的请求为：http://m.test.saofu.cn:80/goods/item?serial=10549840601068216320&id=26838
2016-07-20 17:34:53,112 wechatno_wemall.py[line: 93] INFO: 正在解析返回结果:





<!DOCTYPE html>
<link rel="stylesheet" href="/css/bind/banner.css?v=3.4.0-f5bd5" />  
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport"
	content="width=device-width, initial-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no">
<meta http-equiv="Expires" CONTENT="0">
<meta http-equiv="Cache-Control" CONTENT="no-cache">
<meta http-equiv="Pragma" CONTENT="no-cache">
<title>微商城</title>
<link rel="stylesheet" href="/css/mall/pure.css?v=3.4.0-f5bd5">
<link rel="stylesheet" href="/css/mall/grids-core.css?v=3.4.0-f5bd5">
<link rel="stylesheet" href="/css/mall/zepto.alert.css?v=3.4.0-f5bd5">
<script type="text/javascript" src="/js/TouchSlide.1.1.js?v=3.4.0-f5bd5"></script>
</head>
<style type="text/css">
* {
	margin: 0;
	padding: 0;
}

html {
	color: #626262;
}

a {
	text-decoration: none;
}

ol,ul {
	list-style: outside none none;
}

.left {
	float: left;
}

.right {
	float: right;
}

.in-block {
	display: inline-block;
}

.orange {
	color: #c58d04;
}

.grey {
	color: #adadad;
}

.bg-color {
	background: #ececec;
}

#wrapper {
	width: 100%;
	margin: 0 auto;
}

.header {
	width: 100%;
	overflow: hidden;
	border-bottom: 1px solid #eaeaea;
}

.top {
	width: 90%;
	margin: 0 auto;
	padding-bottom: 1em;
}

.top p {
	margin: 0.5em 0;
	font-size: 0.8em;
}
.top>p:first-child{
	font-size:1.1em;
}

.fonts {
	font-size: 1em !important;
	margin: 0.8em 0 !important;
}


.jian {
	display: inline-block;
	width: 1.5em;
	height: 1.5em;
	line-height: 1.5em;
	border: 1px solid #d1d1d1;
	border-right: 0 none;
	border-top-left-radius: 4px;
	border-bottom-left-radius: 4px;
	text-align: center;
	margin-left:0.4em;
}

.val {
	background: #fff;
	display: inline-block;
	width: 3.5em;
	height: 1.5em;
	line-height: 1.5em;
	border: 1px solid #d1d1d1;
	text-align: center;
}

.jia {
	display: inline-block;
	width: 1.5em;
	height: 1.5em;
	line-height: 1.5em;
	border: 1px solid #d1d1d1;
	border-left: 0 none;
	border-top-right-radius: 4px;
	border-bottom-right-radius: 4px;
	text-align: center;
}

.button {
	width: 47%;
	height: 3em;
	color: #fff;
	border: none;
	border-radius: 4px;
}

.addbtn {
	background: #edb23e;
	margin-right: 3%;
}

.buybtn {
	background: #f96364;
}

.bottom {
	border-top: 0.5em solid #eeeeee;
	padding-bottom: 3em;
    position: relative;
    width:100%;
}

.bottom .bottom-details{
	width:100%;	
	word-break:break-all;
	overflow-x: hidden; 
}

.bottom-details h1,.bottom-details h2,.bottom-details h3,.bottom-details h4,.bottom-details h5{
	word-break:break-all;
}

.bottom > p:first-child {
	text-indent: 1em;
}

.bottom > p img{
    width: 1em;
    position: absolute;
    top:0.8em;
    right: 1em;
}

.bottom-details p {
	text-indent: 1em;
	word-break:break-all;
}

.inline-padding {
	display: inline-block;
	padding-left: 0.8em;
}

.inline-paddings {
	display: inline-block;
	padding-left: 1.6em;
}

.footer {
	width: 100%;
	height: 3em;
	position: fixed;
	bottom: 0;
	background: #fff;
	color: #b6b6b6;
	text-align: center;
	border-top: 1px solid #eaeaea;
}

.footer a {
	color: #626262;
	display: inline-block;
	height:1em;
	line-height:1em;
	padding-top: 1em;
	padding-bottom: 1em;
}
.footer .inline-paddings-right{
    padding-top: 1em;
    float: right;
}
.footer img {
	display: inline-block;
	width: 1em;
}

.top-bg{
    position: fixed;
    bottom: 3.5em;
    right: 1em;
    width: 2em;
    display: none;
    filter:alpha(opacity=40);       /* IE */
    -moz-opacity:0.4;              /* Moz + FF */
    opacity: 0.4;     
}
.spec{
    display: inline-block;
    margin: 0 1em 0.8em 0;
    font-size:0.7em;
    padding:0.3em 1em;
    border:1px solid #ccc;
    border-radius:3px;
    cursor:pointer;
}
.fonts a.active{
    border: 2px solid #d2b57b;
}
.guige{
    float: left;
    width: 40px;
}
.guige-detail{
    margin-left: 40px;
}
.guige-detail a[disabled]{
    background: none repeat scroll 0 0 #fff;
    color: #e3e3e3;
    cursor: default;
}
/* 本例子css -------------------------------------- */
.slideBox {
	position: relative;
	width: 100%;
	height: 240px;
	overflow: hidden;
}

.slideBox .hd {
	position: absolute;
	width: 100%;
	height: 27px;
	bottom: 0;
	left: 0;
	z-index: 1;
}

.slideBox .hd img {
	width: 11px;
}

.slideBox .bd {
	position: relative;
	z-index: 0;
}

.slideBox .bd li {
	position: relative;
}

.slideBox .bd li img {
	width: 100%;
	height: 240px;
	display: block;
}

.slideBox .bd li a {
	-webkit-tap-highlight-color: rgba(0, 0, 0, 0); /* 取消链接高亮 */
}

.slideBox .hd a {
	display: block;
	width: auto;
	position: absolute;
	bottom: 0.5em;
	right: 0.5em;
	padding: 0.1em 0.7em;
	text-align: center;
	color: #fff;
	background-color: rgba(0, 0, 0, 0.6);
	border-radius: 4px;
}
.slideBox>.a-img{
    position: fixed;
    top:1em;
    right: 0.5em;
    display: block;
    width:2em;
    height: 2em;
    border-radius: 2em;
    background-color: rgba(0, 0, 0, 0.6); 
    z-index: 2;
}
.slideBox>.a-img>img{
    width: 1em;            
    position: absolute;
    top:50%;
    left: 50%;
    margin-top:-0.5em;
    margin-left: -0.5em;
}
.carts{
	position: relative;
}
.cartNum{                      
    display: inline-block;
    width: 1.2em;
    height: 1.2em;
    line-height:1.2em;
    border-radius: 1.5em;
    background:#ff0000;  
    position: absolute;
    right: -0.7em;
    top: 0.3em;
    color: #fff;
}
#soldCount{
	float: right; 
	font-size: 0.8em; 
	padding-top: 0.3em;
	color:#adadad;
}
.freight{
	font-size:0.8em;
	color:#adadad;
}
.standard_sku{
	font-size:0.9em;
	color:#adadad;
}
@media all and (max-width:320px){
	.slideBox{
		height:240px;
	}
	.slideBox .bd li img {
		height:240px;
	}
}
@media all and (min-width:321px) and (max-width:360px){
	.slideBox{
		height:270px;
	}
	.slideBox .bd li img {
		height:270px;
	}
}
@media all and (min-width:361px) and (max-width:375px){
	.slideBox{
		height:281px;
	}
	.slideBox .bd li img {
		height:281px;
	}
}
@media all and (min-width:376px) and (max-width:384px){
	.slideBox{
		height:288px;
	}
	.slideBox .bd li img {
		height:288px;
	}
}
@media all and (min-width:385px) and (max-width:414px){
	.slideBox{
		height:311px;
	}
	.slideBox .bd li img {
		height:311px;
	}
}
@media all and (min-width:415px){
	.slideBox{
		height:360px;
	}
	.slideBox .bd li img {
		height:360px;
	}
}
</style>
<body>
	<div id="wrapper">
		<div class="header">
			<div id="slideBox" class="slideBox">
				<a class="a-img" href="/cart?serial=10549840601068216320">
                  <img src="/images/mall/detail_cart_icon.png?v=3.4.0-f5bd5" class="pure-img">
              	</a>
				<div class="bd">
					<ul>
						
							
								<li><img src="http://res.test.saofu.cn/saofu/upload/image/2016/07/18/352c9a44-5fe7-4546-9786-563d8700a773.jpg" class="pure-img" /></li>
							
						
					</ul>
				</div>
				<div class="hd">
					<a class="pageState"></a>
				</div>
			</div>
		</div>		
		<div class="content">
			<div class="top">
				<p>
					接口-测试商品1
				</p>
				<p class="grey">
					接口测试专用,烦请勿删,勿操作
				</p>				
				<p class="fonts">
					单价:
					<span class="orange">
					
					
						
							￥0.01
						
						
					
					
					</span>
					<span id = "soldCount">销量:5件</span>
				</p>
				
					<p class="freight">运费:<span>4.00元</span></p>
				
				
				<p class="fonts shuliang">
					数量:<span class="jian">-</span><span class="val">1</span><span class="jia">+</span>
					
						
						
							<span class="standard_sku">(库存：999995件)</span>
						
						
						
					
				</p> 
				<div>
					<input type="button" class="button addbtn" value="加入购物车" />
					<input type="button" class="button buybtn" value="立即购买" />
				</div>
			</div>
			<div class="bottom">
				<p>图文详情<img src="/images/mall/down.png?v=3.4.0-f5bd5" class="pure-img"></p>
				<div class="bottom-details">
					<p>											</p><p><br/></p><p><br/></p><p><br/></p><p>接口测试专用商品,商品详情简介<br/></p>
				</div>
			</div>
		</div>		
	</div>
	<img src="/images/mall/top_bg.png?v=3.4.0-f5bd5" class="pure-img top-bg">
	<script type="text/javascript" src="/js/zepto.min.js?v=3.4.0-f5bd5"></script>
    <script type="text/javascript" src="/js/touch.js?v=3.4.0-f5bd5"></script>
    <script type="text/javascript" src="/js/mall/zepto.alert.js?v=3.4.0-f5bd5"></script>
	<script type="text/javascript" src="/js/mall/mall.js?v=3.4.0-f5bd5"></script>
	<script type="text/javascript">
			
	var priceLimita = $(".orange").text();
	var soldCounta = $("#soldCount").text();
	var skua = $(".standard_sku").text();
	
            // 滚动窗口来判断按钮显示或隐藏
            $(window).scroll(function() {
                if ($(this).scrollTop() > 120) {
                    $('.top-bg').show(100);
                } else {
                    $('.top-bg').hide(100);
                }
            });
            
            function choose(obj,price,sku,standardSoldCount){
            	if(!$(obj).attr('disabled')){
            	if($(obj).hasClass('active')){
            		$(".orange").text(priceLimita);
                	$("#soldCount").text(soldCounta);
                	$(".standard_sku").text(skua);
                	 $(obj).removeClass('active');
            	}else{
	            	$(".standard_sku").text("(库存:"+sku+"件)");
	            	$(".orange").text("￥"+price);
	            	$("#soldCount").text("销量:"+standardSoldCount+"件");
	            	$(".spec").removeClass('active');
                    $(obj).addClass('active');
            	}
            	}
            }
            
           
            
            $(function(){
            	/* $(".spec").tap(function(){
                    if(!$(this).attr('disabled')){
                        if($(this).hasClass('active')){
                            $(this).removeClass('active');
                            
                        }else{
                        	
                        }
                    }                    
                }); */
                
            	TouchSlide({
    				slideCell : "#slideBox",
    				mainCell : ".bd ul",
    				effect : "leftLoop",
    				pageStateCell : ".pageState"
    			});            	            	
				
            	$(".bottom-details img").width($(".top").width());
            });
            
            // jQuery实现动画滚动
            $('.top-bg').click(function(event) {
                event.preventDefault();
                $('html, body').scrollTop(0);
            });
			
			$(".bottom > p img").click(function(){
                $(this).parent().next().toggle();
                if($(this).parent().next().css("display")=="block"){
                    $(this).attr("src","/images/mall/down.png");
                }else{
                    $(this).attr("src","/images/mall/up.png");
                }
            });
            
            $(".jia").click(function(){
            	var val = $(this).siblings(".val");
            	var count = parseInt(val.text());
                if (isNaN(count)) {
                	count = 1;
                } else {
                	count += 1;
                }
                val.text(count);
            });
            $(".jian").click(function(){
            	var val = $(this).siblings(".val");
            	var count = parseInt(val.text());
                if (isNaN(count) || count <= 1) {
                	count = 1;
                } else {
                	count -= 1;
                }
                val.text(count);
            });
            
            $(".addbtn").click(function(event){
            	if($(this).prop("disabled") == true)
            		return false;
            	var params = {
   					mallGoodsId : "26838",
   					standardId : standardId,
   					amount : $(".val").text(),
   					serial : "10549840601068216320",
   					openId : "ous64uFCCLMyXYDJ-MkNilyCI5C"
   				};
            	
            	var standard = 1;
            	if(standard == 2 && $(".active").length < 1){
    				doAlert("no", "请选择商品的规格");
    				return;
    			}
            	if(standard == 2){
            		var standardId = $(".active").attr("data");
    				params.standardId = standardId;
            	}
            	$.post("/addtocart", params, function(result){
            		if (null == result || !result.success) {
            			toast(result.message);
    					return;
    				}
    				//更新购物车数量
    				/* var cartNum = $(".cartNum").text();
    				if (null == cartNum || "" == cartNum || typeof (cartNum) == undefined) {
    					$(".carts").append("<span class='cartNum'>1</span>");
    				} else {
    					if (null != result.attach && result.attach > 0) {
    						$(".cartNum").text(result.attach);
    					}
    				} */
    				toast("已经成功加入购物车");
            	});
            });
		$(".buybtn").click(function(event) {
			if($(this).prop("disabled") == true)
        		return false;
			$(this).attr("disabled","disabled");
			var standard = 1;
        	if(standard == 2 && $(".active").length < 1){
				doAlert("no", "请选择商品的规格");
				$(this).removeAttr("disabled");
				return;
        	}
        	if(standard == 2){
        		var standardId = $(".active").attr("data");
        		window.location.href = "/mall/tobuy/1?mallGoodsId=26838&amount=" + $(".val").text() + "&type=1&serial=10549840601068216320&standardId="+standardId;
        		return;
        	}
			window.location.href = "/mall/tobuy/1?mallGoodsId=26838&amount=" + $(".val").text() + "&type=1&serial=10549840601068216320";
		});
	</script>
</body>
</html>
<!--加入判断用户是否关注公众号功能 add by lipengfei at 2015-11-9  -->
  	
	<script type="text/javascript" src="/js/bind/banner.js?v=3.4.0-f5bd5"></script>
	<script type="text/javascript">
		$(function() {
			//var SHOP_SERIAL = getCookie("SHOP_SERIAL");
			var SHOP_SERIAL = "10549840601068216320";
			if(null != SHOP_SERIAL && SHOP_SERIAL != ""){
				$.ajax({
					url : '/saofu_mobile/checkUserBindStatus',
					data : {
						"serial" : SHOP_SERIAL
					},
					type : 'post',
					cache : false,
					dataType : 'json',
					success : function(data) {
						if (data != null) {
							var guildFocusStr = data.guildFocusStr;
							if(guildFocusStr != null && guildFocusStr == "1"){
								var hasBindedShop = data.hasBindedShop;
								if(hasBindedShop == "0"){
									var qrName = data.QRPublicName;
									var qrUrl = data.QRCodeURL;
									if(qrName != "" && qrUrl != ""){
										var params = qrName+"**"+qrUrl;
										followModule(params);
									}
								}
							}
						} 
					},
					error : function() {
					}
				});
			}
		});
				
	</script>

2016-07-20 17:34:53,114 wechatno_wemall.py[line: 96] INFO: 正在解析返回结果:200
2016-07-20 17:34:53,115 testcase.py[line: 98] INFO: 正在更新步骤执行结果
2016-07-20 17:34:53,115 mydb.py[line: 63] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2016-07-20 17:34:52" WHERE executed_history_id = 20160720173449 AND testcase_id = 80 AND step_id = 82 AND project='pj_wecharno' AND testplan='plan1_of_wecharno'
2016-07-20 17:34:53,122 testcase.py[line: 101] INFO: 测试用例[id=80, name=test-n-点击商品]执行成功
2016-07-20 17:34:53,122 testplan.py[line: 64] INFO: 正在更新用例执行结果
2016-07-20 17:34:53,122 mydb.py[line: 63] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2016-07-20 17:34:52" WHERE executed_history_id = 20160720173449 AND testcase_id = 80 AND project='pj_wecharno' AND testplan='plan1_of_wecharno'
2016-07-20 17:34:53,276 testplan.py[line: 75] INFO: 正在更新testlink上测试计划[testplan_id=74, bulid_version=v1.0.0],对应用例[testcase_id=80]的执行结果
2016-07-20 17:34:53,663 testplan.py[line: 57] INFO: 记录测试用例到测试用例报表
2016-07-20 17:34:53,663 mydb.py[line: 50] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720173449', 102, 'test-n-模拟点击立即购买按钮', '微商城-模拟点击页面跳转', 'plan1_of_wecharno', 'pj_wecharno', 'Block', '')
2016-07-20 17:34:53,667 testplan.py[line: 60] INFO: 开始执行测试用例[id=102，name=test-n-模拟点击立即购买按钮]
2016-07-20 17:34:53,668 testcase.py[line: 48] INFO: 记录测试步骤到测试步骤报告表
2016-07-20 17:34:53,668 mydb.py[line: 50] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720173449', 102, 'test-n-模拟点击立即购买按钮', 'plan1_of_wecharno', 'pj_wecharno', 104, 1, '', 'http', 'm.test.saofu.cn', 80, '{"class":"ToBuyGoods","function":"test_to_buy_goods","method":"get","url":"/mall/tobuy/1?","params":{"mallGoodsId":"26838","amount":1,"type":1,"serial":"var"}}', '{"status":200}', 'Block', '', '')
2016-07-20 17:34:53,669 testcase.py[line: 60] INFO: 开始执行步骤操作[第1步]
2016-07-20 17:34:53,669 casestep.py[line: 64] INFO: 调用的方法为：ToBuyGoods.test_to_buy_goods
2016-07-20 17:34:53,670 wechatno_wemall.py[line: 210] INFO: 正在发起GET请求...
2016-07-20 17:34:53,670 httpprotocol.py[line: 50] INFO: 发起的请求为：http://m.test.saofu.cn:80/mall/tobuy/1?amount=1&serial=10549840601068216320&type=1&mallGoodsId=26838
2016-07-20 17:34:53,680 wechatno_wemall.py[line: 216] INFO: 正在解析返回结果:





<!DOCTYPE html>
<link rel="stylesheet" href="/css/bind/banner.css?v=3.4.0-f5bd5" />  
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <link rel="stylesheet" href="/css/skin-nr-min.css?v=3.4.0-f5bd5">
        <link rel="stylesheet" href="/css/cpn.css?v=3.4.0-f5bd5">
        <link rel="stylesheet" type="text/css" href="/css/zepto.alert.css?v=3.4.0-f5bd5">
        <title>哎哟~出错啦~</title>
    </head>
    <body>
        <script type="text/javascript" src="/js/zepto.min.js?v=3.4.0-f5bd5" ></script>
        <script type="text/javascript" src="/js/zepto.alert.min.js?v=3.4.0-f5bd5"></script>
        <script type="text/javascript">
        Zepto(function($){
			function myAlert(content) {
		    	$.dialog({
		    		content : content,
		    		title : "alert"
		    	});
		    }
			
				
				
					myAlert("噢...出错了!请等待管理员处理,稍后重试");					
				
			
        });
        </script>
    </body>
</html>

2016-07-20 17:34:53,681 htmlparser.py[line: 28] INFO: Data 






2016-07-20 17:34:53,682 testcase.py[line: 69] ERROR: 步骤[1]执行出错,停止执行用例[id=102, name=test-n-模拟点击立即购买按钮]
2016-07-20 17:34:53,682 testcase.py[line: 75] INFO: 正在更新步骤执行结果
2016-07-20 17:34:53,682 mydb.py[line: 63] INFO: query：UPDATE case_step_report_tb SET runresult="Error",reason="Traceback (most recent call last):  File E:\Projects\interface_project\interface\wechatno_wemall.py, line 220, in test_to_buy_goods    parser.feed(response)  File D:\Program Files\python33\lib\html\parser.py, line 145, in feed    self.goahead(0)  File D:\Program Files\python33\lib\html\parser.py, line 200, in goahead    k = self.parse_html_declaration(i)  File D:\Program Files\python33\lib\html\parser.py, line 290, in parse_html_declaration    self.handle_decl(rawdata[i+2:gtpos])  File E:\Projects\interface_project\htmlparser.py, line 47, in handle_decl    logger.info(Decl： % data)TypeError: not all arguments converted during string formatting", protocol_method="get", runtime="2016-07-20 17:34:53" WHERE executed_history_id = 20160720173449 AND testcase_id = 102 AND step_id = 104 AND project='pj_wecharno' AND testplan='plan1_of_wecharno'
2016-07-20 17:34:53,686 testplan.py[line: 64] INFO: 正在更新用例执行结果
2016-07-20 17:34:53,686 mydb.py[line: 63] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2016-07-20 17:34:53" WHERE executed_history_id = 20160720173449 AND testcase_id = 102 AND project='pj_wecharno' AND testplan='plan1_of_wecharno'
2016-07-20 17:34:53,857 testplan.py[line: 75] INFO: 正在更新testlink上测试计划[testplan_id=74, bulid_version=v1.0.0],对应用例[testcase_id=102]的执行结果
2016-07-20 17:34:54,238 testplan.py[line: 57] INFO: 记录测试用例到测试用例报表
2016-07-20 17:34:54,238 mydb.py[line: 50] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720173449', 98, 'test-n-查看购物车商品列表', '微商城-查看购物车商品列表接口', 'plan1_of_wecharno', 'pj_wecharno', 'Block', '')
2016-07-20 17:34:54,240 testplan.py[line: 60] INFO: 开始执行测试用例[id=98，name=test-n-查看购物车商品列表]
2016-07-20 17:34:54,240 testcase.py[line: 48] INFO: 记录测试步骤到测试步骤报告表
2016-07-20 17:34:54,240 mydb.py[line: 50] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720173449', 98, 'test-n-查看购物车商品列表', 'plan1_of_wecharno', 'pj_wecharno', 100, 1, '', 'http', 'm.test.saofu.cn', 80, '{"class":"AddToCart","function":"test_add_to_cart","method":"post","url":"/addtocart","params":{"mallGoodsId":26838,"standardId":"undefined","amount":2,"serial":"var","openId":"var"}}', '{"success":"True", "amount":2, "mall_goods_id":26838,"shop_id":"var", "closed":1}', 'Block', '', '')
2016-07-20 17:34:54,242 testcase.py[line: 60] INFO: 开始执行步骤操作[第1步]
2016-07-20 17:34:54,242 casestep.py[line: 64] INFO: 调用的方法为：AddToCart.test_add_to_cart
2016-07-20 17:34:54,242 mydb.py[line: 77] INFO: query：SELECT id FROM customer WHERE channel_serial=%s  data：('ous64uFCCLMyXYDJ-MkNilyCI5CY',)
2016-07-20 17:34:54,245 mydb.py[line: 63] INFO: query：UPDATE mall_shopping_cart SET amount = 0 WHERE customer_id = 6840 and closed=1
2016-07-20 17:34:54,248 mydb.py[line: 77] INFO: query：SELECT id FROM customer WHERE channel_serial=%s  data：('ous64uFCCLMyXYDJ-MkNilyCI5CY',)
2016-07-20 17:34:54,251 mydb.py[line: 77] INFO: query：SELECT id FROM shop WHERE serial=%s  data：('10549840601068216320',)
2016-07-20 17:34:54,253 wechatno_wemall.py[line: 133] INFO: 正在发起POST请求...
2016-07-20 17:34:54,253 httpprotocol.py[line: 67] INFO: 发起的请求为：http://m.test.saofu.cn:80/addtocart
2016-07-20 17:34:54,376 wechatno_wemall.py[line: 140] INFO: 正在解析返回结果:{'message': None, 'attach': None, 'success': True}
2016-07-20 17:34:54,376 mydb.py[line: 77] INFO: query：SELECT amount, mall_goods_id, shop_id, closed, id FROM mall_shopping_cart WHERE customer_id = %s and closed=%s ORDER BY id DESC LIMIT 1  data：(6840, 1)
2016-07-20 17:34:54,380 testcase.py[line: 98] INFO: 正在更新步骤执行结果
2016-07-20 17:34:54,380 mydb.py[line: 63] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="post", runtime="2016-07-20 17:34:54" WHERE executed_history_id = 20160720173449 AND testcase_id = 98 AND step_id = 100 AND project='pj_wecharno' AND testplan='plan1_of_wecharno'
2016-07-20 17:34:54,389 testcase.py[line: 48] INFO: 记录测试步骤到测试步骤报告表
2016-07-20 17:34:54,389 mydb.py[line: 50] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720173449', 98, 'test-n-查看购物车商品列表', 'plan1_of_wecharno', 'pj_wecharno', 101, 2, '', 'http', 'm.test.saofu.cn', 80, '{"class":"CartList","function":"test_view_cart_list","method":"get","url":"/cartlist?","params":{"serial":"var","openId":"var"}} ', '{"amount":2,"goodsID":26838}', 'Block', '', '')
2016-07-20 17:34:54,391 testcase.py[line: 60] INFO: 开始执行步骤操作[第2步]
2016-07-20 17:34:54,392 casestep.py[line: 64] INFO: 调用的方法为：CartList.test_view_cart_list
2016-07-20 17:34:54,392 wechatno_wemall.py[line: 190] INFO: 正在发起GET请求...
2016-07-20 17:34:54,392 httpprotocol.py[line: 50] INFO: 发起的请求为：http://m.test.saofu.cn:80/cartlist?serial=10549840601068216320&openId=ous64uFCCLMyXYDJ-MkNilyCI5CY
2016-07-20 17:34:54,408 wechatno_wemall.py[line: 196] INFO: 正在解析返回结果:[{'amount': 2, 'cateringType': None, 'customer': None, 'mallGoods': {'status': 1, 'business': None, 'description': '接口测试专用,烦请勿删,勿操作', 'price': 1, 'rules': None, 'elemeSyncStatus': None, 'skuQuantity': None, 'dishCount': None, 'lunchBoxCount': None, 'waimaiChannel': None, 'preRemind': None, 'goodsCopyId': None, 'cateId': 0, 'outerId': None, 'relBranchList': None, 'transientOriPrice': 0.0, 'name': '接口-测试商品1', 'delFlag': None, 'oriPrice': 0, 'shopId': None, 'relType': None, 'baiduSyncStatus': None, 'meituanSyncStatus': None, 'cannotUseTime': None, 'createTime': None, 'shop': None, 'standardAllSku': None, 'istop': 0, 'mallGoodsCate': None, 'rank': None, 'hasActivity': 0, 'standard': 1, 'standardLowPrice': 0.0, 'standardTopPrice': 0.0, 'iconUrl': 'http://res.test.saofu.cn/saofu/upload/image/2016/07/18/352c9a44-5fe7-4546-9786-563d8700a773.jpg,', 'syncStatus': 0, 'transientPrice': 0.0, 'cwId': None, 'id': 26838, 'soldCount': 0, 'servicePhone': None, 'isSku': 0, 'expirTime': None, 'detail': None, 'cateName': None, 'branch': None, 'soldAllCount': 0, 'mallGoodsCatagoryId': None, 'useTime': None, 'mallGoodsStandards': None}, 'closed': None, 'shopBranchId': None, 'mallGoodsStandard': None, 'shop': None, 'id': 15774}]
2016-07-20 17:34:54,409 testcase.py[line: 98] INFO: 正在更新步骤执行结果
2016-07-20 17:34:54,409 mydb.py[line: 63] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2016-07-20 17:34:54" WHERE executed_history_id = 20160720173449 AND testcase_id = 98 AND step_id = 101 AND project='pj_wecharno' AND testplan='plan1_of_wecharno'
2016-07-20 17:34:54,414 testcase.py[line: 101] INFO: 测试用例[id=98, name=test-n-查看购物车商品列表]执行成功
2016-07-20 17:34:54,415 testplan.py[line: 64] INFO: 正在更新用例执行结果
2016-07-20 17:34:54,415 mydb.py[line: 63] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2016-07-20 17:34:54" WHERE executed_history_id = 20160720173449 AND testcase_id = 98 AND project='pj_wecharno' AND testplan='plan1_of_wecharno'
2016-07-20 17:34:54,553 testplan.py[line: 75] INFO: 正在更新testlink上测试计划[testplan_id=74, bulid_version=v1.0.0],对应用例[testcase_id=98]的执行结果
2016-07-20 17:34:54,677 testplan.py[line: 85] INFO: 测试计划[project=pj_wecharno ,testplan=plan1_of_wecharno]已执行完
2016-07-20 17:34:54,677 main.py[line: 229] INFO: 接口测试已执行完成，正在关闭数据库连接
2016-07-20 17:34:54,678 htmlreporter.py[line: 37] INFO: 正在查询测试用例总数
2016-07-20 17:34:54,678 mydb.py[line: 77] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20160720173449',)
2016-07-20 17:34:54,680 htmlreporter.py[line: 43] INFO: 正在查询执行通过的用例数
2016-07-20 17:34:54,680 mydb.py[line: 77] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20160720173449')
2016-07-20 17:34:54,681 htmlreporter.py[line: 49] INFO: 正在查询执行失败的用例数
2016-07-20 17:34:54,682 mydb.py[line: 77] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20160720173449')
2016-07-20 17:34:54,683 htmlreporter.py[line: 55] INFO: 正在查询执行出错的用例数
2016-07-20 17:34:54,683 mydb.py[line: 77] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20160720173449')
2016-07-20 17:34:54,684 htmlreporter.py[line: 61] INFO: 正在查询未执行的用例数
2016-07-20 17:34:54,684 mydb.py[line: 77] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20160720173449')
2016-07-20 17:34:54,685 htmlreporter.py[line: 72] INFO: 正在查询已运的测试计划
2016-07-20 17:34:54,686 mydb.py[line: 93] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20160720173449',)
2016-07-20 17:34:54,687 htmlreporter.py[line: 98] INFO: 正在查询测试计划[project：pj_wecharno, testplan：plan1_of_wecharno]的测试用例执行结果
2016-07-20 17:34:54,688 mydb.py[line: 93] INFO: query：SELECT id, executed_history_id, testcase_id, testcase_name,testsuit, testplan, project, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s ORDER BY id ASC  data：('pj_wecharno', 'plan1_of_wecharno', '20160720173449')
2016-07-20 17:34:54,689 htmlreporter.py[line: 105] INFO: 正在记录测试测试计划[project：pj_wecharno, testplan：plan1_of_wecharno]的测试用例运行结果到测试报告
2016-07-20 17:34:54,690 htmlreporter.py[line: 115] INFO: 正在查询已运的测试计划
2016-07-20 17:34:54,691 mydb.py[line: 93] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20160720173449',)
2016-07-20 17:34:54,692 htmlreporter.py[line: 127] INFO: 正在查询测试计划[project：pj_wecharno, testplan：plan1_of_wecharno]已运行的测试用例
2016-07-20 17:34:54,692 mydb.py[line: 93] INFO: query：SELECT testcase_id, testcase_name, project, testplan FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id ORDER BY id ASC  data：('pj_wecharno', 'plan1_of_wecharno', '20160720173449')
2016-07-20 17:34:54,694 htmlreporter.py[line: 158] INFO: 正在查询测试用例[id=88]步骤运行结果
2016-07-20 17:34:54,695 mydb.py[line: 93] INFO: query：SELECT step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, cstb.runresult, reason, cstb.runtime FROM case_step_report_tb AS cstb JOIN testcase_report_tb AS tstb ON cstb.testcase_id =  tstb.testcase_id AND cstb.project=tstb.project AND cstb.testplan=tstb.testplan AND cstb.executed_history_id = tstb.executed_history_id WHERE tstb.project= %s AND tstb.testplan=%s AND cstb.testcase_id=%s AND cstb.executed_history_id = %s  data：('pj_wecharno', 'plan1_of_wecharno', 88, '20160720173449')
2016-07-20 17:34:54,697 htmlreporter.py[line: 158] INFO: 正在查询测试用例[id=93]步骤运行结果
2016-07-20 17:34:54,697 mydb.py[line: 93] INFO: query：SELECT step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, cstb.runresult, reason, cstb.runtime FROM case_step_report_tb AS cstb JOIN testcase_report_tb AS tstb ON cstb.testcase_id =  tstb.testcase_id AND cstb.project=tstb.project AND cstb.testplan=tstb.testplan AND cstb.executed_history_id = tstb.executed_history_id WHERE tstb.project= %s AND tstb.testplan=%s AND cstb.testcase_id=%s AND cstb.executed_history_id = %s  data：('pj_wecharno', 'plan1_of_wecharno', 93, '20160720173449')
2016-07-20 17:34:54,699 htmlreporter.py[line: 158] INFO: 正在查询测试用例[id=76]步骤运行结果
2016-07-20 17:34:54,700 mydb.py[line: 93] INFO: query：SELECT step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, cstb.runresult, reason, cstb.runtime FROM case_step_report_tb AS cstb JOIN testcase_report_tb AS tstb ON cstb.testcase_id =  tstb.testcase_id AND cstb.project=tstb.project AND cstb.testplan=tstb.testplan AND cstb.executed_history_id = tstb.executed_history_id WHERE tstb.project= %s AND tstb.testplan=%s AND cstb.testcase_id=%s AND cstb.executed_history_id = %s  data：('pj_wecharno', 'plan1_of_wecharno', 76, '20160720173449')
2016-07-20 17:34:54,702 htmlreporter.py[line: 158] INFO: 正在查询测试用例[id=80]步骤运行结果
2016-07-20 17:34:54,702 mydb.py[line: 93] INFO: query：SELECT step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, cstb.runresult, reason, cstb.runtime FROM case_step_report_tb AS cstb JOIN testcase_report_tb AS tstb ON cstb.testcase_id =  tstb.testcase_id AND cstb.project=tstb.project AND cstb.testplan=tstb.testplan AND cstb.executed_history_id = tstb.executed_history_id WHERE tstb.project= %s AND tstb.testplan=%s AND cstb.testcase_id=%s AND cstb.executed_history_id = %s  data：('pj_wecharno', 'plan1_of_wecharno', 80, '20160720173449')
2016-07-20 17:34:54,704 htmlreporter.py[line: 158] INFO: 正在查询测试用例[id=102]步骤运行结果
2016-07-20 17:34:54,704 mydb.py[line: 93] INFO: query：SELECT step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, cstb.runresult, reason, cstb.runtime FROM case_step_report_tb AS cstb JOIN testcase_report_tb AS tstb ON cstb.testcase_id =  tstb.testcase_id AND cstb.project=tstb.project AND cstb.testplan=tstb.testplan AND cstb.executed_history_id = tstb.executed_history_id WHERE tstb.project= %s AND tstb.testplan=%s AND cstb.testcase_id=%s AND cstb.executed_history_id = %s  data：('pj_wecharno', 'plan1_of_wecharno', 102, '20160720173449')
2016-07-20 17:34:54,706 htmlreporter.py[line: 158] INFO: 正在查询测试用例[id=98]步骤运行结果
2016-07-20 17:34:54,706 mydb.py[line: 93] INFO: query：SELECT step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, cstb.runresult, reason, cstb.runtime FROM case_step_report_tb AS cstb JOIN testcase_report_tb AS tstb ON cstb.testcase_id =  tstb.testcase_id AND cstb.project=tstb.project AND cstb.testplan=tstb.testplan AND cstb.executed_history_id = tstb.executed_history_id WHERE tstb.project= %s AND tstb.testplan=%s AND cstb.testcase_id=%s AND cstb.executed_history_id = %s  data：('pj_wecharno', 'plan1_of_wecharno', 98, '20160720173449')
2016-07-20 17:34:54,709 htmlreporter.py[line: 177] INFO: 正在设置测试报告结果文件名
2016-07-20 17:34:54,709 htmlreporter.py[line: 187] INFO: 测试报告文件名所在路径为：E:\\Projects\\report\\test_report20160720173449.html
2016-07-20 17:34:54,709 htmlreporter.py[line: 180] INFO: 正在生成测试报告
2016-07-20 17:34:54,711 main.py[line: 252] INFO: 生成测试报告成功
2016-07-20 17:34:54,921 main.py[line: 259] INFO: E:\\Projects\\report\\test_report20160720173449.html
2016-07-20 17:34:54,922 main.py[line: 262] INFO: 正在发送测试报告邮件...
2016-07-20 17:34:54,923 main.py[line: 266] INFO: 发送邮件成功
2016-07-20 17:37:42,964 globalpy.py[line: 14] INFO: 正在初始化数据库[名称：TESTDB]对象
2016-07-20 17:37:42,974 globalpy.py[line: 17] INFO: 正在初始化数据库[名称：SAOFUDB]对象
2016-07-20 17:37:42,979 globalpy.py[line: 20] INFO: 正在获取testlink
2016-07-20 17:37:43,039 main.py[line: 60] INFO: 正在创建测试用例报告报表
2016-07-20 17:37:43,039 mydb.py[line: 37] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime)
2016-07-20 17:37:43,041 main.py[line: 63] INFO: 正在创建测试步骤报告报表
2016-07-20 17:37:43,041 mydb.py[line: 37] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2016-07-20 17:37:43,042 main.py[line: 66] INFO: 正在读取运行模式配置
2016-07-20 17:37:43,044 main.py[line: 71] INFO: 按项目运行测试
2016-07-20 17:37:43,044 main.py[line: 107] INFO: 运行指定项目
2016-07-20 17:37:43,218 main.py[line: 123] INFO: 正在读取测项目[id：73, project：pj_wecharno]的协议，host，端口配置...
2016-07-20 17:37:43,218 main.py[line: 126] INFO: 成功读取配置信息：{"protocol":"http","host":"m.test.saofu.cn","port":80} 
2016-07-20 17:37:43,220 main.py[line: 142] INFO: 正在执行测试项目[id：73, project：pj_wecharno]
2016-07-20 17:37:43,220 testproject.py[line: 23] INFO: 正在获取测试项目[id：73, name：pj_wecharno]对应对应的测试计划名称列表
2016-07-20 17:37:43,329 testproject.py[line: 28] INFO: 成功获取项目测试计划名称列表[list=['plan1_of_wecharno']]
2016-07-20 17:37:43,438 testproject.py[line: 38] INFO: 正在执行项目测试计划[project：pj_wecharno，testplan：plan1_of_wecharno]
2016-07-20 17:37:43,438 testplan.py[line: 29] INFO: 正在获取测试计划[project=pj_wecharno，name=plan1_of_wecharno]的测试用例
2016-07-20 17:37:43,578 testplan.py[line: 35] INFO: 成功获取测试计划[project=pj_wecharno，name=plan1_of_wecharno]的测试用例id：dict_keys(['88', '98', '93', '80', '102', '76'])
2016-07-20 17:37:43,806 testplan.py[line: 57] INFO: 记录测试用例到测试用例报表
2016-07-20 17:37:43,807 mydb.py[line: 50] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720173742', 88, 'test-n-把商品加入购物车', '微商城-把商品加入购物车接口', 'plan1_of_wecharno', 'pj_wecharno', 'Block', '')
2016-07-20 17:37:43,808 testplan.py[line: 60] INFO: 开始执行测试用例[id=88，name=test-n-把商品加入购物车]
2016-07-20 17:37:43,808 testcase.py[line: 48] INFO: 记录测试步骤到测试步骤报告表
2016-07-20 17:37:43,809 mydb.py[line: 50] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720173742', 88, 'test-n-把商品加入购物车', 'plan1_of_wecharno', 'pj_wecharno', 90, 1, '', 'http', 'm.test.saofu.cn', 80, '{"class":"AddToCart","function":"test_add_to_cart","method":"post","url":"/addtocart","params":{"mallGoodsId":26838,"standardId":"undefined","amount":2,"serial":"var","openId":"var"}}', '{"success":"True", "amount":2, "mall_goods_id":26838,"shop_id":42, "closed":1}', 'Block', '', '')
2016-07-20 17:37:43,810 testcase.py[line: 60] INFO: 开始执行步骤操作[第1步]
2016-07-20 17:37:43,810 casestep.py[line: 64] INFO: 调用的方法为：AddToCart.test_add_to_cart
2016-07-20 17:37:43,811 mydb.py[line: 77] INFO: query：SELECT id FROM customer WHERE channel_serial=%s  data：('ous64uFCCLMyXYDJ-MkNilyCI5CY',)
2016-07-20 17:37:43,814 mydb.py[line: 63] INFO: query：UPDATE mall_shopping_cart SET amount = 0 WHERE customer_id = 6840 and closed=1
2016-07-20 17:37:43,953 mydb.py[line: 77] INFO: query：SELECT id FROM customer WHERE channel_serial=%s  data：('ous64uFCCLMyXYDJ-MkNilyCI5CY',)
2016-07-20 17:37:43,957 mydb.py[line: 77] INFO: query：SELECT id FROM shop WHERE serial=%s  data：('10549840601068216320',)
2016-07-20 17:37:43,962 wechatno_wemall.py[line: 133] INFO: 正在发起POST请求...
2016-07-20 17:37:43,962 httpprotocol.py[line: 67] INFO: 发起的请求为：http://m.test.saofu.cn:80/addtocart
2016-07-20 17:37:44,121 wechatno_wemall.py[line: 140] INFO: 正在解析返回结果:{'success': True, 'attach': None, 'message': None}
2016-07-20 17:37:44,122 mydb.py[line: 77] INFO: query：SELECT amount, mall_goods_id, shop_id, closed, id FROM mall_shopping_cart WHERE customer_id = %s and closed=%s ORDER BY id DESC LIMIT 1  data：(6840, 1)
2016-07-20 17:37:44,126 testcase.py[line: 98] INFO: 正在更新步骤执行结果
2016-07-20 17:37:44,126 mydb.py[line: 63] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="post", runtime="2016-07-20 17:37:43" WHERE executed_history_id = 20160720173742 AND testcase_id = 88 AND step_id = 90 AND project='pj_wecharno' AND testplan='plan1_of_wecharno'
2016-07-20 17:37:44,130 testcase.py[line: 101] INFO: 测试用例[id=88, name=test-n-把商品加入购物车]执行成功
2016-07-20 17:37:44,130 testplan.py[line: 64] INFO: 正在更新用例执行结果
2016-07-20 17:37:44,130 mydb.py[line: 63] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2016-07-20 17:37:43" WHERE executed_history_id = 20160720173742 AND testcase_id = 88 AND project='pj_wecharno' AND testplan='plan1_of_wecharno'
2016-07-20 17:37:44,288 testplan.py[line: 75] INFO: 正在更新testlink上测试计划[testplan_id=74, bulid_version=v1.0.0],对应用例[testcase_id=88]的执行结果
2016-07-20 17:37:44,673 testplan.py[line: 57] INFO: 记录测试用例到测试用例报表
2016-07-20 17:37:44,673 mydb.py[line: 50] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720173742', 98, 'test-n-查看购物车商品列表', '微商城-查看购物车商品列表接口', 'plan1_of_wecharno', 'pj_wecharno', 'Block', '')
2016-07-20 17:37:44,675 testplan.py[line: 60] INFO: 开始执行测试用例[id=98，name=test-n-查看购物车商品列表]
2016-07-20 17:37:44,675 testcase.py[line: 48] INFO: 记录测试步骤到测试步骤报告表
2016-07-20 17:37:44,675 mydb.py[line: 50] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720173742', 98, 'test-n-查看购物车商品列表', 'plan1_of_wecharno', 'pj_wecharno', 100, 1, '', 'http', 'm.test.saofu.cn', 80, '{"class":"AddToCart","function":"test_add_to_cart","method":"post","url":"/addtocart","params":{"mallGoodsId":26838,"standardId":"undefined","amount":2,"serial":"var","openId":"var"}}', '{"success":"True", "amount":2, "mall_goods_id":26838,"shop_id":"var", "closed":1}', 'Block', '', '')
2016-07-20 17:37:44,676 testcase.py[line: 60] INFO: 开始执行步骤操作[第1步]
2016-07-20 17:37:44,676 casestep.py[line: 64] INFO: 调用的方法为：AddToCart.test_add_to_cart
2016-07-20 17:37:44,676 mydb.py[line: 77] INFO: query：SELECT id FROM customer WHERE channel_serial=%s  data：('ous64uFCCLMyXYDJ-MkNilyCI5CY',)
2016-07-20 17:37:44,679 mydb.py[line: 63] INFO: query：UPDATE mall_shopping_cart SET amount = 0 WHERE customer_id = 6840 and closed=1
2016-07-20 17:37:44,771 mydb.py[line: 77] INFO: query：SELECT id FROM customer WHERE channel_serial=%s  data：('ous64uFCCLMyXYDJ-MkNilyCI5CY',)
2016-07-20 17:37:44,775 mydb.py[line: 77] INFO: query：SELECT id FROM shop WHERE serial=%s  data：('10549840601068216320',)
2016-07-20 17:37:44,780 wechatno_wemall.py[line: 133] INFO: 正在发起POST请求...
2016-07-20 17:37:44,781 httpprotocol.py[line: 67] INFO: 发起的请求为：http://m.test.saofu.cn:80/addtocart
2016-07-20 17:37:44,907 wechatno_wemall.py[line: 140] INFO: 正在解析返回结果:{'success': True, 'attach': None, 'message': None}
2016-07-20 17:37:44,907 mydb.py[line: 77] INFO: query：SELECT amount, mall_goods_id, shop_id, closed, id FROM mall_shopping_cart WHERE customer_id = %s and closed=%s ORDER BY id DESC LIMIT 1  data：(6840, 1)
2016-07-20 17:37:44,939 testcase.py[line: 98] INFO: 正在更新步骤执行结果
2016-07-20 17:37:44,939 mydb.py[line: 63] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="post", runtime="2016-07-20 17:37:44" WHERE executed_history_id = 20160720173742 AND testcase_id = 98 AND step_id = 100 AND project='pj_wecharno' AND testplan='plan1_of_wecharno'
2016-07-20 17:37:44,947 testcase.py[line: 48] INFO: 记录测试步骤到测试步骤报告表
2016-07-20 17:37:44,947 mydb.py[line: 50] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720173742', 98, 'test-n-查看购物车商品列表', 'plan1_of_wecharno', 'pj_wecharno', 101, 2, '', 'http', 'm.test.saofu.cn', 80, '{"class":"CartList","function":"test_view_cart_list","method":"get","url":"/cartlist?","params":{"serial":"var","openId":"var"}} ', '{"amount":2,"goodsID":26838}', 'Block', '', '')
2016-07-20 17:37:44,949 testcase.py[line: 60] INFO: 开始执行步骤操作[第2步]
2016-07-20 17:37:44,950 casestep.py[line: 64] INFO: 调用的方法为：CartList.test_view_cart_list
2016-07-20 17:37:44,950 wechatno_wemall.py[line: 190] INFO: 正在发起GET请求...
2016-07-20 17:37:44,950 httpprotocol.py[line: 50] INFO: 发起的请求为：http://m.test.saofu.cn:80/cartlist?serial=10549840601068216320&openId=ous64uFCCLMyXYDJ-MkNilyCI5CY
2016-07-20 17:37:44,972 wechatno_wemall.py[line: 196] INFO: 正在解析返回结果:[{'shopBranchId': None, 'mallGoodsStandard': None, 'cateringType': None, 'customer': None, 'amount': 2, 'shop': None, 'mallGoods': {'servicePhone': None, 'meituanSyncStatus': None, 'description': '接口测试专用,烦请勿删,勿操作', 'elemeSyncStatus': None, 'mallGoodsCate': None, 'name': '接口-测试商品1', 'soldAllCount': 0, 'business': None, 'standardAllSku': None, 'goodsCopyId': None, 'transientOriPrice': 0.0, 'hasActivity': 0, 'oriPrice': 0, 'mallGoodsCatagoryId': None, 'detail': None, 'price': 1, 'outerId': None, 'rules': None, 'isSku': 0, 'preRemind': None, 'cwId': None, 'waimaiChannel': None, 'standardLowPrice': 0.0, 'delFlag': None, 'relType': None, 'shopId': None, 'iconUrl': 'http://res.test.saofu.cn/saofu/upload/image/2016/07/18/352c9a44-5fe7-4546-9786-563d8700a773.jpg,', 'dishCount': None, 'expirTime': None, 'transientPrice': 0.0, 'skuQuantity': None, 'mallGoodsStandards': None, 'shop': None, 'standard': 1, 'branch': None, 'id': 26838, 'soldCount': 0, 'status': 1, 'baiduSyncStatus': None, 'cateId': 0, 'standardTopPrice': 0.0, 'syncStatus': 0, 'useTime': None, 'istop': 0, 'createTime': None, 'cateName': None, 'rank': None, 'lunchBoxCount': None, 'relBranchList': None, 'cannotUseTime': None}, 'closed': None, 'id': 15774}]
2016-07-20 17:37:44,973 testcase.py[line: 98] INFO: 正在更新步骤执行结果
2016-07-20 17:37:44,973 mydb.py[line: 63] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2016-07-20 17:37:44" WHERE executed_history_id = 20160720173742 AND testcase_id = 98 AND step_id = 101 AND project='pj_wecharno' AND testplan='plan1_of_wecharno'
2016-07-20 17:37:44,982 testcase.py[line: 101] INFO: 测试用例[id=98, name=test-n-查看购物车商品列表]执行成功
2016-07-20 17:37:44,982 testplan.py[line: 64] INFO: 正在更新用例执行结果
2016-07-20 17:37:44,982 mydb.py[line: 63] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2016-07-20 17:37:44" WHERE executed_history_id = 20160720173742 AND testcase_id = 98 AND project='pj_wecharno' AND testplan='plan1_of_wecharno'
2016-07-20 17:37:45,121 testplan.py[line: 75] INFO: 正在更新testlink上测试计划[testplan_id=74, bulid_version=v1.0.0],对应用例[testcase_id=98]的执行结果
2016-07-20 17:37:45,537 testplan.py[line: 57] INFO: 记录测试用例到测试用例报表
2016-07-20 17:37:45,537 mydb.py[line: 50] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720173742', 93, 'test-n-把商品移出购物车', '微商城-把商品移出购物车接口', 'plan1_of_wecharno', 'pj_wecharno', 'Block', '')
2016-07-20 17:37:45,538 testplan.py[line: 60] INFO: 开始执行测试用例[id=93，name=test-n-把商品移出购物车]
2016-07-20 17:37:45,538 testcase.py[line: 48] INFO: 记录测试步骤到测试步骤报告表
2016-07-20 17:37:45,538 mydb.py[line: 50] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720173742', 93, 'test-n-把商品移出购物车', 'plan1_of_wecharno', 'pj_wecharno', 95, 1, '', 'http', 'm.test.saofu.cn', 80, '{"class":"AddToCart","function":"test_add_to_cart","method":"post","url":"/addtocart","params":{"mallGoodsId":26838,"standardId":"undefined","amount":2,"serial":"var","openId":"var"}} ', '{"success":"True", "amount":2, "mall_goods_id":26838,"shop_id":"var", "closed":1}', 'Block', '', '')
2016-07-20 17:37:45,540 testcase.py[line: 60] INFO: 开始执行步骤操作[第1步]
2016-07-20 17:37:45,540 casestep.py[line: 64] INFO: 调用的方法为：AddToCart.test_add_to_cart
2016-07-20 17:37:45,540 mydb.py[line: 77] INFO: query：SELECT id FROM customer WHERE channel_serial=%s  data：('ous64uFCCLMyXYDJ-MkNilyCI5CY',)
2016-07-20 17:37:45,543 mydb.py[line: 63] INFO: query：UPDATE mall_shopping_cart SET amount = 0 WHERE customer_id = 6840 and closed=1
2016-07-20 17:37:45,622 mydb.py[line: 77] INFO: query：SELECT id FROM customer WHERE channel_serial=%s  data：('ous64uFCCLMyXYDJ-MkNilyCI5CY',)
2016-07-20 17:37:45,626 mydb.py[line: 77] INFO: query：SELECT id FROM shop WHERE serial=%s  data：('10549840601068216320',)
2016-07-20 17:37:45,630 wechatno_wemall.py[line: 133] INFO: 正在发起POST请求...
2016-07-20 17:37:45,630 httpprotocol.py[line: 67] INFO: 发起的请求为：http://m.test.saofu.cn:80/addtocart
2016-07-20 17:37:45,725 wechatno_wemall.py[line: 140] INFO: 正在解析返回结果:{'success': True, 'attach': None, 'message': None}
2016-07-20 17:37:45,726 mydb.py[line: 77] INFO: query：SELECT amount, mall_goods_id, shop_id, closed, id FROM mall_shopping_cart WHERE customer_id = %s and closed=%s ORDER BY id DESC LIMIT 1  data：(6840, 1)
2016-07-20 17:37:45,732 testcase.py[line: 98] INFO: 正在更新步骤执行结果
2016-07-20 17:37:45,732 mydb.py[line: 63] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="post", runtime="2016-07-20 17:37:45" WHERE executed_history_id = 20160720173742 AND testcase_id = 93 AND step_id = 95 AND project='pj_wecharno' AND testplan='plan1_of_wecharno'
2016-07-20 17:37:45,737 testcase.py[line: 48] INFO: 记录测试步骤到测试步骤报告表
2016-07-20 17:37:45,738 mydb.py[line: 50] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720173742', 93, 'test-n-把商品移出购物车', 'plan1_of_wecharno', 'pj_wecharno', 96, 2, '', 'http', 'm.test.saofu.cn', 80, '{"class":"DelFromCart","function":"test_del_from_cart","method":"get","url":"/delfromcart?","params":{"strIds":"var","serial":"var"}}', '{"success":"True"}', 'Block', '', '')
2016-07-20 17:37:45,740 testcase.py[line: 60] INFO: 开始执行步骤操作[第2步]
2016-07-20 17:37:45,740 casestep.py[line: 64] INFO: 调用的方法为：DelFromCart.test_del_from_cart
2016-07-20 17:37:45,740 wechatno_wemall.py[line: 166] INFO: 正在发起POST请求...
2016-07-20 17:37:45,740 httpprotocol.py[line: 67] INFO: 发起的请求为：http://m.test.saofu.cn:80/delfromcart?
2016-07-20 17:37:45,866 wechatno_wemall.py[line: 173] INFO: 正在解析返回结果:{'success': True, 'attach': None, 'message': None}
2016-07-20 17:37:45,866 mydb.py[line: 77] INFO: query：SELECT amount, mall_goods_id, shop_id, closed, id FROM mall_shopping_cart WHERE id=%s  data：(15774,)
2016-07-20 17:37:45,869 testcase.py[line: 98] INFO: 正在更新步骤执行结果
2016-07-20 17:37:45,870 mydb.py[line: 63] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2016-07-20 17:37:45" WHERE executed_history_id = 20160720173742 AND testcase_id = 93 AND step_id = 96 AND project='pj_wecharno' AND testplan='plan1_of_wecharno'
2016-07-20 17:37:45,872 testcase.py[line: 101] INFO: 测试用例[id=93, name=test-n-把商品移出购物车]执行成功
2016-07-20 17:37:45,873 testplan.py[line: 64] INFO: 正在更新用例执行结果
2016-07-20 17:37:45,873 mydb.py[line: 63] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2016-07-20 17:37:45" WHERE executed_history_id = 20160720173742 AND testcase_id = 93 AND project='pj_wecharno' AND testplan='plan1_of_wecharno'
2016-07-20 17:37:45,989 testplan.py[line: 75] INFO: 正在更新testlink上测试计划[testplan_id=74, bulid_version=v1.0.0],对应用例[testcase_id=93]的执行结果
2016-07-20 17:37:46,402 testplan.py[line: 57] INFO: 记录测试用例到测试用例报表
2016-07-20 17:37:46,402 mydb.py[line: 50] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720173742', 80, 'test-n-点击商品', '微商城-模拟点击页面跳转', 'plan1_of_wecharno', 'pj_wecharno', 'Block', '')
2016-07-20 17:37:46,403 testplan.py[line: 60] INFO: 开始执行测试用例[id=80，name=test-n-点击商品]
2016-07-20 17:37:46,404 testcase.py[line: 48] INFO: 记录测试步骤到测试步骤报告表
2016-07-20 17:37:46,404 mydb.py[line: 50] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720173742', 80, 'test-n-点击商品', 'plan1_of_wecharno', 'pj_wecharno', 82, 1, '', 'http', 'm.test.saofu.cn', 80, '{"class":"Goods","function":"test_click_goods","method":"get","url":"/goods/item?","params":{"id":26838, "serial":"var"}}', '{"status":200}', 'Block', '', '')
2016-07-20 17:37:46,405 testcase.py[line: 60] INFO: 开始执行步骤操作[第1步]
2016-07-20 17:37:46,405 casestep.py[line: 64] INFO: 调用的方法为：Goods.test_click_goods
2016-07-20 17:37:46,405 wechatno_wemall.py[line: 89] INFO: 正在发起GET请求...
2016-07-20 17:37:46,405 httpprotocol.py[line: 50] INFO: 发起的请求为：http://m.test.saofu.cn:80/goods/item?serial=10549840601068216320&id=26838
2016-07-20 17:37:46,542 wechatno_wemall.py[line: 93] INFO: 正在解析返回结果:





<!DOCTYPE html>
<link rel="stylesheet" href="/css/bind/banner.css?v=3.4.0-f5bd5" />  
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport"
	content="width=device-width, initial-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no">
<meta http-equiv="Expires" CONTENT="0">
<meta http-equiv="Cache-Control" CONTENT="no-cache">
<meta http-equiv="Pragma" CONTENT="no-cache">
<title>微商城</title>
<link rel="stylesheet" href="/css/mall/pure.css?v=3.4.0-f5bd5">
<link rel="stylesheet" href="/css/mall/grids-core.css?v=3.4.0-f5bd5">
<link rel="stylesheet" href="/css/mall/zepto.alert.css?v=3.4.0-f5bd5">
<script type="text/javascript" src="/js/TouchSlide.1.1.js?v=3.4.0-f5bd5"></script>
</head>
<style type="text/css">
* {
	margin: 0;
	padding: 0;
}

html {
	color: #626262;
}

a {
	text-decoration: none;
}

ol,ul {
	list-style: outside none none;
}

.left {
	float: left;
}

.right {
	float: right;
}

.in-block {
	display: inline-block;
}

.orange {
	color: #c58d04;
}

.grey {
	color: #adadad;
}

.bg-color {
	background: #ececec;
}

#wrapper {
	width: 100%;
	margin: 0 auto;
}

.header {
	width: 100%;
	overflow: hidden;
	border-bottom: 1px solid #eaeaea;
}

.top {
	width: 90%;
	margin: 0 auto;
	padding-bottom: 1em;
}

.top p {
	margin: 0.5em 0;
	font-size: 0.8em;
}
.top>p:first-child{
	font-size:1.1em;
}

.fonts {
	font-size: 1em !important;
	margin: 0.8em 0 !important;
}


.jian {
	display: inline-block;
	width: 1.5em;
	height: 1.5em;
	line-height: 1.5em;
	border: 1px solid #d1d1d1;
	border-right: 0 none;
	border-top-left-radius: 4px;
	border-bottom-left-radius: 4px;
	text-align: center;
	margin-left:0.4em;
}

.val {
	background: #fff;
	display: inline-block;
	width: 3.5em;
	height: 1.5em;
	line-height: 1.5em;
	border: 1px solid #d1d1d1;
	text-align: center;
}

.jia {
	display: inline-block;
	width: 1.5em;
	height: 1.5em;
	line-height: 1.5em;
	border: 1px solid #d1d1d1;
	border-left: 0 none;
	border-top-right-radius: 4px;
	border-bottom-right-radius: 4px;
	text-align: center;
}

.button {
	width: 47%;
	height: 3em;
	color: #fff;
	border: none;
	border-radius: 4px;
}

.addbtn {
	background: #edb23e;
	margin-right: 3%;
}

.buybtn {
	background: #f96364;
}

.bottom {
	border-top: 0.5em solid #eeeeee;
	padding-bottom: 3em;
    position: relative;
    width:100%;
}

.bottom .bottom-details{
	width:100%;	
	word-break:break-all;
	overflow-x: hidden; 
}

.bottom-details h1,.bottom-details h2,.bottom-details h3,.bottom-details h4,.bottom-details h5{
	word-break:break-all;
}

.bottom > p:first-child {
	text-indent: 1em;
}

.bottom > p img{
    width: 1em;
    position: absolute;
    top:0.8em;
    right: 1em;
}

.bottom-details p {
	text-indent: 1em;
	word-break:break-all;
}

.inline-padding {
	display: inline-block;
	padding-left: 0.8em;
}

.inline-paddings {
	display: inline-block;
	padding-left: 1.6em;
}

.footer {
	width: 100%;
	height: 3em;
	position: fixed;
	bottom: 0;
	background: #fff;
	color: #b6b6b6;
	text-align: center;
	border-top: 1px solid #eaeaea;
}

.footer a {
	color: #626262;
	display: inline-block;
	height:1em;
	line-height:1em;
	padding-top: 1em;
	padding-bottom: 1em;
}
.footer .inline-paddings-right{
    padding-top: 1em;
    float: right;
}
.footer img {
	display: inline-block;
	width: 1em;
}

.top-bg{
    position: fixed;
    bottom: 3.5em;
    right: 1em;
    width: 2em;
    display: none;
    filter:alpha(opacity=40);       /* IE */
    -moz-opacity:0.4;              /* Moz + FF */
    opacity: 0.4;     
}
.spec{
    display: inline-block;
    margin: 0 1em 0.8em 0;
    font-size:0.7em;
    padding:0.3em 1em;
    border:1px solid #ccc;
    border-radius:3px;
    cursor:pointer;
}
.fonts a.active{
    border: 2px solid #d2b57b;
}
.guige{
    float: left;
    width: 40px;
}
.guige-detail{
    margin-left: 40px;
}
.guige-detail a[disabled]{
    background: none repeat scroll 0 0 #fff;
    color: #e3e3e3;
    cursor: default;
}
/* 本例子css -------------------------------------- */
.slideBox {
	position: relative;
	width: 100%;
	height: 240px;
	overflow: hidden;
}

.slideBox .hd {
	position: absolute;
	width: 100%;
	height: 27px;
	bottom: 0;
	left: 0;
	z-index: 1;
}

.slideBox .hd img {
	width: 11px;
}

.slideBox .bd {
	position: relative;
	z-index: 0;
}

.slideBox .bd li {
	position: relative;
}

.slideBox .bd li img {
	width: 100%;
	height: 240px;
	display: block;
}

.slideBox .bd li a {
	-webkit-tap-highlight-color: rgba(0, 0, 0, 0); /* 取消链接高亮 */
}

.slideBox .hd a {
	display: block;
	width: auto;
	position: absolute;
	bottom: 0.5em;
	right: 0.5em;
	padding: 0.1em 0.7em;
	text-align: center;
	color: #fff;
	background-color: rgba(0, 0, 0, 0.6);
	border-radius: 4px;
}
.slideBox>.a-img{
    position: fixed;
    top:1em;
    right: 0.5em;
    display: block;
    width:2em;
    height: 2em;
    border-radius: 2em;
    background-color: rgba(0, 0, 0, 0.6); 
    z-index: 2;
}
.slideBox>.a-img>img{
    width: 1em;            
    position: absolute;
    top:50%;
    left: 50%;
    margin-top:-0.5em;
    margin-left: -0.5em;
}
.carts{
	position: relative;
}
.cartNum{                      
    display: inline-block;
    width: 1.2em;
    height: 1.2em;
    line-height:1.2em;
    border-radius: 1.5em;
    background:#ff0000;  
    position: absolute;
    right: -0.7em;
    top: 0.3em;
    color: #fff;
}
#soldCount{
	float: right; 
	font-size: 0.8em; 
	padding-top: 0.3em;
	color:#adadad;
}
.freight{
	font-size:0.8em;
	color:#adadad;
}
.standard_sku{
	font-size:0.9em;
	color:#adadad;
}
@media all and (max-width:320px){
	.slideBox{
		height:240px;
	}
	.slideBox .bd li img {
		height:240px;
	}
}
@media all and (min-width:321px) and (max-width:360px){
	.slideBox{
		height:270px;
	}
	.slideBox .bd li img {
		height:270px;
	}
}
@media all and (min-width:361px) and (max-width:375px){
	.slideBox{
		height:281px;
	}
	.slideBox .bd li img {
		height:281px;
	}
}
@media all and (min-width:376px) and (max-width:384px){
	.slideBox{
		height:288px;
	}
	.slideBox .bd li img {
		height:288px;
	}
}
@media all and (min-width:385px) and (max-width:414px){
	.slideBox{
		height:311px;
	}
	.slideBox .bd li img {
		height:311px;
	}
}
@media all and (min-width:415px){
	.slideBox{
		height:360px;
	}
	.slideBox .bd li img {
		height:360px;
	}
}
</style>
<body>
	<div id="wrapper">
		<div class="header">
			<div id="slideBox" class="slideBox">
				<a class="a-img" href="/cart?serial=10549840601068216320">
                  <img src="/images/mall/detail_cart_icon.png?v=3.4.0-f5bd5" class="pure-img">
              	</a>
				<div class="bd">
					<ul>
						
							
								<li><img src="http://res.test.saofu.cn/saofu/upload/image/2016/07/18/352c9a44-5fe7-4546-9786-563d8700a773.jpg" class="pure-img" /></li>
							
						
					</ul>
				</div>
				<div class="hd">
					<a class="pageState"></a>
				</div>
			</div>
		</div>		
		<div class="content">
			<div class="top">
				<p>
					接口-测试商品1
				</p>
				<p class="grey">
					接口测试专用,烦请勿删,勿操作
				</p>				
				<p class="fonts">
					单价:
					<span class="orange">
					
					
						
							￥0.01
						
						
					
					
					</span>
					<span id = "soldCount">销量:5件</span>
				</p>
				
					<p class="freight">运费:<span>4.00元</span></p>
				
				
				<p class="fonts shuliang">
					数量:<span class="jian">-</span><span class="val">1</span><span class="jia">+</span>
					
						
						
							<span class="standard_sku">(库存：999995件)</span>
						
						
						
					
				</p> 
				<div>
					<input type="button" class="button addbtn" value="加入购物车" />
					<input type="button" class="button buybtn" value="立即购买" />
				</div>
			</div>
			<div class="bottom">
				<p>图文详情<img src="/images/mall/down.png?v=3.4.0-f5bd5" class="pure-img"></p>
				<div class="bottom-details">
					<p>											</p><p><br/></p><p><br/></p><p><br/></p><p>接口测试专用商品,商品详情简介<br/></p>
				</div>
			</div>
		</div>		
	</div>
	<img src="/images/mall/top_bg.png?v=3.4.0-f5bd5" class="pure-img top-bg">
	<script type="text/javascript" src="/js/zepto.min.js?v=3.4.0-f5bd5"></script>
    <script type="text/javascript" src="/js/touch.js?v=3.4.0-f5bd5"></script>
    <script type="text/javascript" src="/js/mall/zepto.alert.js?v=3.4.0-f5bd5"></script>
	<script type="text/javascript" src="/js/mall/mall.js?v=3.4.0-f5bd5"></script>
	<script type="text/javascript">
			
	var priceLimita = $(".orange").text();
	var soldCounta = $("#soldCount").text();
	var skua = $(".standard_sku").text();
	
            // 滚动窗口来判断按钮显示或隐藏
            $(window).scroll(function() {
                if ($(this).scrollTop() > 120) {
                    $('.top-bg').show(100);
                } else {
                    $('.top-bg').hide(100);
                }
            });
            
            function choose(obj,price,sku,standardSoldCount){
            	if(!$(obj).attr('disabled')){
            	if($(obj).hasClass('active')){
            		$(".orange").text(priceLimita);
                	$("#soldCount").text(soldCounta);
                	$(".standard_sku").text(skua);
                	 $(obj).removeClass('active');
            	}else{
	            	$(".standard_sku").text("(库存:"+sku+"件)");
	            	$(".orange").text("￥"+price);
	            	$("#soldCount").text("销量:"+standardSoldCount+"件");
	            	$(".spec").removeClass('active');
                    $(obj).addClass('active');
            	}
            	}
            }
            
           
            
            $(function(){
            	/* $(".spec").tap(function(){
                    if(!$(this).attr('disabled')){
                        if($(this).hasClass('active')){
                            $(this).removeClass('active');
                            
                        }else{
                        	
                        }
                    }                    
                }); */
                
            	TouchSlide({
    				slideCell : "#slideBox",
    				mainCell : ".bd ul",
    				effect : "leftLoop",
    				pageStateCell : ".pageState"
    			});            	            	
				
            	$(".bottom-details img").width($(".top").width());
            });
            
            // jQuery实现动画滚动
            $('.top-bg').click(function(event) {
                event.preventDefault();
                $('html, body').scrollTop(0);
            });
			
			$(".bottom > p img").click(function(){
                $(this).parent().next().toggle();
                if($(this).parent().next().css("display")=="block"){
                    $(this).attr("src","/images/mall/down.png");
                }else{
                    $(this).attr("src","/images/mall/up.png");
                }
            });
            
            $(".jia").click(function(){
            	var val = $(this).siblings(".val");
            	var count = parseInt(val.text());
                if (isNaN(count)) {
                	count = 1;
                } else {
                	count += 1;
                }
                val.text(count);
            });
            $(".jian").click(function(){
            	var val = $(this).siblings(".val");
            	var count = parseInt(val.text());
                if (isNaN(count) || count <= 1) {
                	count = 1;
                } else {
                	count -= 1;
                }
                val.text(count);
            });
            
            $(".addbtn").click(function(event){
            	if($(this).prop("disabled") == true)
            		return false;
            	var params = {
   					mallGoodsId : "26838",
   					standardId : standardId,
   					amount : $(".val").text(),
   					serial : "10549840601068216320",
   					openId : "ous64uFCCLMyXYDJ-MkNilyCI5C"
   				};
            	
            	var standard = 1;
            	if(standard == 2 && $(".active").length < 1){
    				doAlert("no", "请选择商品的规格");
    				return;
    			}
            	if(standard == 2){
            		var standardId = $(".active").attr("data");
    				params.standardId = standardId;
            	}
            	$.post("/addtocart", params, function(result){
            		if (null == result || !result.success) {
            			toast(result.message);
    					return;
    				}
    				//更新购物车数量
    				/* var cartNum = $(".cartNum").text();
    				if (null == cartNum || "" == cartNum || typeof (cartNum) == undefined) {
    					$(".carts").append("<span class='cartNum'>1</span>");
    				} else {
    					if (null != result.attach && result.attach > 0) {
    						$(".cartNum").text(result.attach);
    					}
    				} */
    				toast("已经成功加入购物车");
            	});
            });
		$(".buybtn").click(function(event) {
			if($(this).prop("disabled") == true)
        		return false;
			$(this).attr("disabled","disabled");
			var standard = 1;
        	if(standard == 2 && $(".active").length < 1){
				doAlert("no", "请选择商品的规格");
				$(this).removeAttr("disabled");
				return;
        	}
        	if(standard == 2){
        		var standardId = $(".active").attr("data");
        		window.location.href = "/mall/tobuy/1?mallGoodsId=26838&amount=" + $(".val").text() + "&type=1&serial=10549840601068216320&standardId="+standardId;
        		return;
        	}
			window.location.href = "/mall/tobuy/1?mallGoodsId=26838&amount=" + $(".val").text() + "&type=1&serial=10549840601068216320";
		});
	</script>
</body>
</html>
<!--加入判断用户是否关注公众号功能 add by lipengfei at 2015-11-9  -->
  	
	<script type="text/javascript" src="/js/bind/banner.js?v=3.4.0-f5bd5"></script>
	<script type="text/javascript">
		$(function() {
			//var SHOP_SERIAL = getCookie("SHOP_SERIAL");
			var SHOP_SERIAL = "10549840601068216320";
			if(null != SHOP_SERIAL && SHOP_SERIAL != ""){
				$.ajax({
					url : '/saofu_mobile/checkUserBindStatus',
					data : {
						"serial" : SHOP_SERIAL
					},
					type : 'post',
					cache : false,
					dataType : 'json',
					success : function(data) {
						if (data != null) {
							var guildFocusStr = data.guildFocusStr;
							if(guildFocusStr != null && guildFocusStr == "1"){
								var hasBindedShop = data.hasBindedShop;
								if(hasBindedShop == "0"){
									var qrName = data.QRPublicName;
									var qrUrl = data.QRCodeURL;
									if(qrName != "" && qrUrl != ""){
										var params = qrName+"**"+qrUrl;
										followModule(params);
									}
								}
							}
						} 
					},
					error : function() {
					}
				});
			}
		});
				
	</script>

2016-07-20 17:37:46,548 wechatno_wemall.py[line: 96] INFO: 正在解析返回结果:200
2016-07-20 17:37:46,548 testcase.py[line: 98] INFO: 正在更新步骤执行结果
2016-07-20 17:37:46,549 mydb.py[line: 63] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2016-07-20 17:37:46" WHERE executed_history_id = 20160720173742 AND testcase_id = 80 AND step_id = 82 AND project='pj_wecharno' AND testplan='plan1_of_wecharno'
2016-07-20 17:37:46,555 testcase.py[line: 101] INFO: 测试用例[id=80, name=test-n-点击商品]执行成功
2016-07-20 17:37:46,555 testplan.py[line: 64] INFO: 正在更新用例执行结果
2016-07-20 17:37:46,556 mydb.py[line: 63] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2016-07-20 17:37:46" WHERE executed_history_id = 20160720173742 AND testcase_id = 80 AND project='pj_wecharno' AND testplan='plan1_of_wecharno'
2016-07-20 17:37:46,766 testplan.py[line: 75] INFO: 正在更新testlink上测试计划[testplan_id=74, bulid_version=v1.0.0],对应用例[testcase_id=80]的执行结果
2016-07-20 17:37:47,146 testplan.py[line: 57] INFO: 记录测试用例到测试用例报表
2016-07-20 17:37:47,146 mydb.py[line: 50] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720173742', 102, 'test-n-点击立即购买按钮', '微商城-模拟点击页面跳转', 'plan1_of_wecharno', 'pj_wecharno', 'Block', '')
2016-07-20 17:37:47,148 testplan.py[line: 60] INFO: 开始执行测试用例[id=102，name=test-n-点击立即购买按钮]
2016-07-20 17:37:47,148 testcase.py[line: 48] INFO: 记录测试步骤到测试步骤报告表
2016-07-20 17:37:47,148 mydb.py[line: 50] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720173742', 102, 'test-n-点击立即购买按钮', 'plan1_of_wecharno', 'pj_wecharno', 104, 1, '', 'http', 'm.test.saofu.cn', 80, '{"class":"ToBuyGoods","function":"test_to_buy_goods","method":"get","url":"/mall/tobuy/1?","params":{"mallGoodsId":"26838","amount":1,"type":1,"serial":"var"}}', '{"status":200}', 'Block', '', '')
2016-07-20 17:37:47,149 testcase.py[line: 60] INFO: 开始执行步骤操作[第1步]
2016-07-20 17:37:47,150 casestep.py[line: 64] INFO: 调用的方法为：ToBuyGoods.test_to_buy_goods
2016-07-20 17:37:47,150 wechatno_wemall.py[line: 210] INFO: 正在发起GET请求...
2016-07-20 17:37:47,150 httpprotocol.py[line: 50] INFO: 发起的请求为：http://m.test.saofu.cn:80/mall/tobuy/1?serial=10549840601068216320&amount=1&mallGoodsId=26838&type=1
2016-07-20 17:37:47,161 wechatno_wemall.py[line: 216] INFO: 正在解析返回结果:





<!DOCTYPE html>
<link rel="stylesheet" href="/css/bind/banner.css?v=3.4.0-f5bd5" />  
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <link rel="stylesheet" href="/css/skin-nr-min.css?v=3.4.0-f5bd5">
        <link rel="stylesheet" href="/css/cpn.css?v=3.4.0-f5bd5">
        <link rel="stylesheet" type="text/css" href="/css/zepto.alert.css?v=3.4.0-f5bd5">
        <title>哎哟~出错啦~</title>
    </head>
    <body>
        <script type="text/javascript" src="/js/zepto.min.js?v=3.4.0-f5bd5" ></script>
        <script type="text/javascript" src="/js/zepto.alert.min.js?v=3.4.0-f5bd5"></script>
        <script type="text/javascript">
        Zepto(function($){
			function myAlert(content) {
		    	$.dialog({
		    		content : content,
		    		title : "alert"
		    	});
		    }
			
				
				
					myAlert("噢...出错了!请等待管理员处理,稍后重试");					
				
			
        });
        </script>
    </body>
</html>

2016-07-20 17:37:47,161 htmlparser.py[line: 28] INFO: Data 






2016-07-20 17:37:47,162 testcase.py[line: 69] ERROR: 步骤[1]执行出错,停止执行用例[id=102, name=test-n-点击立即购买按钮]
2016-07-20 17:37:47,162 testcase.py[line: 75] INFO: 正在更新步骤执行结果
2016-07-20 17:37:47,163 mydb.py[line: 63] INFO: query：UPDATE case_step_report_tb SET runresult="Error",reason="Traceback (most recent call last):  File E:\Projects\interface_project\interface\wechatno_wemall.py, line 220, in test_to_buy_goods    parser.feed(response)  File D:\Program Files\python33\lib\html\parser.py, line 145, in feed    self.goahead(0)  File D:\Program Files\python33\lib\html\parser.py, line 200, in goahead    k = self.parse_html_declaration(i)  File D:\Program Files\python33\lib\html\parser.py, line 290, in parse_html_declaration    self.handle_decl(rawdata[i+2:gtpos])  File E:\Projects\interface_project\htmlparser.py, line 47, in handle_decl    logger.info(Decl： % data)TypeError: not all arguments converted during string formatting", protocol_method="get", runtime="2016-07-20 17:37:47" WHERE executed_history_id = 20160720173742 AND testcase_id = 102 AND step_id = 104 AND project='pj_wecharno' AND testplan='plan1_of_wecharno'
2016-07-20 17:37:47,165 testplan.py[line: 64] INFO: 正在更新用例执行结果
2016-07-20 17:37:47,165 mydb.py[line: 63] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2016-07-20 17:37:47" WHERE executed_history_id = 20160720173742 AND testcase_id = 102 AND project='pj_wecharno' AND testplan='plan1_of_wecharno'
2016-07-20 17:37:47,278 testplan.py[line: 75] INFO: 正在更新testlink上测试计划[testplan_id=74, bulid_version=v1.0.0],对应用例[testcase_id=102]的执行结果
2016-07-20 17:37:47,670 testplan.py[line: 57] INFO: 记录测试用例到测试用例报表
2016-07-20 17:37:47,671 mydb.py[line: 50] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720173742', 76, 'test-n-显示默认页面', '微商城-显示商品列表接口', 'plan1_of_wecharno', 'pj_wecharno', 'Block', '')
2016-07-20 17:37:47,672 testplan.py[line: 60] INFO: 开始执行测试用例[id=76，name=test-n-显示默认页面]
2016-07-20 17:37:47,672 testcase.py[line: 48] INFO: 记录测试步骤到测试步骤报告表
2016-07-20 17:37:47,672 mydb.py[line: 50] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720173742', 76, 'test-n-显示默认页面', 'plan1_of_wecharno', 'pj_wecharno', 78, 1, '', 'http', 'm.test.saofu.cn', 80, '{"class":"PList","function":"test_plist_default","method":"post","url":"/goods/plist","params":{"page_size":"10","page_no":"1","cateIds":"","orderBy":"","serial":"var","name":""}}', '{"currentPage":1,"pageSize":10,"pageStartRow":0,"pagination":"True","totalPages":"var","totalRows":"var","goodsinfo":[{"id": 26838,"name": "接口-测试商品1","price": 1,"description": "接口测试专用,烦请勿删,勿操作","iconUrl": "http://res.test.saofu.cn/saofu/upload/image/2016/07/18/352c9a44-5fe7-4546-9786-563d8700a773.jpg","skuQuantity":"var","standard": 1},{"id": 26839,"name": "接口-测试商品2","price": 0,"description": "接口测试专用,勿动","iconUrl": "http://res.test.saofu.cn/saofu/upload/image/2016/07/18/2c2ebeef-8d4f-483f-8ff4-ebcd5d209bb7.jpg","skuQuantity":"var","standard": 2}]}', 'Block', '', '')
2016-07-20 17:37:47,673 testcase.py[line: 60] INFO: 开始执行步骤操作[第1步]
2016-07-20 17:37:47,674 casestep.py[line: 64] INFO: 调用的方法为：PList.test_plist_default
2016-07-20 17:37:47,674 wechatno_wemall.py[line: 29] INFO: 正在发起POST请求...
2016-07-20 17:37:47,674 httpprotocol.py[line: 67] INFO: 发起的请求为：http://m.test.saofu.cn:80/goods/plist
2016-07-20 17:37:47,729 wechatno_wemall.py[line: 38] INFO: 正在解析返回结果:{'pageInfo': {'pagination': True, 'params': None, 'totalRows': 5, 'hasNextPage': False, 'pageSize': 10, 'hasPreviousPage': False, 'totalPages': 1, 'currentPage': 1, 'pageStartRow': 0, 'pageEndRow': 5}, 'dataList': [{'servicePhone': None, 'meituanSyncStatus': None, 'description': '100', 'elemeSyncStatus': None, 'mallGoodsCate': {'orderNum': None, 'branchId': None, 'delFlag': None, 'goodsAmount': 0, 'name': None, 'shop': None, 'oldName': None, 'goodsSoldOutAmount': 0, 'id': 260}, 'name': '插线板更名后', 'soldAllCount': 274, 'business': None, 'standardAllSku': None, 'goodsCopyId': None, 'transientOriPrice': 0.0, 'hasActivity': 0, 'oriPrice': 0, 'mallGoodsCatagoryId': None, 'detail': None, 'price': 1000, 'outerId': None, 'rules': None, 'isSku': 0, 'preRemind': None, 'cwId': None, 'waimaiChannel': None, 'standardLowPrice': 0.0, 'delFlag': None, 'relType': None, 'shopId': None, 'iconUrl': 'http://res.test.saofu.cn/saofu/upload/image/2016/04/25/bef60928-a428-4dde-85b1-17fff4005959.jpg', 'dishCount': None, 'expirTime': None, 'transientPrice': 0.0, 'skuQuantity': 0, 'mallGoodsStandards': None, 'shop': {'email': None, 'thirdAppId': None, 'logoUrl': None, 'phoneNumber': None, 'createTime': None, 'parent': None, 'suffixShop': None, 'serial': None, 'fullName': None, 'printAdUrl': None, 'name': None, 'id': 42, 'printAdText': None}, 'standard': 1, 'branch': None, 'id': 26189, 'soldCount': 268, 'status': 1, 'baiduSyncStatus': None, 'cateId': 0, 'standardTopPrice': 0.0, 'syncStatus': 0, 'useTime': None, 'istop': 0, 'createTime': None, 'cateName': None, 'rank': None, 'lunchBoxCount': None, 'relBranchList': None, 'cannotUseTime': None}, {'servicePhone': None, 'meituanSyncStatus': None, 'description': '阿斯达', 'elemeSyncStatus': None, 'mallGoodsCate': {'orderNum': None, 'branchId': None, 'delFlag': None, 'goodsAmount': 0, 'name': None, 'shop': None, 'oldName': None, 'goodsSoldOutAmount': 0, 'id': 260}, 'name': '水淀粉', 'soldAllCount': 72, 'business': None, 'standardAllSku': None, 'goodsCopyId': None, 'transientOriPrice': 0.0, 'hasActivity': 0, 'oriPrice': 0, 'mallGoodsCatagoryId': None, 'detail': None, 'price': 100000000, 'outerId': None, 'rules': None, 'isSku': 0, 'preRemind': None, 'cwId': None, 'waimaiChannel': None, 'standardLowPrice': 0.0, 'delFlag': None, 'relType': None, 'shopId': None, 'iconUrl': 'http://res.test.saofu.cn/saofu/upload/image/2016/04/25/7a59f0ca-ccb6-41ec-a1ab-27a854237d2f.jpg', 'dishCount': None, 'expirTime': None, 'transientPrice': 0.0, 'skuQuantity': 9265759, 'mallGoodsStandards': None, 'shop': {'email': None, 'thirdAppId': None, 'logoUrl': None, 'phoneNumber': None, 'createTime': None, 'parent': None, 'suffixShop': None, 'serial': None, 'fullName': None, 'printAdUrl': None, 'name': None, 'id': 42, 'printAdText': None}, 'standard': 1, 'branch': None, 'id': 26188, 'soldCount': 72, 'status': 1, 'baiduSyncStatus': None, 'cateId': 0, 'standardTopPrice': 0.0, 'syncStatus': 0, 'useTime': None, 'istop': 0, 'createTime': None, 'cateName': None, 'rank': None, 'lunchBoxCount': None, 'relBranchList': None, 'cannotUseTime': None}, {'servicePhone': None, 'meituanSyncStatus': None, 'description': '接口测试专用,勿动', 'elemeSyncStatus': None, 'mallGoodsCate': {'orderNum': None, 'branchId': None, 'delFlag': None, 'goodsAmount': 0, 'name': None, 'shop': None, 'oldName': None, 'goodsSoldOutAmount': 0, 'id': 268}, 'name': '接口-测试商品2', 'soldAllCount': 35, 'business': None, 'standardAllSku': None, 'goodsCopyId': None, 'transientOriPrice': 0.0, 'hasActivity': 0, 'oriPrice': 0, 'mallGoodsCatagoryId': None, 'detail': None, 'price': 0, 'outerId': None, 'rules': None, 'isSku': 0, 'preRemind': None, 'cwId': None, 'waimaiChannel': None, 'standardLowPrice': 0.01, 'delFlag': None, 'relType': None, 'shopId': None, 'iconUrl': 'http://res.test.saofu.cn/saofu/upload/image/2016/07/18/2c2ebeef-8d4f-483f-8ff4-ebcd5d209bb7.jpg', 'dishCount': None, 'expirTime': None, 'transientPrice': 0.0, 'skuQuantity': None, 'mallGoodsStandards': None, 'shop': {'email': None, 'thirdAppId': None, 'logoUrl': None, 'phoneNumber': None, 'createTime': None, 'parent': None, 'suffixShop': None, 'serial': None, 'fullName': None, 'printAdUrl': None, 'name': None, 'id': 42, 'printAdText': None}, 'standard': 2, 'branch': None, 'id': 26839, 'soldCount': 0, 'status': 1, 'baiduSyncStatus': None, 'cateId': 0, 'standardTopPrice': 0.0, 'syncStatus': 0, 'useTime': None, 'istop': 0, 'createTime': None, 'cateName': None, 'rank': None, 'lunchBoxCount': None, 'relBranchList': None, 'cannotUseTime': None}, {'servicePhone': None, 'meituanSyncStatus': None, 'description': '接口测试专用,烦请勿删,勿操作', 'elemeSyncStatus': None, 'mallGoodsCate': {'orderNum': None, 'branchId': None, 'delFlag': None, 'goodsAmount': 0, 'name': None, 'shop': None, 'oldName': None, 'goodsSoldOutAmount': 0, 'id': 268}, 'name': '接口-测试商品1', 'soldAllCount': 5, 'business': None, 'standardAllSku': None, 'goodsCopyId': None, 'transientOriPrice': 0.0, 'hasActivity': 0, 'oriPrice': 0, 'mallGoodsCatagoryId': None, 'detail': None, 'price': 1, 'outerId': None, 'rules': None, 'isSku': 0, 'preRemind': None, 'cwId': None, 'waimaiChannel': None, 'standardLowPrice': 0.0, 'delFlag': None, 'relType': None, 'shopId': None, 'iconUrl': 'http://res.test.saofu.cn/saofu/upload/image/2016/07/18/352c9a44-5fe7-4546-9786-563d8700a773.jpg', 'dishCount': None, 'expirTime': None, 'transientPrice': 0.0, 'skuQuantity': 999995, 'mallGoodsStandards': None, 'shop': {'email': None, 'thirdAppId': None, 'logoUrl': None, 'phoneNumber': None, 'createTime': None, 'parent': None, 'suffixShop': None, 'serial': None, 'fullName': None, 'printAdUrl': None, 'name': None, 'id': 42, 'printAdText': None}, 'standard': 1, 'branch': None, 'id': 26838, 'soldCount': 5, 'status': 1, 'baiduSyncStatus': None, 'cateId': 0, 'standardTopPrice': 0.0, 'syncStatus': 0, 'useTime': None, 'istop': 0, 'createTime': None, 'cateName': None, 'rank': None, 'lunchBoxCount': None, 'relBranchList': None, 'cannotUseTime': None}, {'servicePhone': None, 'meituanSyncStatus': None, 'description': '啊啊啊啊啊', 'elemeSyncStatus': None, 'mallGoodsCate': {'orderNum': None, 'branchId': None, 'delFlag': None, 'goodsAmount': 0, 'name': None, 'shop': None, 'oldName': None, 'goodsSoldOutAmount': 0, 'id': 259}, 'name': '多规格冗余测试', 'soldAllCount': 9, 'business': None, 'standardAllSku': None, 'goodsCopyId': None, 'transientOriPrice': 0.0, 'hasActivity': 0, 'oriPrice': 0, 'mallGoodsCatagoryId': None, 'detail': None, 'price': 0, 'outerId': None, 'rules': None, 'isSku': 0, 'preRemind': None, 'cwId': None, 'waimaiChannel': None, 'standardLowPrice': 1.0, 'delFlag': None, 'relType': None, 'shopId': None, 'iconUrl': 'http://res.test.saofu.cn/saofu/upload/file/2016/07/13/f99f5e55-d23c-4d73-980e-031b0e1643ea.png', 'dishCount': None, 'expirTime': None, 'transientPrice': 0.0, 'skuQuantity': None, 'mallGoodsStandards': None, 'shop': {'email': None, 'thirdAppId': None, 'logoUrl': None, 'phoneNumber': None, 'createTime': None, 'parent': None, 'suffixShop': None, 'serial': None, 'fullName': None, 'printAdUrl': None, 'name': None, 'id': 42, 'printAdText': None}, 'standard': 2, 'branch': None, 'id': 26836, 'soldCount': 0, 'status': 1, 'baiduSyncStatus': None, 'cateId': 0, 'standardTopPrice': 0.0, 'syncStatus': 0, 'useTime': None, 'istop': 0, 'createTime': None, 'cateName': None, 'rank': None, 'lunchBoxCount': None, 'relBranchList': None, 'cannotUseTime': None}]}
2016-07-20 17:37:47,730 mydb.py[line: 77] INFO: query：SELECT COUNT(*) FROM mall_goods AS mg JOIN mall_goods_cate AS mgc ON mg.cate_id=mgc.id JOIN template_cate AS tc ON tc.cate_id=mgc.id AND tc.template_id=1 AND tc.status=1 WHERE mg.shop_id=%s AND mg.del_flag=%s AND mg.status=%s AND mg.business_id NOT IN (%s, %s)  data：(42, 0, 1, 1, 2)
2016-07-20 17:37:47,743 mydb.py[line: 77] INFO: query：SELECT sku_quantity FROM mall_goods WHERE id=%s  data：(26838,)
2016-07-20 17:37:47,747 mydb.py[line: 77] INFO: query：SELECT sku_quantity FROM mall_goods WHERE id=%s  data：(26839,)
2016-07-20 17:37:47,750 testcase.py[line: 98] INFO: 正在更新步骤执行结果
2016-07-20 17:37:47,751 mydb.py[line: 63] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="post", runtime="2016-07-20 17:37:47" WHERE executed_history_id = 20160720173742 AND testcase_id = 76 AND step_id = 78 AND project='pj_wecharno' AND testplan='plan1_of_wecharno'
2016-07-20 17:37:47,753 testcase.py[line: 101] INFO: 测试用例[id=76, name=test-n-显示默认页面]执行成功
2016-07-20 17:37:47,753 testplan.py[line: 64] INFO: 正在更新用例执行结果
2016-07-20 17:37:47,753 mydb.py[line: 63] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2016-07-20 17:37:47" WHERE executed_history_id = 20160720173742 AND testcase_id = 76 AND project='pj_wecharno' AND testplan='plan1_of_wecharno'
2016-07-20 17:37:47,867 testplan.py[line: 75] INFO: 正在更新testlink上测试计划[testplan_id=74, bulid_version=v1.0.0],对应用例[testcase_id=76]的执行结果
2016-07-20 17:37:47,993 testplan.py[line: 85] INFO: 测试计划[project=pj_wecharno ,testplan=plan1_of_wecharno]已执行完
2016-07-20 17:37:47,993 main.py[line: 229] INFO: 接口测试已执行完成，正在关闭数据库连接
2016-07-20 17:37:47,994 htmlreporter.py[line: 37] INFO: 正在查询测试用例总数
2016-07-20 17:37:47,994 mydb.py[line: 77] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20160720173742',)
2016-07-20 17:37:47,996 htmlreporter.py[line: 43] INFO: 正在查询执行通过的用例数
2016-07-20 17:37:47,996 mydb.py[line: 77] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20160720173742')
2016-07-20 17:37:47,997 htmlreporter.py[line: 49] INFO: 正在查询执行失败的用例数
2016-07-20 17:37:47,997 mydb.py[line: 77] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20160720173742')
2016-07-20 17:37:47,998 htmlreporter.py[line: 55] INFO: 正在查询执行出错的用例数
2016-07-20 17:37:47,998 mydb.py[line: 77] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20160720173742')
2016-07-20 17:37:47,998 htmlreporter.py[line: 61] INFO: 正在查询未执行的用例数
2016-07-20 17:37:47,998 mydb.py[line: 77] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20160720173742')
2016-07-20 17:37:47,999 htmlreporter.py[line: 72] INFO: 正在查询已运的测试计划
2016-07-20 17:37:47,999 mydb.py[line: 93] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20160720173742',)
2016-07-20 17:37:48,000 htmlreporter.py[line: 98] INFO: 正在查询测试计划[project：pj_wecharno, testplan：plan1_of_wecharno]的测试用例执行结果
2016-07-20 17:37:48,000 mydb.py[line: 93] INFO: query：SELECT id, executed_history_id, testcase_id, testcase_name,testsuit, testplan, project, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s ORDER BY id ASC  data：('pj_wecharno', 'plan1_of_wecharno', '20160720173742')
2016-07-20 17:37:48,002 htmlreporter.py[line: 105] INFO: 正在记录测试测试计划[project：pj_wecharno, testplan：plan1_of_wecharno]的测试用例运行结果到测试报告
2016-07-20 17:37:48,002 htmlreporter.py[line: 115] INFO: 正在查询已运的测试计划
2016-07-20 17:37:48,002 mydb.py[line: 93] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20160720173742',)
2016-07-20 17:37:48,004 htmlreporter.py[line: 127] INFO: 正在查询测试计划[project：pj_wecharno, testplan：plan1_of_wecharno]已运行的测试用例
2016-07-20 17:37:48,004 mydb.py[line: 93] INFO: query：SELECT testcase_id, testcase_name, project, testplan FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id ORDER BY id ASC  data：('pj_wecharno', 'plan1_of_wecharno', '20160720173742')
2016-07-20 17:37:48,005 htmlreporter.py[line: 158] INFO: 正在查询测试用例[id=88]步骤运行结果
2016-07-20 17:37:48,005 mydb.py[line: 93] INFO: query：SELECT step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, cstb.runresult, reason, cstb.runtime FROM case_step_report_tb AS cstb JOIN testcase_report_tb AS tstb ON cstb.testcase_id =  tstb.testcase_id AND cstb.project=tstb.project AND cstb.testplan=tstb.testplan AND cstb.executed_history_id = tstb.executed_history_id WHERE tstb.project= %s AND tstb.testplan=%s AND cstb.testcase_id=%s AND cstb.executed_history_id = %s  data：('pj_wecharno', 'plan1_of_wecharno', 88, '20160720173742')
2016-07-20 17:37:48,006 htmlreporter.py[line: 158] INFO: 正在查询测试用例[id=98]步骤运行结果
2016-07-20 17:37:48,007 mydb.py[line: 93] INFO: query：SELECT step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, cstb.runresult, reason, cstb.runtime FROM case_step_report_tb AS cstb JOIN testcase_report_tb AS tstb ON cstb.testcase_id =  tstb.testcase_id AND cstb.project=tstb.project AND cstb.testplan=tstb.testplan AND cstb.executed_history_id = tstb.executed_history_id WHERE tstb.project= %s AND tstb.testplan=%s AND cstb.testcase_id=%s AND cstb.executed_history_id = %s  data：('pj_wecharno', 'plan1_of_wecharno', 98, '20160720173742')
2016-07-20 17:37:48,008 htmlreporter.py[line: 158] INFO: 正在查询测试用例[id=93]步骤运行结果
2016-07-20 17:37:48,008 mydb.py[line: 93] INFO: query：SELECT step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, cstb.runresult, reason, cstb.runtime FROM case_step_report_tb AS cstb JOIN testcase_report_tb AS tstb ON cstb.testcase_id =  tstb.testcase_id AND cstb.project=tstb.project AND cstb.testplan=tstb.testplan AND cstb.executed_history_id = tstb.executed_history_id WHERE tstb.project= %s AND tstb.testplan=%s AND cstb.testcase_id=%s AND cstb.executed_history_id = %s  data：('pj_wecharno', 'plan1_of_wecharno', 93, '20160720173742')
2016-07-20 17:37:48,010 htmlreporter.py[line: 158] INFO: 正在查询测试用例[id=80]步骤运行结果
2016-07-20 17:37:48,011 mydb.py[line: 93] INFO: query：SELECT step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, cstb.runresult, reason, cstb.runtime FROM case_step_report_tb AS cstb JOIN testcase_report_tb AS tstb ON cstb.testcase_id =  tstb.testcase_id AND cstb.project=tstb.project AND cstb.testplan=tstb.testplan AND cstb.executed_history_id = tstb.executed_history_id WHERE tstb.project= %s AND tstb.testplan=%s AND cstb.testcase_id=%s AND cstb.executed_history_id = %s  data：('pj_wecharno', 'plan1_of_wecharno', 80, '20160720173742')
2016-07-20 17:37:48,013 htmlreporter.py[line: 158] INFO: 正在查询测试用例[id=102]步骤运行结果
2016-07-20 17:37:48,013 mydb.py[line: 93] INFO: query：SELECT step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, cstb.runresult, reason, cstb.runtime FROM case_step_report_tb AS cstb JOIN testcase_report_tb AS tstb ON cstb.testcase_id =  tstb.testcase_id AND cstb.project=tstb.project AND cstb.testplan=tstb.testplan AND cstb.executed_history_id = tstb.executed_history_id WHERE tstb.project= %s AND tstb.testplan=%s AND cstb.testcase_id=%s AND cstb.executed_history_id = %s  data：('pj_wecharno', 'plan1_of_wecharno', 102, '20160720173742')
2016-07-20 17:37:48,015 htmlreporter.py[line: 158] INFO: 正在查询测试用例[id=76]步骤运行结果
2016-07-20 17:37:48,015 mydb.py[line: 93] INFO: query：SELECT step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, cstb.runresult, reason, cstb.runtime FROM case_step_report_tb AS cstb JOIN testcase_report_tb AS tstb ON cstb.testcase_id =  tstb.testcase_id AND cstb.project=tstb.project AND cstb.testplan=tstb.testplan AND cstb.executed_history_id = tstb.executed_history_id WHERE tstb.project= %s AND tstb.testplan=%s AND cstb.testcase_id=%s AND cstb.executed_history_id = %s  data：('pj_wecharno', 'plan1_of_wecharno', 76, '20160720173742')
2016-07-20 17:37:48,017 htmlreporter.py[line: 177] INFO: 正在设置测试报告结果文件名
2016-07-20 17:37:48,018 htmlreporter.py[line: 187] INFO: 测试报告文件名所在路径为：E:\\Projects\\report\\test_report20160720173742.html
2016-07-20 17:37:48,018 htmlreporter.py[line: 180] INFO: 正在生成测试报告
2016-07-20 17:37:48,020 main.py[line: 252] INFO: 生成测试报告成功
2016-07-20 17:37:48,221 main.py[line: 259] INFO: E:\\Projects\\report\\test_report20160720173742.html
2016-07-20 17:37:48,222 main.py[line: 262] INFO: 正在发送测试报告邮件...
2016-07-20 17:37:48,222 main.py[line: 266] INFO: 发送邮件成功
2016-07-20 17:44:08,933 globalpy.py[line: 14] INFO: 正在初始化数据库[名称：TESTDB]对象
2016-07-20 17:44:08,942 globalpy.py[line: 17] INFO: 正在初始化数据库[名称：SAOFUDB]对象
2016-07-20 17:44:08,947 globalpy.py[line: 20] INFO: 正在获取testlink
2016-07-20 17:44:08,996 main.py[line: 60] INFO: 正在创建测试用例报告报表
2016-07-20 17:44:08,996 mydb.py[line: 37] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime)
2016-07-20 17:44:08,997 main.py[line: 63] INFO: 正在创建测试步骤报告报表
2016-07-20 17:44:08,998 mydb.py[line: 37] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2016-07-20 17:44:08,998 main.py[line: 66] INFO: 正在读取运行模式配置
2016-07-20 17:44:09,000 main.py[line: 187] INFO: 按套件运行测试
2016-07-20 17:44:09,000 main.py[line: 189] INFO: 已获取配置的套件id列表：[79]
2016-07-20 17:44:09,304 main.py[line: 205] INFO: 正在读取套件[id=79，name=微商城-模拟点击页面跳转]的协议，host，端口配置...
2016-07-20 17:44:09,305 main.py[line: 223] INFO: 正在执行测试套件[id=79 ,name=微商城-模拟点击页面跳转]
2016-07-20 17:44:09,305 testsuite.py[line: 42] INFO: 正在获取套件[id=79，name=微商城-模拟点击页面跳转]的测试用例...
2016-07-20 17:44:09,651 testsuite.py[line: 60] INFO: 记录测试用例到到测试用例报表
2016-07-20 17:44:09,652 mydb.py[line: 50] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720174408', '80', 'test-n-点击商品', '微商城-模拟点击页面跳转', '无计划', 'pj_wecharno', 'Block', '')
2016-07-20 17:44:09,653 testsuite.py[line: 63] INFO: 开始执行测试用例[id=80，name=test-n-点击商品]
2016-07-20 17:44:09,653 testcase.py[line: 48] INFO: 记录测试步骤到测试步骤报告表
2016-07-20 17:44:09,653 mydb.py[line: 50] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720174408', '80', 'test-n-点击商品', '无计划', 'pj_wecharno', 82, 1, '', 'http', 'm.test.saofu.cn', '80', '{"class":"Goods","function":"test_click_goods","method":"get","url":"/goods/item?","params":{"id":26838, "serial":"var"}}', '{"status":200}', 'Block', '', '')
2016-07-20 17:44:09,655 testcase.py[line: 60] INFO: 开始执行步骤操作[第1步]
2016-07-20 17:44:09,655 casestep.py[line: 64] INFO: 调用的方法为：Goods.test_click_goods
2016-07-20 17:44:09,655 wechatno_wemall.py[line: 89] INFO: 正在发起GET请求...
2016-07-20 17:44:09,655 httpprotocol.py[line: 50] INFO: 发起的请求为：http://m.test.saofu.cn:80/goods/item?id=26838&serial=10549840601068216320
2016-07-20 17:44:09,850 wechatno_wemall.py[line: 93] INFO: 正在解析返回结果:





<!DOCTYPE html>
<link rel="stylesheet" href="/css/bind/banner.css?v=3.4.0-f5bd5" />  
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport"
	content="width=device-width, initial-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no">
<meta http-equiv="Expires" CONTENT="0">
<meta http-equiv="Cache-Control" CONTENT="no-cache">
<meta http-equiv="Pragma" CONTENT="no-cache">
<title>微商城</title>
<link rel="stylesheet" href="/css/mall/pure.css?v=3.4.0-f5bd5">
<link rel="stylesheet" href="/css/mall/grids-core.css?v=3.4.0-f5bd5">
<link rel="stylesheet" href="/css/mall/zepto.alert.css?v=3.4.0-f5bd5">
<script type="text/javascript" src="/js/TouchSlide.1.1.js?v=3.4.0-f5bd5"></script>
</head>
<style type="text/css">
* {
	margin: 0;
	padding: 0;
}

html {
	color: #626262;
}

a {
	text-decoration: none;
}

ol,ul {
	list-style: outside none none;
}

.left {
	float: left;
}

.right {
	float: right;
}

.in-block {
	display: inline-block;
}

.orange {
	color: #c58d04;
}

.grey {
	color: #adadad;
}

.bg-color {
	background: #ececec;
}

#wrapper {
	width: 100%;
	margin: 0 auto;
}

.header {
	width: 100%;
	overflow: hidden;
	border-bottom: 1px solid #eaeaea;
}

.top {
	width: 90%;
	margin: 0 auto;
	padding-bottom: 1em;
}

.top p {
	margin: 0.5em 0;
	font-size: 0.8em;
}
.top>p:first-child{
	font-size:1.1em;
}

.fonts {
	font-size: 1em !important;
	margin: 0.8em 0 !important;
}


.jian {
	display: inline-block;
	width: 1.5em;
	height: 1.5em;
	line-height: 1.5em;
	border: 1px solid #d1d1d1;
	border-right: 0 none;
	border-top-left-radius: 4px;
	border-bottom-left-radius: 4px;
	text-align: center;
	margin-left:0.4em;
}

.val {
	background: #fff;
	display: inline-block;
	width: 3.5em;
	height: 1.5em;
	line-height: 1.5em;
	border: 1px solid #d1d1d1;
	text-align: center;
}

.jia {
	display: inline-block;
	width: 1.5em;
	height: 1.5em;
	line-height: 1.5em;
	border: 1px solid #d1d1d1;
	border-left: 0 none;
	border-top-right-radius: 4px;
	border-bottom-right-radius: 4px;
	text-align: center;
}

.button {
	width: 47%;
	height: 3em;
	color: #fff;
	border: none;
	border-radius: 4px;
}

.addbtn {
	background: #edb23e;
	margin-right: 3%;
}

.buybtn {
	background: #f96364;
}

.bottom {
	border-top: 0.5em solid #eeeeee;
	padding-bottom: 3em;
    position: relative;
    width:100%;
}

.bottom .bottom-details{
	width:100%;	
	word-break:break-all;
	overflow-x: hidden; 
}

.bottom-details h1,.bottom-details h2,.bottom-details h3,.bottom-details h4,.bottom-details h5{
	word-break:break-all;
}

.bottom > p:first-child {
	text-indent: 1em;
}

.bottom > p img{
    width: 1em;
    position: absolute;
    top:0.8em;
    right: 1em;
}

.bottom-details p {
	text-indent: 1em;
	word-break:break-all;
}

.inline-padding {
	display: inline-block;
	padding-left: 0.8em;
}

.inline-paddings {
	display: inline-block;
	padding-left: 1.6em;
}

.footer {
	width: 100%;
	height: 3em;
	position: fixed;
	bottom: 0;
	background: #fff;
	color: #b6b6b6;
	text-align: center;
	border-top: 1px solid #eaeaea;
}

.footer a {
	color: #626262;
	display: inline-block;
	height:1em;
	line-height:1em;
	padding-top: 1em;
	padding-bottom: 1em;
}
.footer .inline-paddings-right{
    padding-top: 1em;
    float: right;
}
.footer img {
	display: inline-block;
	width: 1em;
}

.top-bg{
    position: fixed;
    bottom: 3.5em;
    right: 1em;
    width: 2em;
    display: none;
    filter:alpha(opacity=40);       /* IE */
    -moz-opacity:0.4;              /* Moz + FF */
    opacity: 0.4;     
}
.spec{
    display: inline-block;
    margin: 0 1em 0.8em 0;
    font-size:0.7em;
    padding:0.3em 1em;
    border:1px solid #ccc;
    border-radius:3px;
    cursor:pointer;
}
.fonts a.active{
    border: 2px solid #d2b57b;
}
.guige{
    float: left;
    width: 40px;
}
.guige-detail{
    margin-left: 40px;
}
.guige-detail a[disabled]{
    background: none repeat scroll 0 0 #fff;
    color: #e3e3e3;
    cursor: default;
}
/* 本例子css -------------------------------------- */
.slideBox {
	position: relative;
	width: 100%;
	height: 240px;
	overflow: hidden;
}

.slideBox .hd {
	position: absolute;
	width: 100%;
	height: 27px;
	bottom: 0;
	left: 0;
	z-index: 1;
}

.slideBox .hd img {
	width: 11px;
}

.slideBox .bd {
	position: relative;
	z-index: 0;
}

.slideBox .bd li {
	position: relative;
}

.slideBox .bd li img {
	width: 100%;
	height: 240px;
	display: block;
}

.slideBox .bd li a {
	-webkit-tap-highlight-color: rgba(0, 0, 0, 0); /* 取消链接高亮 */
}

.slideBox .hd a {
	display: block;
	width: auto;
	position: absolute;
	bottom: 0.5em;
	right: 0.5em;
	padding: 0.1em 0.7em;
	text-align: center;
	color: #fff;
	background-color: rgba(0, 0, 0, 0.6);
	border-radius: 4px;
}
.slideBox>.a-img{
    position: fixed;
    top:1em;
    right: 0.5em;
    display: block;
    width:2em;
    height: 2em;
    border-radius: 2em;
    background-color: rgba(0, 0, 0, 0.6); 
    z-index: 2;
}
.slideBox>.a-img>img{
    width: 1em;            
    position: absolute;
    top:50%;
    left: 50%;
    margin-top:-0.5em;
    margin-left: -0.5em;
}
.carts{
	position: relative;
}
.cartNum{                      
    display: inline-block;
    width: 1.2em;
    height: 1.2em;
    line-height:1.2em;
    border-radius: 1.5em;
    background:#ff0000;  
    position: absolute;
    right: -0.7em;
    top: 0.3em;
    color: #fff;
}
#soldCount{
	float: right; 
	font-size: 0.8em; 
	padding-top: 0.3em;
	color:#adadad;
}
.freight{
	font-size:0.8em;
	color:#adadad;
}
.standard_sku{
	font-size:0.9em;
	color:#adadad;
}
@media all and (max-width:320px){
	.slideBox{
		height:240px;
	}
	.slideBox .bd li img {
		height:240px;
	}
}
@media all and (min-width:321px) and (max-width:360px){
	.slideBox{
		height:270px;
	}
	.slideBox .bd li img {
		height:270px;
	}
}
@media all and (min-width:361px) and (max-width:375px){
	.slideBox{
		height:281px;
	}
	.slideBox .bd li img {
		height:281px;
	}
}
@media all and (min-width:376px) and (max-width:384px){
	.slideBox{
		height:288px;
	}
	.slideBox .bd li img {
		height:288px;
	}
}
@media all and (min-width:385px) and (max-width:414px){
	.slideBox{
		height:311px;
	}
	.slideBox .bd li img {
		height:311px;
	}
}
@media all and (min-width:415px){
	.slideBox{
		height:360px;
	}
	.slideBox .bd li img {
		height:360px;
	}
}
</style>
<body>
	<div id="wrapper">
		<div class="header">
			<div id="slideBox" class="slideBox">
				<a class="a-img" href="/cart?serial=10549840601068216320">
                  <img src="/images/mall/detail_cart_icon.png?v=3.4.0-f5bd5" class="pure-img">
              	</a>
				<div class="bd">
					<ul>
						
							
								<li><img src="http://res.test.saofu.cn/saofu/upload/image/2016/07/18/352c9a44-5fe7-4546-9786-563d8700a773.jpg" class="pure-img" /></li>
							
						
					</ul>
				</div>
				<div class="hd">
					<a class="pageState"></a>
				</div>
			</div>
		</div>		
		<div class="content">
			<div class="top">
				<p>
					接口-测试商品1
				</p>
				<p class="grey">
					接口测试专用,烦请勿删,勿操作
				</p>				
				<p class="fonts">
					单价:
					<span class="orange">
					
					
						
							￥0.01
						
						
					
					
					</span>
					<span id = "soldCount">销量:5件</span>
				</p>
				
					<p class="freight">运费:<span>4.00元</span></p>
				
				
				<p class="fonts shuliang">
					数量:<span class="jian">-</span><span class="val">1</span><span class="jia">+</span>
					
						
						
							<span class="standard_sku">(库存：999995件)</span>
						
						
						
					
				</p> 
				<div>
					<input type="button" class="button addbtn" value="加入购物车" />
					<input type="button" class="button buybtn" value="立即购买" />
				</div>
			</div>
			<div class="bottom">
				<p>图文详情<img src="/images/mall/down.png?v=3.4.0-f5bd5" class="pure-img"></p>
				<div class="bottom-details">
					<p>											</p><p><br/></p><p><br/></p><p><br/></p><p>接口测试专用商品,商品详情简介<br/></p>
				</div>
			</div>
		</div>		
	</div>
	<img src="/images/mall/top_bg.png?v=3.4.0-f5bd5" class="pure-img top-bg">
	<script type="text/javascript" src="/js/zepto.min.js?v=3.4.0-f5bd5"></script>
    <script type="text/javascript" src="/js/touch.js?v=3.4.0-f5bd5"></script>
    <script type="text/javascript" src="/js/mall/zepto.alert.js?v=3.4.0-f5bd5"></script>
	<script type="text/javascript" src="/js/mall/mall.js?v=3.4.0-f5bd5"></script>
	<script type="text/javascript">
			
	var priceLimita = $(".orange").text();
	var soldCounta = $("#soldCount").text();
	var skua = $(".standard_sku").text();
	
            // 滚动窗口来判断按钮显示或隐藏
            $(window).scroll(function() {
                if ($(this).scrollTop() > 120) {
                    $('.top-bg').show(100);
                } else {
                    $('.top-bg').hide(100);
                }
            });
            
            function choose(obj,price,sku,standardSoldCount){
            	if(!$(obj).attr('disabled')){
            	if($(obj).hasClass('active')){
            		$(".orange").text(priceLimita);
                	$("#soldCount").text(soldCounta);
                	$(".standard_sku").text(skua);
                	 $(obj).removeClass('active');
            	}else{
	            	$(".standard_sku").text("(库存:"+sku+"件)");
	            	$(".orange").text("￥"+price);
	            	$("#soldCount").text("销量:"+standardSoldCount+"件");
	            	$(".spec").removeClass('active');
                    $(obj).addClass('active');
            	}
            	}
            }
            
           
            
            $(function(){
            	/* $(".spec").tap(function(){
                    if(!$(this).attr('disabled')){
                        if($(this).hasClass('active')){
                            $(this).removeClass('active');
                            
                        }else{
                        	
                        }
                    }                    
                }); */
                
            	TouchSlide({
    				slideCell : "#slideBox",
    				mainCell : ".bd ul",
    				effect : "leftLoop",
    				pageStateCell : ".pageState"
    			});            	            	
				
            	$(".bottom-details img").width($(".top").width());
            });
            
            // jQuery实现动画滚动
            $('.top-bg').click(function(event) {
                event.preventDefault();
                $('html, body').scrollTop(0);
            });
			
			$(".bottom > p img").click(function(){
                $(this).parent().next().toggle();
                if($(this).parent().next().css("display")=="block"){
                    $(this).attr("src","/images/mall/down.png");
                }else{
                    $(this).attr("src","/images/mall/up.png");
                }
            });
            
            $(".jia").click(function(){
            	var val = $(this).siblings(".val");
            	var count = parseInt(val.text());
                if (isNaN(count)) {
                	count = 1;
                } else {
                	count += 1;
                }
                val.text(count);
            });
            $(".jian").click(function(){
            	var val = $(this).siblings(".val");
            	var count = parseInt(val.text());
                if (isNaN(count) || count <= 1) {
                	count = 1;
                } else {
                	count -= 1;
                }
                val.text(count);
            });
            
            $(".addbtn").click(function(event){
            	if($(this).prop("disabled") == true)
            		return false;
            	var params = {
   					mallGoodsId : "26838",
   					standardId : standardId,
   					amount : $(".val").text(),
   					serial : "10549840601068216320",
   					openId : "ous64uFCCLMyXYDJ-MkNilyCI5C"
   				};
            	
            	var standard = 1;
            	if(standard == 2 && $(".active").length < 1){
    				doAlert("no", "请选择商品的规格");
    				return;
    			}
            	if(standard == 2){
            		var standardId = $(".active").attr("data");
    				params.standardId = standardId;
            	}
            	$.post("/addtocart", params, function(result){
            		if (null == result || !result.success) {
            			toast(result.message);
    					return;
    				}
    				//更新购物车数量
    				/* var cartNum = $(".cartNum").text();
    				if (null == cartNum || "" == cartNum || typeof (cartNum) == undefined) {
    					$(".carts").append("<span class='cartNum'>1</span>");
    				} else {
    					if (null != result.attach && result.attach > 0) {
    						$(".cartNum").text(result.attach);
    					}
    				} */
    				toast("已经成功加入购物车");
            	});
            });
		$(".buybtn").click(function(event) {
			if($(this).prop("disabled") == true)
        		return false;
			$(this).attr("disabled","disabled");
			var standard = 1;
        	if(standard == 2 && $(".active").length < 1){
				doAlert("no", "请选择商品的规格");
				$(this).removeAttr("disabled");
				return;
        	}
        	if(standard == 2){
        		var standardId = $(".active").attr("data");
        		window.location.href = "/mall/tobuy/1?mallGoodsId=26838&amount=" + $(".val").text() + "&type=1&serial=10549840601068216320&standardId="+standardId;
        		return;
        	}
			window.location.href = "/mall/tobuy/1?mallGoodsId=26838&amount=" + $(".val").text() + "&type=1&serial=10549840601068216320";
		});
	</script>
</body>
</html>
<!--加入判断用户是否关注公众号功能 add by lipengfei at 2015-11-9  -->
  	
	<script type="text/javascript" src="/js/bind/banner.js?v=3.4.0-f5bd5"></script>
	<script type="text/javascript">
		$(function() {
			//var SHOP_SERIAL = getCookie("SHOP_SERIAL");
			var SHOP_SERIAL = "10549840601068216320";
			if(null != SHOP_SERIAL && SHOP_SERIAL != ""){
				$.ajax({
					url : '/saofu_mobile/checkUserBindStatus',
					data : {
						"serial" : SHOP_SERIAL
					},
					type : 'post',
					cache : false,
					dataType : 'json',
					success : function(data) {
						if (data != null) {
							var guildFocusStr = data.guildFocusStr;
							if(guildFocusStr != null && guildFocusStr == "1"){
								var hasBindedShop = data.hasBindedShop;
								if(hasBindedShop == "0"){
									var qrName = data.QRPublicName;
									var qrUrl = data.QRCodeURL;
									if(qrName != "" && qrUrl != ""){
										var params = qrName+"**"+qrUrl;
										followModule(params);
									}
								}
							}
						} 
					},
					error : function() {
					}
				});
			}
		});
				
	</script>

2016-07-20 17:44:09,858 wechatno_wemall.py[line: 96] INFO: 正在解析返回结果:200
2016-07-20 17:44:09,859 testcase.py[line: 98] INFO: 正在更新步骤执行结果
2016-07-20 17:44:09,859 mydb.py[line: 63] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2016-07-20 17:44:09" WHERE executed_history_id = 20160720174408 AND testcase_id = 80 AND step_id = 82 AND project='pj_wecharno' AND testplan='无计划'
2016-07-20 17:44:09,883 testcase.py[line: 101] INFO: 测试用例[id=80, name=test-n-点击商品]执行成功
2016-07-20 17:44:09,884 testsuite.py[line: 67] INFO: 正在更新用例执行结果
2016-07-20 17:44:09,884 mydb.py[line: 63] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2016-07-20 17:44:09" WHERE executed_history_id = 20160720174408 and testcase_id = 80 AND project='pj_wecharno' AND testplan='无计划'
2016-07-20 17:44:10,016 testsuite.py[line: 60] INFO: 记录测试用例到到测试用例报表
2016-07-20 17:44:10,017 mydb.py[line: 50] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720174408', '102', 'test-n-点击立即购买按钮', '微商城-模拟点击页面跳转', '无计划', 'pj_wecharno', 'Block', '')
2016-07-20 17:44:10,018 testsuite.py[line: 63] INFO: 开始执行测试用例[id=102，name=test-n-点击立即购买按钮]
2016-07-20 17:44:10,018 testcase.py[line: 48] INFO: 记录测试步骤到测试步骤报告表
2016-07-20 17:44:10,018 mydb.py[line: 50] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720174408', '102', 'test-n-点击立即购买按钮', '无计划', 'pj_wecharno', 104, 1, '', 'http', 'm.test.saofu.cn', '80', '{"class":"ToBuyGoods","function":"test_to_buy_goods","method":"get","url":"/mall/tobuy/1?","params":{"mallGoodsId":"26838","amount":1,"type":1,"serial":"var"}}', '{"status":200}', 'Block', '', '')
2016-07-20 17:44:10,019 testcase.py[line: 60] INFO: 开始执行步骤操作[第1步]
2016-07-20 17:44:10,019 casestep.py[line: 64] INFO: 调用的方法为：ToBuyGoods.test_to_buy_goods
2016-07-20 17:44:10,019 wechatno_wemall.py[line: 210] INFO: 正在发起GET请求...
2016-07-20 17:44:10,020 httpprotocol.py[line: 50] INFO: 发起的请求为：http://m.test.saofu.cn:80/mall/tobuy/1?type=1&serial=10549840601068216320&amount=1&mallGoodsId=26838
2016-07-20 17:44:10,030 wechatno_wemall.py[line: 216] INFO: 正在解析返回结果:





<!DOCTYPE html>
<link rel="stylesheet" href="/css/bind/banner.css?v=3.4.0-f5bd5" />  
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <link rel="stylesheet" href="/css/skin-nr-min.css?v=3.4.0-f5bd5">
        <link rel="stylesheet" href="/css/cpn.css?v=3.4.0-f5bd5">
        <link rel="stylesheet" type="text/css" href="/css/zepto.alert.css?v=3.4.0-f5bd5">
        <title>哎哟~出错啦~</title>
    </head>
    <body>
        <script type="text/javascript" src="/js/zepto.min.js?v=3.4.0-f5bd5" ></script>
        <script type="text/javascript" src="/js/zepto.alert.min.js?v=3.4.0-f5bd5"></script>
        <script type="text/javascript">
        Zepto(function($){
			function myAlert(content) {
		    	$.dialog({
		    		content : content,
		    		title : "alert"
		    	});
		    }
			
				
				
					myAlert("噢...出错了!请等待管理员处理,稍后重试");					
				
			
        });
        </script>
    </body>
</html>

2016-07-20 17:44:10,030 htmlparser.py[line: 28] INFO: Data 






2016-07-20 17:44:10,032 testcase.py[line: 69] ERROR: 步骤[1]执行出错,停止执行用例[id=102, name=test-n-点击立即购买按钮]
2016-07-20 17:44:10,032 testcase.py[line: 75] INFO: 正在更新步骤执行结果
2016-07-20 17:44:10,032 mydb.py[line: 63] INFO: query：UPDATE case_step_report_tb SET runresult="Error",reason="Traceback (most recent call last):  File E:\Projects\interface_project\interface\wechatno_wemall.py, line 220, in test_to_buy_goods    parser.feed(response)  File D:\Program Files\python33\lib\html\parser.py, line 145, in feed    self.goahead(0)  File D:\Program Files\python33\lib\html\parser.py, line 200, in goahead    k = self.parse_html_declaration(i)  File D:\Program Files\python33\lib\html\parser.py, line 290, in parse_html_declaration    self.handle_decl(rawdata[i+2:gtpos])  File E:\Projects\interface_project\htmlparser.py, line 47, in handle_decl    logger.info(Decl： % data)TypeError: not all arguments converted during string formatting", protocol_method="get", runtime="2016-07-20 17:44:10" WHERE executed_history_id = 20160720174408 AND testcase_id = 102 AND step_id = 104 AND project='pj_wecharno' AND testplan='无计划'
2016-07-20 17:44:10,034 testsuite.py[line: 67] INFO: 正在更新用例执行结果
2016-07-20 17:44:10,034 mydb.py[line: 63] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2016-07-20 17:44:10" WHERE executed_history_id = 20160720174408 and testcase_id = 102 AND project='pj_wecharno' AND testplan='无计划'
2016-07-20 17:44:10,036 testsuite.py[line: 74] INFO: 测试套件[id=79 ,name=微商城-模拟点击页面跳转]已执行完
2016-07-20 17:44:10,036 main.py[line: 229] INFO: 接口测试已执行完成，正在关闭数据库连接
2016-07-20 17:44:10,037 htmlreporter.py[line: 37] INFO: 正在查询测试用例总数
2016-07-20 17:44:10,037 mydb.py[line: 77] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20160720174408',)
2016-07-20 17:44:10,038 htmlreporter.py[line: 43] INFO: 正在查询执行通过的用例数
2016-07-20 17:44:10,039 mydb.py[line: 77] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20160720174408')
2016-07-20 17:44:10,040 htmlreporter.py[line: 49] INFO: 正在查询执行失败的用例数
2016-07-20 17:44:10,040 mydb.py[line: 77] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20160720174408')
2016-07-20 17:44:10,041 htmlreporter.py[line: 55] INFO: 正在查询执行出错的用例数
2016-07-20 17:44:10,041 mydb.py[line: 77] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20160720174408')
2016-07-20 17:44:10,042 htmlreporter.py[line: 61] INFO: 正在查询未执行的用例数
2016-07-20 17:44:10,042 mydb.py[line: 77] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20160720174408')
2016-07-20 17:44:10,043 htmlreporter.py[line: 72] INFO: 正在查询已运的测试计划
2016-07-20 17:44:10,043 mydb.py[line: 93] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20160720174408',)
2016-07-20 17:44:10,045 htmlreporter.py[line: 98] INFO: 正在查询测试计划[project：pj_wecharno, testplan：无计划]的测试用例执行结果
2016-07-20 17:44:10,045 mydb.py[line: 93] INFO: query：SELECT id, executed_history_id, testcase_id, testcase_name,testsuit, testplan, project, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s ORDER BY id ASC  data：('pj_wecharno', '无计划', '20160720174408')
2016-07-20 17:44:10,046 htmlreporter.py[line: 105] INFO: 正在记录测试测试计划[project：pj_wecharno, testplan：无计划]的测试用例运行结果到测试报告
2016-07-20 17:44:10,046 htmlreporter.py[line: 115] INFO: 正在查询已运的测试计划
2016-07-20 17:44:10,046 mydb.py[line: 93] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20160720174408',)
2016-07-20 17:44:10,048 htmlreporter.py[line: 127] INFO: 正在查询测试计划[project：pj_wecharno, testplan：无计划]已运行的测试用例
2016-07-20 17:44:10,048 mydb.py[line: 93] INFO: query：SELECT testcase_id, testcase_name, project, testplan FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id ORDER BY id ASC  data：('pj_wecharno', '无计划', '20160720174408')
2016-07-20 17:44:10,049 htmlreporter.py[line: 158] INFO: 正在查询测试用例[id=80]步骤运行结果
2016-07-20 17:44:10,049 mydb.py[line: 93] INFO: query：SELECT step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, cstb.runresult, reason, cstb.runtime FROM case_step_report_tb AS cstb JOIN testcase_report_tb AS tstb ON cstb.testcase_id =  tstb.testcase_id AND cstb.project=tstb.project AND cstb.testplan=tstb.testplan AND cstb.executed_history_id = tstb.executed_history_id WHERE tstb.project= %s AND tstb.testplan=%s AND cstb.testcase_id=%s AND cstb.executed_history_id = %s  data：('pj_wecharno', '无计划', 80, '20160720174408')
2016-07-20 17:44:10,051 htmlreporter.py[line: 158] INFO: 正在查询测试用例[id=102]步骤运行结果
2016-07-20 17:44:10,051 mydb.py[line: 93] INFO: query：SELECT step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, cstb.runresult, reason, cstb.runtime FROM case_step_report_tb AS cstb JOIN testcase_report_tb AS tstb ON cstb.testcase_id =  tstb.testcase_id AND cstb.project=tstb.project AND cstb.testplan=tstb.testplan AND cstb.executed_history_id = tstb.executed_history_id WHERE tstb.project= %s AND tstb.testplan=%s AND cstb.testcase_id=%s AND cstb.executed_history_id = %s  data：('pj_wecharno', '无计划', 102, '20160720174408')
2016-07-20 17:44:10,052 htmlreporter.py[line: 177] INFO: 正在设置测试报告结果文件名
2016-07-20 17:44:10,052 htmlreporter.py[line: 187] INFO: 测试报告文件名所在路径为：E:\\Projects\\report\\test_report20160720174408.html
2016-07-20 17:44:10,053 htmlreporter.py[line: 180] INFO: 正在生成测试报告
2016-07-20 17:44:10,054 main.py[line: 252] INFO: 生成测试报告成功
2016-07-20 17:44:11,263 main.py[line: 259] INFO: E:\\Projects\\report\\test_report20160720174408.html
2016-07-20 17:44:11,264 main.py[line: 262] INFO: 正在发送测试报告邮件...
2016-07-20 17:44:11,264 main.py[line: 266] INFO: 发送邮件成功
2016-07-20 17:47:13,908 globalpy.py[line: 14] INFO: 正在初始化数据库[名称：TESTDB]对象
2016-07-20 17:47:13,919 globalpy.py[line: 17] INFO: 正在初始化数据库[名称：SAOFUDB]对象
2016-07-20 17:47:13,925 globalpy.py[line: 20] INFO: 正在获取testlink
2016-07-20 17:47:13,979 main.py[line: 60] INFO: 正在创建测试用例报告报表
2016-07-20 17:47:13,980 mydb.py[line: 37] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime)
2016-07-20 17:47:13,981 main.py[line: 63] INFO: 正在创建测试步骤报告报表
2016-07-20 17:47:13,981 mydb.py[line: 37] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2016-07-20 17:47:13,982 main.py[line: 66] INFO: 正在读取运行模式配置
2016-07-20 17:47:13,983 main.py[line: 187] INFO: 按套件运行测试
2016-07-20 17:47:13,983 main.py[line: 189] INFO: 已获取配置的套件id列表：[79]
2016-07-20 17:47:14,234 main.py[line: 205] INFO: 正在读取套件[id=79，name=微商城-模拟点击页面跳转]的协议，host，端口配置...
2016-07-20 17:47:14,235 main.py[line: 223] INFO: 正在执行测试套件[id=79 ,name=微商城-模拟点击页面跳转]
2016-07-20 17:47:14,235 testsuite.py[line: 42] INFO: 正在获取套件[id=79，name=微商城-模拟点击页面跳转]的测试用例...
2016-07-20 17:47:14,469 testsuite.py[line: 60] INFO: 记录测试用例到到测试用例报表
2016-07-20 17:47:14,469 mydb.py[line: 50] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720174713', '80', 'test-n-点击商品', '微商城-模拟点击页面跳转', '无计划', 'pj_wecharno', 'Block', '')
2016-07-20 17:47:14,470 testsuite.py[line: 63] INFO: 开始执行测试用例[id=80，name=test-n-点击商品]
2016-07-20 17:47:14,470 testcase.py[line: 48] INFO: 记录测试步骤到测试步骤报告表
2016-07-20 17:47:14,471 mydb.py[line: 50] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720174713', '80', 'test-n-点击商品', '无计划', 'pj_wecharno', 82, 1, '', 'http', 'm.test.saofu.cn', '80', '{"class":"Goods","function":"test_click_goods","method":"get","url":"/goods/item?","params":{"id":26838, "serial":"var"}}', '{"status":200}', 'Block', '', '')
2016-07-20 17:47:14,472 testcase.py[line: 60] INFO: 开始执行步骤操作[第1步]
2016-07-20 17:47:14,472 casestep.py[line: 64] INFO: 调用的方法为：Goods.test_click_goods
2016-07-20 17:47:14,472 wechatno_wemall.py[line: 89] INFO: 正在发起GET请求...
2016-07-20 17:47:14,472 httpprotocol.py[line: 50] INFO: 发起的请求为：http://m.test.saofu.cn:80/goods/item?id=26838&serial=10549840601068216320
2016-07-20 17:47:14,632 wechatno_wemall.py[line: 93] INFO: 正在解析返回结果:





<!DOCTYPE html>
<link rel="stylesheet" href="/css/bind/banner.css?v=3.4.0-f5bd5" />  
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport"
	content="width=device-width, initial-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no">
<meta http-equiv="Expires" CONTENT="0">
<meta http-equiv="Cache-Control" CONTENT="no-cache">
<meta http-equiv="Pragma" CONTENT="no-cache">
<title>微商城</title>
<link rel="stylesheet" href="/css/mall/pure.css?v=3.4.0-f5bd5">
<link rel="stylesheet" href="/css/mall/grids-core.css?v=3.4.0-f5bd5">
<link rel="stylesheet" href="/css/mall/zepto.alert.css?v=3.4.0-f5bd5">
<script type="text/javascript" src="/js/TouchSlide.1.1.js?v=3.4.0-f5bd5"></script>
</head>
<style type="text/css">
* {
	margin: 0;
	padding: 0;
}

html {
	color: #626262;
}

a {
	text-decoration: none;
}

ol,ul {
	list-style: outside none none;
}

.left {
	float: left;
}

.right {
	float: right;
}

.in-block {
	display: inline-block;
}

.orange {
	color: #c58d04;
}

.grey {
	color: #adadad;
}

.bg-color {
	background: #ececec;
}

#wrapper {
	width: 100%;
	margin: 0 auto;
}

.header {
	width: 100%;
	overflow: hidden;
	border-bottom: 1px solid #eaeaea;
}

.top {
	width: 90%;
	margin: 0 auto;
	padding-bottom: 1em;
}

.top p {
	margin: 0.5em 0;
	font-size: 0.8em;
}
.top>p:first-child{
	font-size:1.1em;
}

.fonts {
	font-size: 1em !important;
	margin: 0.8em 0 !important;
}


.jian {
	display: inline-block;
	width: 1.5em;
	height: 1.5em;
	line-height: 1.5em;
	border: 1px solid #d1d1d1;
	border-right: 0 none;
	border-top-left-radius: 4px;
	border-bottom-left-radius: 4px;
	text-align: center;
	margin-left:0.4em;
}

.val {
	background: #fff;
	display: inline-block;
	width: 3.5em;
	height: 1.5em;
	line-height: 1.5em;
	border: 1px solid #d1d1d1;
	text-align: center;
}

.jia {
	display: inline-block;
	width: 1.5em;
	height: 1.5em;
	line-height: 1.5em;
	border: 1px solid #d1d1d1;
	border-left: 0 none;
	border-top-right-radius: 4px;
	border-bottom-right-radius: 4px;
	text-align: center;
}

.button {
	width: 47%;
	height: 3em;
	color: #fff;
	border: none;
	border-radius: 4px;
}

.addbtn {
	background: #edb23e;
	margin-right: 3%;
}

.buybtn {
	background: #f96364;
}

.bottom {
	border-top: 0.5em solid #eeeeee;
	padding-bottom: 3em;
    position: relative;
    width:100%;
}

.bottom .bottom-details{
	width:100%;	
	word-break:break-all;
	overflow-x: hidden; 
}

.bottom-details h1,.bottom-details h2,.bottom-details h3,.bottom-details h4,.bottom-details h5{
	word-break:break-all;
}

.bottom > p:first-child {
	text-indent: 1em;
}

.bottom > p img{
    width: 1em;
    position: absolute;
    top:0.8em;
    right: 1em;
}

.bottom-details p {
	text-indent: 1em;
	word-break:break-all;
}

.inline-padding {
	display: inline-block;
	padding-left: 0.8em;
}

.inline-paddings {
	display: inline-block;
	padding-left: 1.6em;
}

.footer {
	width: 100%;
	height: 3em;
	position: fixed;
	bottom: 0;
	background: #fff;
	color: #b6b6b6;
	text-align: center;
	border-top: 1px solid #eaeaea;
}

.footer a {
	color: #626262;
	display: inline-block;
	height:1em;
	line-height:1em;
	padding-top: 1em;
	padding-bottom: 1em;
}
.footer .inline-paddings-right{
    padding-top: 1em;
    float: right;
}
.footer img {
	display: inline-block;
	width: 1em;
}

.top-bg{
    position: fixed;
    bottom: 3.5em;
    right: 1em;
    width: 2em;
    display: none;
    filter:alpha(opacity=40);       /* IE */
    -moz-opacity:0.4;              /* Moz + FF */
    opacity: 0.4;     
}
.spec{
    display: inline-block;
    margin: 0 1em 0.8em 0;
    font-size:0.7em;
    padding:0.3em 1em;
    border:1px solid #ccc;
    border-radius:3px;
    cursor:pointer;
}
.fonts a.active{
    border: 2px solid #d2b57b;
}
.guige{
    float: left;
    width: 40px;
}
.guige-detail{
    margin-left: 40px;
}
.guige-detail a[disabled]{
    background: none repeat scroll 0 0 #fff;
    color: #e3e3e3;
    cursor: default;
}
/* 本例子css -------------------------------------- */
.slideBox {
	position: relative;
	width: 100%;
	height: 240px;
	overflow: hidden;
}

.slideBox .hd {
	position: absolute;
	width: 100%;
	height: 27px;
	bottom: 0;
	left: 0;
	z-index: 1;
}

.slideBox .hd img {
	width: 11px;
}

.slideBox .bd {
	position: relative;
	z-index: 0;
}

.slideBox .bd li {
	position: relative;
}

.slideBox .bd li img {
	width: 100%;
	height: 240px;
	display: block;
}

.slideBox .bd li a {
	-webkit-tap-highlight-color: rgba(0, 0, 0, 0); /* 取消链接高亮 */
}

.slideBox .hd a {
	display: block;
	width: auto;
	position: absolute;
	bottom: 0.5em;
	right: 0.5em;
	padding: 0.1em 0.7em;
	text-align: center;
	color: #fff;
	background-color: rgba(0, 0, 0, 0.6);
	border-radius: 4px;
}
.slideBox>.a-img{
    position: fixed;
    top:1em;
    right: 0.5em;
    display: block;
    width:2em;
    height: 2em;
    border-radius: 2em;
    background-color: rgba(0, 0, 0, 0.6); 
    z-index: 2;
}
.slideBox>.a-img>img{
    width: 1em;            
    position: absolute;
    top:50%;
    left: 50%;
    margin-top:-0.5em;
    margin-left: -0.5em;
}
.carts{
	position: relative;
}
.cartNum{                      
    display: inline-block;
    width: 1.2em;
    height: 1.2em;
    line-height:1.2em;
    border-radius: 1.5em;
    background:#ff0000;  
    position: absolute;
    right: -0.7em;
    top: 0.3em;
    color: #fff;
}
#soldCount{
	float: right; 
	font-size: 0.8em; 
	padding-top: 0.3em;
	color:#adadad;
}
.freight{
	font-size:0.8em;
	color:#adadad;
}
.standard_sku{
	font-size:0.9em;
	color:#adadad;
}
@media all and (max-width:320px){
	.slideBox{
		height:240px;
	}
	.slideBox .bd li img {
		height:240px;
	}
}
@media all and (min-width:321px) and (max-width:360px){
	.slideBox{
		height:270px;
	}
	.slideBox .bd li img {
		height:270px;
	}
}
@media all and (min-width:361px) and (max-width:375px){
	.slideBox{
		height:281px;
	}
	.slideBox .bd li img {
		height:281px;
	}
}
@media all and (min-width:376px) and (max-width:384px){
	.slideBox{
		height:288px;
	}
	.slideBox .bd li img {
		height:288px;
	}
}
@media all and (min-width:385px) and (max-width:414px){
	.slideBox{
		height:311px;
	}
	.slideBox .bd li img {
		height:311px;
	}
}
@media all and (min-width:415px){
	.slideBox{
		height:360px;
	}
	.slideBox .bd li img {
		height:360px;
	}
}
</style>
<body>
	<div id="wrapper">
		<div class="header">
			<div id="slideBox" class="slideBox">
				<a class="a-img" href="/cart?serial=10549840601068216320">
                  <img src="/images/mall/detail_cart_icon.png?v=3.4.0-f5bd5" class="pure-img">
              	</a>
				<div class="bd">
					<ul>
						
							
								<li><img src="http://res.test.saofu.cn/saofu/upload/image/2016/07/18/352c9a44-5fe7-4546-9786-563d8700a773.jpg" class="pure-img" /></li>
							
						
					</ul>
				</div>
				<div class="hd">
					<a class="pageState"></a>
				</div>
			</div>
		</div>		
		<div class="content">
			<div class="top">
				<p>
					接口-测试商品1
				</p>
				<p class="grey">
					接口测试专用,烦请勿删,勿操作
				</p>				
				<p class="fonts">
					单价:
					<span class="orange">
					
					
						
							￥0.01
						
						
					
					
					</span>
					<span id = "soldCount">销量:5件</span>
				</p>
				
					<p class="freight">运费:<span>4.00元</span></p>
				
				
				<p class="fonts shuliang">
					数量:<span class="jian">-</span><span class="val">1</span><span class="jia">+</span>
					
						
						
							<span class="standard_sku">(库存：999995件)</span>
						
						
						
					
				</p> 
				<div>
					<input type="button" class="button addbtn" value="加入购物车" />
					<input type="button" class="button buybtn" value="立即购买" />
				</div>
			</div>
			<div class="bottom">
				<p>图文详情<img src="/images/mall/down.png?v=3.4.0-f5bd5" class="pure-img"></p>
				<div class="bottom-details">
					<p>											</p><p><br/></p><p><br/></p><p><br/></p><p>接口测试专用商品,商品详情简介<br/></p>
				</div>
			</div>
		</div>		
	</div>
	<img src="/images/mall/top_bg.png?v=3.4.0-f5bd5" class="pure-img top-bg">
	<script type="text/javascript" src="/js/zepto.min.js?v=3.4.0-f5bd5"></script>
    <script type="text/javascript" src="/js/touch.js?v=3.4.0-f5bd5"></script>
    <script type="text/javascript" src="/js/mall/zepto.alert.js?v=3.4.0-f5bd5"></script>
	<script type="text/javascript" src="/js/mall/mall.js?v=3.4.0-f5bd5"></script>
	<script type="text/javascript">
			
	var priceLimita = $(".orange").text();
	var soldCounta = $("#soldCount").text();
	var skua = $(".standard_sku").text();
	
            // 滚动窗口来判断按钮显示或隐藏
            $(window).scroll(function() {
                if ($(this).scrollTop() > 120) {
                    $('.top-bg').show(100);
                } else {
                    $('.top-bg').hide(100);
                }
            });
            
            function choose(obj,price,sku,standardSoldCount){
            	if(!$(obj).attr('disabled')){
            	if($(obj).hasClass('active')){
            		$(".orange").text(priceLimita);
                	$("#soldCount").text(soldCounta);
                	$(".standard_sku").text(skua);
                	 $(obj).removeClass('active');
            	}else{
	            	$(".standard_sku").text("(库存:"+sku+"件)");
	            	$(".orange").text("￥"+price);
	            	$("#soldCount").text("销量:"+standardSoldCount+"件");
	            	$(".spec").removeClass('active');
                    $(obj).addClass('active');
            	}
            	}
            }
            
           
            
            $(function(){
            	/* $(".spec").tap(function(){
                    if(!$(this).attr('disabled')){
                        if($(this).hasClass('active')){
                            $(this).removeClass('active');
                            
                        }else{
                        	
                        }
                    }                    
                }); */
                
            	TouchSlide({
    				slideCell : "#slideBox",
    				mainCell : ".bd ul",
    				effect : "leftLoop",
    				pageStateCell : ".pageState"
    			});            	            	
				
            	$(".bottom-details img").width($(".top").width());
            });
            
            // jQuery实现动画滚动
            $('.top-bg').click(function(event) {
                event.preventDefault();
                $('html, body').scrollTop(0);
            });
			
			$(".bottom > p img").click(function(){
                $(this).parent().next().toggle();
                if($(this).parent().next().css("display")=="block"){
                    $(this).attr("src","/images/mall/down.png");
                }else{
                    $(this).attr("src","/images/mall/up.png");
                }
            });
            
            $(".jia").click(function(){
            	var val = $(this).siblings(".val");
            	var count = parseInt(val.text());
                if (isNaN(count)) {
                	count = 1;
                } else {
                	count += 1;
                }
                val.text(count);
            });
            $(".jian").click(function(){
            	var val = $(this).siblings(".val");
            	var count = parseInt(val.text());
                if (isNaN(count) || count <= 1) {
                	count = 1;
                } else {
                	count -= 1;
                }
                val.text(count);
            });
            
            $(".addbtn").click(function(event){
            	if($(this).prop("disabled") == true)
            		return false;
            	var params = {
   					mallGoodsId : "26838",
   					standardId : standardId,
   					amount : $(".val").text(),
   					serial : "10549840601068216320",
   					openId : "ous64uFCCLMyXYDJ-MkNilyCI5C"
   				};
            	
            	var standard = 1;
            	if(standard == 2 && $(".active").length < 1){
    				doAlert("no", "请选择商品的规格");
    				return;
    			}
            	if(standard == 2){
            		var standardId = $(".active").attr("data");
    				params.standardId = standardId;
            	}
            	$.post("/addtocart", params, function(result){
            		if (null == result || !result.success) {
            			toast(result.message);
    					return;
    				}
    				//更新购物车数量
    				/* var cartNum = $(".cartNum").text();
    				if (null == cartNum || "" == cartNum || typeof (cartNum) == undefined) {
    					$(".carts").append("<span class='cartNum'>1</span>");
    				} else {
    					if (null != result.attach && result.attach > 0) {
    						$(".cartNum").text(result.attach);
    					}
    				} */
    				toast("已经成功加入购物车");
            	});
            });
		$(".buybtn").click(function(event) {
			if($(this).prop("disabled") == true)
        		return false;
			$(this).attr("disabled","disabled");
			var standard = 1;
        	if(standard == 2 && $(".active").length < 1){
				doAlert("no", "请选择商品的规格");
				$(this).removeAttr("disabled");
				return;
        	}
        	if(standard == 2){
        		var standardId = $(".active").attr("data");
        		window.location.href = "/mall/tobuy/1?mallGoodsId=26838&amount=" + $(".val").text() + "&type=1&serial=10549840601068216320&standardId="+standardId;
        		return;
        	}
			window.location.href = "/mall/tobuy/1?mallGoodsId=26838&amount=" + $(".val").text() + "&type=1&serial=10549840601068216320";
		});
	</script>
</body>
</html>
<!--加入判断用户是否关注公众号功能 add by lipengfei at 2015-11-9  -->
  	
	<script type="text/javascript" src="/js/bind/banner.js?v=3.4.0-f5bd5"></script>
	<script type="text/javascript">
		$(function() {
			//var SHOP_SERIAL = getCookie("SHOP_SERIAL");
			var SHOP_SERIAL = "10549840601068216320";
			if(null != SHOP_SERIAL && SHOP_SERIAL != ""){
				$.ajax({
					url : '/saofu_mobile/checkUserBindStatus',
					data : {
						"serial" : SHOP_SERIAL
					},
					type : 'post',
					cache : false,
					dataType : 'json',
					success : function(data) {
						if (data != null) {
							var guildFocusStr = data.guildFocusStr;
							if(guildFocusStr != null && guildFocusStr == "1"){
								var hasBindedShop = data.hasBindedShop;
								if(hasBindedShop == "0"){
									var qrName = data.QRPublicName;
									var qrUrl = data.QRCodeURL;
									if(qrName != "" && qrUrl != ""){
										var params = qrName+"**"+qrUrl;
										followModule(params);
									}
								}
							}
						} 
					},
					error : function() {
					}
				});
			}
		});
				
	</script>

2016-07-20 17:47:14,635 wechatno_wemall.py[line: 96] INFO: 正在解析返回结果:200
2016-07-20 17:47:14,636 testcase.py[line: 98] INFO: 正在更新步骤执行结果
2016-07-20 17:47:14,636 mydb.py[line: 63] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2016-07-20 17:47:14" WHERE executed_history_id = 20160720174713 AND testcase_id = 80 AND step_id = 82 AND project='pj_wecharno' AND testplan='无计划'
2016-07-20 17:47:14,648 testcase.py[line: 101] INFO: 测试用例[id=80, name=test-n-点击商品]执行成功
2016-07-20 17:47:14,648 testsuite.py[line: 67] INFO: 正在更新用例执行结果
2016-07-20 17:47:14,649 mydb.py[line: 63] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2016-07-20 17:47:14" WHERE executed_history_id = 20160720174713 and testcase_id = 80 AND project='pj_wecharno' AND testplan='无计划'
2016-07-20 17:47:14,799 testsuite.py[line: 60] INFO: 记录测试用例到到测试用例报表
2016-07-20 17:47:14,799 mydb.py[line: 50] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720174713', '102', 'test-n-点击立即购买按钮', '微商城-模拟点击页面跳转', '无计划', 'pj_wecharno', 'Block', '')
2016-07-20 17:47:14,800 testsuite.py[line: 63] INFO: 开始执行测试用例[id=102，name=test-n-点击立即购买按钮]
2016-07-20 17:47:14,800 testcase.py[line: 48] INFO: 记录测试步骤到测试步骤报告表
2016-07-20 17:47:14,800 mydb.py[line: 50] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720174713', '102', 'test-n-点击立即购买按钮', '无计划', 'pj_wecharno', 104, 1, '', 'http', 'm.test.saofu.cn', '80', '{"class":"ToBuyGoods","function":"test_to_buy_goods","method":"get","url":"/mall/tobuy/1?","params":{"mallGoodsId":"26838","amount":1,"type":1,"serial":"var"}}', '{"status":200}', 'Block', '', '')
2016-07-20 17:47:14,801 testcase.py[line: 60] INFO: 开始执行步骤操作[第1步]
2016-07-20 17:47:14,801 casestep.py[line: 64] INFO: 调用的方法为：ToBuyGoods.test_to_buy_goods
2016-07-20 17:47:14,801 wechatno_wemall.py[line: 210] INFO: 正在发起GET请求...
2016-07-20 17:47:14,801 httpprotocol.py[line: 50] INFO: 发起的请求为：http://m.test.saofu.cn:80/mall/tobuy/1?serial=10549840601068216320&mallGoodsId=26838&amount=1&type=1
2016-07-20 17:47:14,812 wechatno_wemall.py[line: 216] INFO: 正在解析返回结果:





<!DOCTYPE html>
<link rel="stylesheet" href="/css/bind/banner.css?v=3.4.0-f5bd5" />  
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <link rel="stylesheet" href="/css/skin-nr-min.css?v=3.4.0-f5bd5">
        <link rel="stylesheet" href="/css/cpn.css?v=3.4.0-f5bd5">
        <link rel="stylesheet" type="text/css" href="/css/zepto.alert.css?v=3.4.0-f5bd5">
        <title>哎哟~出错啦~</title>
    </head>
    <body>
        <script type="text/javascript" src="/js/zepto.min.js?v=3.4.0-f5bd5" ></script>
        <script type="text/javascript" src="/js/zepto.alert.min.js?v=3.4.0-f5bd5"></script>
        <script type="text/javascript">
        Zepto(function($){
			function myAlert(content) {
		    	$.dialog({
		    		content : content,
		    		title : "alert"
		    	});
		    }
			
				
				
					myAlert("噢...出错了!请等待管理员处理,稍后重试");					
				
			
        });
        </script>
    </body>
</html>

2016-07-20 17:47:14,812 htmlparser.py[line: 28] INFO: Data 






2016-07-20 17:47:14,813 testcase.py[line: 69] ERROR: 步骤[1]执行出错,停止执行用例[id=102, name=test-n-点击立即购买按钮]
2016-07-20 17:47:14,814 testcase.py[line: 75] INFO: 正在更新步骤执行结果
2016-07-20 17:47:14,814 mydb.py[line: 63] INFO: query：UPDATE case_step_report_tb SET runresult="Error",reason="Traceback (most recent call last):  File E:\Projects\interface_project\interface\wechatno_wemall.py, line 220, in test_to_buy_goods    parser.feed(response)  File D:\Program Files\python33\lib\html\parser.py, line 145, in feed    self.goahead(0)  File D:\Program Files\python33\lib\html\parser.py, line 200, in goahead    k = self.parse_html_declaration(i)  File D:\Program Files\python33\lib\html\parser.py, line 290, in parse_html_declaration    self.handle_decl(rawdata[i+2:gtpos])  File E:\Projects\interface_project\htmlparser.py, line 47, in handle_decl    logger.info(Decl： % data)TypeError: not all arguments converted during string formatting", protocol_method="get", runtime="2016-07-20 17:47:14" WHERE executed_history_id = 20160720174713 AND testcase_id = 102 AND step_id = 104 AND project='pj_wecharno' AND testplan='无计划'
2016-07-20 17:47:14,816 testsuite.py[line: 67] INFO: 正在更新用例执行结果
2016-07-20 17:47:14,816 mydb.py[line: 63] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2016-07-20 17:47:14" WHERE executed_history_id = 20160720174713 and testcase_id = 102 AND project='pj_wecharno' AND testplan='无计划'
2016-07-20 17:47:14,817 testsuite.py[line: 74] INFO: 测试套件[id=79 ,name=微商城-模拟点击页面跳转]已执行完
2016-07-20 17:47:14,818 main.py[line: 229] INFO: 接口测试已执行完成，正在关闭数据库连接
2016-07-20 17:47:14,818 htmlreporter.py[line: 37] INFO: 正在查询测试用例总数
2016-07-20 17:47:14,818 mydb.py[line: 77] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20160720174713',)
2016-07-20 17:47:14,819 htmlreporter.py[line: 43] INFO: 正在查询执行通过的用例数
2016-07-20 17:47:14,819 mydb.py[line: 77] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20160720174713')
2016-07-20 17:47:14,821 htmlreporter.py[line: 49] INFO: 正在查询执行失败的用例数
2016-07-20 17:47:14,821 mydb.py[line: 77] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20160720174713')
2016-07-20 17:47:14,822 htmlreporter.py[line: 55] INFO: 正在查询执行出错的用例数
2016-07-20 17:47:14,822 mydb.py[line: 77] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20160720174713')
2016-07-20 17:47:14,823 htmlreporter.py[line: 61] INFO: 正在查询未执行的用例数
2016-07-20 17:47:14,823 mydb.py[line: 77] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20160720174713')
2016-07-20 17:47:14,824 htmlreporter.py[line: 72] INFO: 正在查询已运的测试计划
2016-07-20 17:47:14,825 mydb.py[line: 93] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20160720174713',)
2016-07-20 17:47:14,826 htmlreporter.py[line: 98] INFO: 正在查询测试计划[project：pj_wecharno, testplan：无计划]的测试用例执行结果
2016-07-20 17:47:14,826 mydb.py[line: 93] INFO: query：SELECT id, executed_history_id, testcase_id, testcase_name,testsuit, testplan, project, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s ORDER BY id ASC  data：('pj_wecharno', '无计划', '20160720174713')
2016-07-20 17:47:14,827 htmlreporter.py[line: 105] INFO: 正在记录测试测试计划[project：pj_wecharno, testplan：无计划]的测试用例运行结果到测试报告
2016-07-20 17:47:14,827 htmlreporter.py[line: 115] INFO: 正在查询已运的测试计划
2016-07-20 17:47:14,828 mydb.py[line: 93] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20160720174713',)
2016-07-20 17:47:14,829 htmlreporter.py[line: 127] INFO: 正在查询测试计划[project：pj_wecharno, testplan：无计划]已运行的测试用例
2016-07-20 17:47:14,829 mydb.py[line: 93] INFO: query：SELECT testcase_id, testcase_name, project, testplan FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id ORDER BY id ASC  data：('pj_wecharno', '无计划', '20160720174713')
2016-07-20 17:47:14,832 htmlreporter.py[line: 158] INFO: 正在查询测试用例[id=80]步骤运行结果
2016-07-20 17:47:14,832 mydb.py[line: 93] INFO: query：SELECT step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, cstb.runresult, reason, cstb.runtime FROM case_step_report_tb AS cstb JOIN testcase_report_tb AS tstb ON cstb.testcase_id =  tstb.testcase_id AND cstb.project=tstb.project AND cstb.testplan=tstb.testplan AND cstb.executed_history_id = tstb.executed_history_id WHERE tstb.project= %s AND tstb.testplan=%s AND cstb.testcase_id=%s AND cstb.executed_history_id = %s  data：('pj_wecharno', '无计划', 80, '20160720174713')
2016-07-20 17:47:14,835 htmlreporter.py[line: 158] INFO: 正在查询测试用例[id=102]步骤运行结果
2016-07-20 17:47:14,835 mydb.py[line: 93] INFO: query：SELECT step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, cstb.runresult, reason, cstb.runtime FROM case_step_report_tb AS cstb JOIN testcase_report_tb AS tstb ON cstb.testcase_id =  tstb.testcase_id AND cstb.project=tstb.project AND cstb.testplan=tstb.testplan AND cstb.executed_history_id = tstb.executed_history_id WHERE tstb.project= %s AND tstb.testplan=%s AND cstb.testcase_id=%s AND cstb.executed_history_id = %s  data：('pj_wecharno', '无计划', 102, '20160720174713')
2016-07-20 17:47:14,836 htmlreporter.py[line: 177] INFO: 正在设置测试报告结果文件名
2016-07-20 17:47:14,836 htmlreporter.py[line: 187] INFO: 测试报告文件名所在路径为：E:\\Projects\\report\\test_report20160720174713.html
2016-07-20 17:47:14,837 htmlreporter.py[line: 180] INFO: 正在生成测试报告
2016-07-20 17:47:14,838 main.py[line: 252] INFO: 生成测试报告成功
2016-07-20 17:47:15,034 main.py[line: 259] INFO: E:\\Projects\\report\\test_report20160720174713.html
2016-07-20 17:47:15,035 main.py[line: 262] INFO: 正在发送测试报告邮件...
2016-07-20 17:47:15,035 main.py[line: 266] INFO: 发送邮件成功
2016-07-20 17:48:27,388 globalpy.py[line: 14] INFO: 正在初始化数据库[名称：TESTDB]对象
2016-07-20 17:48:27,398 globalpy.py[line: 17] INFO: 正在初始化数据库[名称：SAOFUDB]对象
2016-07-20 17:48:27,406 globalpy.py[line: 20] INFO: 正在获取testlink
2016-07-20 17:48:27,456 main.py[line: 60] INFO: 正在创建测试用例报告报表
2016-07-20 17:48:27,456 mydb.py[line: 37] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime)
2016-07-20 17:48:27,457 main.py[line: 63] INFO: 正在创建测试步骤报告报表
2016-07-20 17:48:27,457 mydb.py[line: 37] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2016-07-20 17:48:27,458 main.py[line: 66] INFO: 正在读取运行模式配置
2016-07-20 17:48:27,459 main.py[line: 187] INFO: 按套件运行测试
2016-07-20 17:48:27,459 main.py[line: 189] INFO: 已获取配置的套件id列表：[79]
2016-07-20 17:48:27,692 main.py[line: 205] INFO: 正在读取套件[id=79，name=微商城-模拟点击页面跳转]的协议，host，端口配置...
2016-07-20 17:48:27,693 main.py[line: 223] INFO: 正在执行测试套件[id=79 ,name=微商城-模拟点击页面跳转]
2016-07-20 17:48:27,693 testsuite.py[line: 42] INFO: 正在获取套件[id=79，name=微商城-模拟点击页面跳转]的测试用例...
2016-07-20 17:48:27,956 testsuite.py[line: 60] INFO: 记录测试用例到到测试用例报表
2016-07-20 17:48:27,957 mydb.py[line: 50] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720174827', '80', 'test-n-点击商品', '微商城-模拟点击页面跳转', '无计划', 'pj_wecharno', 'Block', '')
2016-07-20 17:48:27,959 testsuite.py[line: 63] INFO: 开始执行测试用例[id=80，name=test-n-点击商品]
2016-07-20 17:48:27,959 testcase.py[line: 48] INFO: 记录测试步骤到测试步骤报告表
2016-07-20 17:48:27,959 mydb.py[line: 50] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720174827', '80', 'test-n-点击商品', '无计划', 'pj_wecharno', 82, 1, '', 'http', 'm.test.saofu.cn', '80', '{"class":"Goods","function":"test_click_goods","method":"get","url":"/goods/item?","params":{"id":26838, "serial":"var"}}', '{"status":200}', 'Block', '', '')
2016-07-20 17:48:27,961 testcase.py[line: 60] INFO: 开始执行步骤操作[第1步]
2016-07-20 17:48:27,961 casestep.py[line: 64] INFO: 调用的方法为：Goods.test_click_goods
2016-07-20 17:48:27,961 wechatno_wemall.py[line: 89] INFO: 正在发起GET请求...
2016-07-20 17:48:27,961 httpprotocol.py[line: 50] INFO: 发起的请求为：http://m.test.saofu.cn:80/goods/item?id=26838&serial=10549840601068216320
2016-07-20 17:48:27,961 httpprotocol.py[line: 51] INFO: {'Cookie': '10549840601068216320=ous64uFCCLMyXYDJ-MkNilyCI5C'}
2016-07-20 17:48:28,151 wechatno_wemall.py[line: 93] INFO: 正在解析返回结果:





<!DOCTYPE html>
<link rel="stylesheet" href="/css/bind/banner.css?v=3.4.0-f5bd5" />  
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport"
	content="width=device-width, initial-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no">
<meta http-equiv="Expires" CONTENT="0">
<meta http-equiv="Cache-Control" CONTENT="no-cache">
<meta http-equiv="Pragma" CONTENT="no-cache">
<title>微商城</title>
<link rel="stylesheet" href="/css/mall/pure.css?v=3.4.0-f5bd5">
<link rel="stylesheet" href="/css/mall/grids-core.css?v=3.4.0-f5bd5">
<link rel="stylesheet" href="/css/mall/zepto.alert.css?v=3.4.0-f5bd5">
<script type="text/javascript" src="/js/TouchSlide.1.1.js?v=3.4.0-f5bd5"></script>
</head>
<style type="text/css">
* {
	margin: 0;
	padding: 0;
}

html {
	color: #626262;
}

a {
	text-decoration: none;
}

ol,ul {
	list-style: outside none none;
}

.left {
	float: left;
}

.right {
	float: right;
}

.in-block {
	display: inline-block;
}

.orange {
	color: #c58d04;
}

.grey {
	color: #adadad;
}

.bg-color {
	background: #ececec;
}

#wrapper {
	width: 100%;
	margin: 0 auto;
}

.header {
	width: 100%;
	overflow: hidden;
	border-bottom: 1px solid #eaeaea;
}

.top {
	width: 90%;
	margin: 0 auto;
	padding-bottom: 1em;
}

.top p {
	margin: 0.5em 0;
	font-size: 0.8em;
}
.top>p:first-child{
	font-size:1.1em;
}

.fonts {
	font-size: 1em !important;
	margin: 0.8em 0 !important;
}


.jian {
	display: inline-block;
	width: 1.5em;
	height: 1.5em;
	line-height: 1.5em;
	border: 1px solid #d1d1d1;
	border-right: 0 none;
	border-top-left-radius: 4px;
	border-bottom-left-radius: 4px;
	text-align: center;
	margin-left:0.4em;
}

.val {
	background: #fff;
	display: inline-block;
	width: 3.5em;
	height: 1.5em;
	line-height: 1.5em;
	border: 1px solid #d1d1d1;
	text-align: center;
}

.jia {
	display: inline-block;
	width: 1.5em;
	height: 1.5em;
	line-height: 1.5em;
	border: 1px solid #d1d1d1;
	border-left: 0 none;
	border-top-right-radius: 4px;
	border-bottom-right-radius: 4px;
	text-align: center;
}

.button {
	width: 47%;
	height: 3em;
	color: #fff;
	border: none;
	border-radius: 4px;
}

.addbtn {
	background: #edb23e;
	margin-right: 3%;
}

.buybtn {
	background: #f96364;
}

.bottom {
	border-top: 0.5em solid #eeeeee;
	padding-bottom: 3em;
    position: relative;
    width:100%;
}

.bottom .bottom-details{
	width:100%;	
	word-break:break-all;
	overflow-x: hidden; 
}

.bottom-details h1,.bottom-details h2,.bottom-details h3,.bottom-details h4,.bottom-details h5{
	word-break:break-all;
}

.bottom > p:first-child {
	text-indent: 1em;
}

.bottom > p img{
    width: 1em;
    position: absolute;
    top:0.8em;
    right: 1em;
}

.bottom-details p {
	text-indent: 1em;
	word-break:break-all;
}

.inline-padding {
	display: inline-block;
	padding-left: 0.8em;
}

.inline-paddings {
	display: inline-block;
	padding-left: 1.6em;
}

.footer {
	width: 100%;
	height: 3em;
	position: fixed;
	bottom: 0;
	background: #fff;
	color: #b6b6b6;
	text-align: center;
	border-top: 1px solid #eaeaea;
}

.footer a {
	color: #626262;
	display: inline-block;
	height:1em;
	line-height:1em;
	padding-top: 1em;
	padding-bottom: 1em;
}
.footer .inline-paddings-right{
    padding-top: 1em;
    float: right;
}
.footer img {
	display: inline-block;
	width: 1em;
}

.top-bg{
    position: fixed;
    bottom: 3.5em;
    right: 1em;
    width: 2em;
    display: none;
    filter:alpha(opacity=40);       /* IE */
    -moz-opacity:0.4;              /* Moz + FF */
    opacity: 0.4;     
}
.spec{
    display: inline-block;
    margin: 0 1em 0.8em 0;
    font-size:0.7em;
    padding:0.3em 1em;
    border:1px solid #ccc;
    border-radius:3px;
    cursor:pointer;
}
.fonts a.active{
    border: 2px solid #d2b57b;
}
.guige{
    float: left;
    width: 40px;
}
.guige-detail{
    margin-left: 40px;
}
.guige-detail a[disabled]{
    background: none repeat scroll 0 0 #fff;
    color: #e3e3e3;
    cursor: default;
}
/* 本例子css -------------------------------------- */
.slideBox {
	position: relative;
	width: 100%;
	height: 240px;
	overflow: hidden;
}

.slideBox .hd {
	position: absolute;
	width: 100%;
	height: 27px;
	bottom: 0;
	left: 0;
	z-index: 1;
}

.slideBox .hd img {
	width: 11px;
}

.slideBox .bd {
	position: relative;
	z-index: 0;
}

.slideBox .bd li {
	position: relative;
}

.slideBox .bd li img {
	width: 100%;
	height: 240px;
	display: block;
}

.slideBox .bd li a {
	-webkit-tap-highlight-color: rgba(0, 0, 0, 0); /* 取消链接高亮 */
}

.slideBox .hd a {
	display: block;
	width: auto;
	position: absolute;
	bottom: 0.5em;
	right: 0.5em;
	padding: 0.1em 0.7em;
	text-align: center;
	color: #fff;
	background-color: rgba(0, 0, 0, 0.6);
	border-radius: 4px;
}
.slideBox>.a-img{
    position: fixed;
    top:1em;
    right: 0.5em;
    display: block;
    width:2em;
    height: 2em;
    border-radius: 2em;
    background-color: rgba(0, 0, 0, 0.6); 
    z-index: 2;
}
.slideBox>.a-img>img{
    width: 1em;            
    position: absolute;
    top:50%;
    left: 50%;
    margin-top:-0.5em;
    margin-left: -0.5em;
}
.carts{
	position: relative;
}
.cartNum{                      
    display: inline-block;
    width: 1.2em;
    height: 1.2em;
    line-height:1.2em;
    border-radius: 1.5em;
    background:#ff0000;  
    position: absolute;
    right: -0.7em;
    top: 0.3em;
    color: #fff;
}
#soldCount{
	float: right; 
	font-size: 0.8em; 
	padding-top: 0.3em;
	color:#adadad;
}
.freight{
	font-size:0.8em;
	color:#adadad;
}
.standard_sku{
	font-size:0.9em;
	color:#adadad;
}
@media all and (max-width:320px){
	.slideBox{
		height:240px;
	}
	.slideBox .bd li img {
		height:240px;
	}
}
@media all and (min-width:321px) and (max-width:360px){
	.slideBox{
		height:270px;
	}
	.slideBox .bd li img {
		height:270px;
	}
}
@media all and (min-width:361px) and (max-width:375px){
	.slideBox{
		height:281px;
	}
	.slideBox .bd li img {
		height:281px;
	}
}
@media all and (min-width:376px) and (max-width:384px){
	.slideBox{
		height:288px;
	}
	.slideBox .bd li img {
		height:288px;
	}
}
@media all and (min-width:385px) and (max-width:414px){
	.slideBox{
		height:311px;
	}
	.slideBox .bd li img {
		height:311px;
	}
}
@media all and (min-width:415px){
	.slideBox{
		height:360px;
	}
	.slideBox .bd li img {
		height:360px;
	}
}
</style>
<body>
	<div id="wrapper">
		<div class="header">
			<div id="slideBox" class="slideBox">
				<a class="a-img" href="/cart?serial=10549840601068216320">
                  <img src="/images/mall/detail_cart_icon.png?v=3.4.0-f5bd5" class="pure-img">
              	</a>
				<div class="bd">
					<ul>
						
							
								<li><img src="http://res.test.saofu.cn/saofu/upload/image/2016/07/18/352c9a44-5fe7-4546-9786-563d8700a773.jpg" class="pure-img" /></li>
							
						
					</ul>
				</div>
				<div class="hd">
					<a class="pageState"></a>
				</div>
			</div>
		</div>		
		<div class="content">
			<div class="top">
				<p>
					接口-测试商品1
				</p>
				<p class="grey">
					接口测试专用,烦请勿删,勿操作
				</p>				
				<p class="fonts">
					单价:
					<span class="orange">
					
					
						
							￥0.01
						
						
					
					
					</span>
					<span id = "soldCount">销量:5件</span>
				</p>
				
					<p class="freight">运费:<span>4.00元</span></p>
				
				
				<p class="fonts shuliang">
					数量:<span class="jian">-</span><span class="val">1</span><span class="jia">+</span>
					
						
						
							<span class="standard_sku">(库存：999995件)</span>
						
						
						
					
				</p> 
				<div>
					<input type="button" class="button addbtn" value="加入购物车" />
					<input type="button" class="button buybtn" value="立即购买" />
				</div>
			</div>
			<div class="bottom">
				<p>图文详情<img src="/images/mall/down.png?v=3.4.0-f5bd5" class="pure-img"></p>
				<div class="bottom-details">
					<p>											</p><p><br/></p><p><br/></p><p><br/></p><p>接口测试专用商品,商品详情简介<br/></p>
				</div>
			</div>
		</div>		
	</div>
	<img src="/images/mall/top_bg.png?v=3.4.0-f5bd5" class="pure-img top-bg">
	<script type="text/javascript" src="/js/zepto.min.js?v=3.4.0-f5bd5"></script>
    <script type="text/javascript" src="/js/touch.js?v=3.4.0-f5bd5"></script>
    <script type="text/javascript" src="/js/mall/zepto.alert.js?v=3.4.0-f5bd5"></script>
	<script type="text/javascript" src="/js/mall/mall.js?v=3.4.0-f5bd5"></script>
	<script type="text/javascript">
			
	var priceLimita = $(".orange").text();
	var soldCounta = $("#soldCount").text();
	var skua = $(".standard_sku").text();
	
            // 滚动窗口来判断按钮显示或隐藏
            $(window).scroll(function() {
                if ($(this).scrollTop() > 120) {
                    $('.top-bg').show(100);
                } else {
                    $('.top-bg').hide(100);
                }
            });
            
            function choose(obj,price,sku,standardSoldCount){
            	if(!$(obj).attr('disabled')){
            	if($(obj).hasClass('active')){
            		$(".orange").text(priceLimita);
                	$("#soldCount").text(soldCounta);
                	$(".standard_sku").text(skua);
                	 $(obj).removeClass('active');
            	}else{
	            	$(".standard_sku").text("(库存:"+sku+"件)");
	            	$(".orange").text("￥"+price);
	            	$("#soldCount").text("销量:"+standardSoldCount+"件");
	            	$(".spec").removeClass('active');
                    $(obj).addClass('active');
            	}
            	}
            }
            
           
            
            $(function(){
            	/* $(".spec").tap(function(){
                    if(!$(this).attr('disabled')){
                        if($(this).hasClass('active')){
                            $(this).removeClass('active');
                            
                        }else{
                        	
                        }
                    }                    
                }); */
                
            	TouchSlide({
    				slideCell : "#slideBox",
    				mainCell : ".bd ul",
    				effect : "leftLoop",
    				pageStateCell : ".pageState"
    			});            	            	
				
            	$(".bottom-details img").width($(".top").width());
            });
            
            // jQuery实现动画滚动
            $('.top-bg').click(function(event) {
                event.preventDefault();
                $('html, body').scrollTop(0);
            });
			
			$(".bottom > p img").click(function(){
                $(this).parent().next().toggle();
                if($(this).parent().next().css("display")=="block"){
                    $(this).attr("src","/images/mall/down.png");
                }else{
                    $(this).attr("src","/images/mall/up.png");
                }
            });
            
            $(".jia").click(function(){
            	var val = $(this).siblings(".val");
            	var count = parseInt(val.text());
                if (isNaN(count)) {
                	count = 1;
                } else {
                	count += 1;
                }
                val.text(count);
            });
            $(".jian").click(function(){
            	var val = $(this).siblings(".val");
            	var count = parseInt(val.text());
                if (isNaN(count) || count <= 1) {
                	count = 1;
                } else {
                	count -= 1;
                }
                val.text(count);
            });
            
            $(".addbtn").click(function(event){
            	if($(this).prop("disabled") == true)
            		return false;
            	var params = {
   					mallGoodsId : "26838",
   					standardId : standardId,
   					amount : $(".val").text(),
   					serial : "10549840601068216320",
   					openId : "ous64uFCCLMyXYDJ-MkNilyCI5C"
   				};
            	
            	var standard = 1;
            	if(standard == 2 && $(".active").length < 1){
    				doAlert("no", "请选择商品的规格");
    				return;
    			}
            	if(standard == 2){
            		var standardId = $(".active").attr("data");
    				params.standardId = standardId;
            	}
            	$.post("/addtocart", params, function(result){
            		if (null == result || !result.success) {
            			toast(result.message);
    					return;
    				}
    				//更新购物车数量
    				/* var cartNum = $(".cartNum").text();
    				if (null == cartNum || "" == cartNum || typeof (cartNum) == undefined) {
    					$(".carts").append("<span class='cartNum'>1</span>");
    				} else {
    					if (null != result.attach && result.attach > 0) {
    						$(".cartNum").text(result.attach);
    					}
    				} */
    				toast("已经成功加入购物车");
            	});
            });
		$(".buybtn").click(function(event) {
			if($(this).prop("disabled") == true)
        		return false;
			$(this).attr("disabled","disabled");
			var standard = 1;
        	if(standard == 2 && $(".active").length < 1){
				doAlert("no", "请选择商品的规格");
				$(this).removeAttr("disabled");
				return;
        	}
        	if(standard == 2){
        		var standardId = $(".active").attr("data");
        		window.location.href = "/mall/tobuy/1?mallGoodsId=26838&amount=" + $(".val").text() + "&type=1&serial=10549840601068216320&standardId="+standardId;
        		return;
        	}
			window.location.href = "/mall/tobuy/1?mallGoodsId=26838&amount=" + $(".val").text() + "&type=1&serial=10549840601068216320";
		});
	</script>
</body>
</html>
<!--加入判断用户是否关注公众号功能 add by lipengfei at 2015-11-9  -->
  	
	<script type="text/javascript" src="/js/bind/banner.js?v=3.4.0-f5bd5"></script>
	<script type="text/javascript">
		$(function() {
			//var SHOP_SERIAL = getCookie("SHOP_SERIAL");
			var SHOP_SERIAL = "10549840601068216320";
			if(null != SHOP_SERIAL && SHOP_SERIAL != ""){
				$.ajax({
					url : '/saofu_mobile/checkUserBindStatus',
					data : {
						"serial" : SHOP_SERIAL
					},
					type : 'post',
					cache : false,
					dataType : 'json',
					success : function(data) {
						if (data != null) {
							var guildFocusStr = data.guildFocusStr;
							if(guildFocusStr != null && guildFocusStr == "1"){
								var hasBindedShop = data.hasBindedShop;
								if(hasBindedShop == "0"){
									var qrName = data.QRPublicName;
									var qrUrl = data.QRCodeURL;
									if(qrName != "" && qrUrl != ""){
										var params = qrName+"**"+qrUrl;
										followModule(params);
									}
								}
							}
						} 
					},
					error : function() {
					}
				});
			}
		});
				
	</script>

2016-07-20 17:48:28,155 wechatno_wemall.py[line: 96] INFO: 正在解析返回结果:200
2016-07-20 17:48:28,157 testcase.py[line: 98] INFO: 正在更新步骤执行结果
2016-07-20 17:48:28,158 mydb.py[line: 63] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2016-07-20 17:48:27" WHERE executed_history_id = 20160720174827 AND testcase_id = 80 AND step_id = 82 AND project='pj_wecharno' AND testplan='无计划'
2016-07-20 17:48:28,187 testcase.py[line: 101] INFO: 测试用例[id=80, name=test-n-点击商品]执行成功
2016-07-20 17:48:28,187 testsuite.py[line: 67] INFO: 正在更新用例执行结果
2016-07-20 17:48:28,187 mydb.py[line: 63] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2016-07-20 17:48:27" WHERE executed_history_id = 20160720174827 and testcase_id = 80 AND project='pj_wecharno' AND testplan='无计划'
2016-07-20 17:48:28,359 testsuite.py[line: 60] INFO: 记录测试用例到到测试用例报表
2016-07-20 17:48:28,360 mydb.py[line: 50] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720174827', '102', 'test-n-点击立即购买按钮', '微商城-模拟点击页面跳转', '无计划', 'pj_wecharno', 'Block', '')
2016-07-20 17:48:28,360 testsuite.py[line: 63] INFO: 开始执行测试用例[id=102，name=test-n-点击立即购买按钮]
2016-07-20 17:48:28,361 testcase.py[line: 48] INFO: 记录测试步骤到测试步骤报告表
2016-07-20 17:48:28,361 mydb.py[line: 50] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720174827', '102', 'test-n-点击立即购买按钮', '无计划', 'pj_wecharno', 104, 1, '', 'http', 'm.test.saofu.cn', '80', '{"class":"ToBuyGoods","function":"test_to_buy_goods","method":"get","url":"/mall/tobuy/1?","params":{"mallGoodsId":"26838","amount":1,"type":1,"serial":"var"}}', '{"status":200}', 'Block', '', '')
2016-07-20 17:48:28,362 testcase.py[line: 60] INFO: 开始执行步骤操作[第1步]
2016-07-20 17:48:28,362 casestep.py[line: 64] INFO: 调用的方法为：ToBuyGoods.test_to_buy_goods
2016-07-20 17:48:28,362 wechatno_wemall.py[line: 210] INFO: 正在发起GET请求...
2016-07-20 17:48:28,363 httpprotocol.py[line: 50] INFO: 发起的请求为：http://m.test.saofu.cn:80/mall/tobuy/1?mallGoodsId=26838&type=1&serial=10549840601068216320&amount=1
2016-07-20 17:48:28,363 httpprotocol.py[line: 51] INFO: {'Cookie': '10549840601068216320=ous64uFCCLMyXYDJ-MkNilyCI5C'}
2016-07-20 17:48:28,374 wechatno_wemall.py[line: 216] INFO: 正在解析返回结果:





<!DOCTYPE html>
<link rel="stylesheet" href="/css/bind/banner.css?v=3.4.0-f5bd5" />  
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <link rel="stylesheet" href="/css/skin-nr-min.css?v=3.4.0-f5bd5">
        <link rel="stylesheet" href="/css/cpn.css?v=3.4.0-f5bd5">
        <link rel="stylesheet" type="text/css" href="/css/zepto.alert.css?v=3.4.0-f5bd5">
        <title>哎哟~出错啦~</title>
    </head>
    <body>
        <script type="text/javascript" src="/js/zepto.min.js?v=3.4.0-f5bd5" ></script>
        <script type="text/javascript" src="/js/zepto.alert.min.js?v=3.4.0-f5bd5"></script>
        <script type="text/javascript">
        Zepto(function($){
			function myAlert(content) {
		    	$.dialog({
		    		content : content,
		    		title : "alert"
		    	});
		    }
			
				
				
					myAlert("噢...出错了!请等待管理员处理,稍后重试");					
				
			
        });
        </script>
    </body>
</html>

2016-07-20 17:48:28,375 htmlparser.py[line: 28] INFO: Data 






2016-07-20 17:48:28,376 testcase.py[line: 69] ERROR: 步骤[1]执行出错,停止执行用例[id=102, name=test-n-点击立即购买按钮]
2016-07-20 17:48:28,376 testcase.py[line: 75] INFO: 正在更新步骤执行结果
2016-07-20 17:48:28,376 mydb.py[line: 63] INFO: query：UPDATE case_step_report_tb SET runresult="Error",reason="Traceback (most recent call last):  File E:\Projects\interface_project\interface\wechatno_wemall.py, line 220, in test_to_buy_goods    parser.feed(response)  File D:\Program Files\python33\lib\html\parser.py, line 145, in feed    self.goahead(0)  File D:\Program Files\python33\lib\html\parser.py, line 200, in goahead    k = self.parse_html_declaration(i)  File D:\Program Files\python33\lib\html\parser.py, line 290, in parse_html_declaration    self.handle_decl(rawdata[i+2:gtpos])  File E:\Projects\interface_project\htmlparser.py, line 47, in handle_decl    logger.info(Decl： % data)TypeError: not all arguments converted during string formatting", protocol_method="get", runtime="2016-07-20 17:48:28" WHERE executed_history_id = 20160720174827 AND testcase_id = 102 AND step_id = 104 AND project='pj_wecharno' AND testplan='无计划'
2016-07-20 17:48:28,378 testsuite.py[line: 67] INFO: 正在更新用例执行结果
2016-07-20 17:48:28,379 mydb.py[line: 63] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2016-07-20 17:48:28" WHERE executed_history_id = 20160720174827 and testcase_id = 102 AND project='pj_wecharno' AND testplan='无计划'
2016-07-20 17:48:28,380 testsuite.py[line: 74] INFO: 测试套件[id=79 ,name=微商城-模拟点击页面跳转]已执行完
2016-07-20 17:48:28,380 main.py[line: 229] INFO: 接口测试已执行完成，正在关闭数据库连接
2016-07-20 17:48:28,381 htmlreporter.py[line: 37] INFO: 正在查询测试用例总数
2016-07-20 17:48:28,381 mydb.py[line: 77] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20160720174827',)
2016-07-20 17:48:28,382 htmlreporter.py[line: 43] INFO: 正在查询执行通过的用例数
2016-07-20 17:48:28,382 mydb.py[line: 77] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20160720174827')
2016-07-20 17:48:28,383 htmlreporter.py[line: 49] INFO: 正在查询执行失败的用例数
2016-07-20 17:48:28,383 mydb.py[line: 77] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20160720174827')
2016-07-20 17:48:28,384 htmlreporter.py[line: 55] INFO: 正在查询执行出错的用例数
2016-07-20 17:48:28,384 mydb.py[line: 77] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20160720174827')
2016-07-20 17:48:28,385 htmlreporter.py[line: 61] INFO: 正在查询未执行的用例数
2016-07-20 17:48:28,385 mydb.py[line: 77] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20160720174827')
2016-07-20 17:48:28,385 htmlreporter.py[line: 72] INFO: 正在查询已运的测试计划
2016-07-20 17:48:28,386 mydb.py[line: 93] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20160720174827',)
2016-07-20 17:48:28,387 htmlreporter.py[line: 98] INFO: 正在查询测试计划[project：pj_wecharno, testplan：无计划]的测试用例执行结果
2016-07-20 17:48:28,387 mydb.py[line: 93] INFO: query：SELECT id, executed_history_id, testcase_id, testcase_name,testsuit, testplan, project, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s ORDER BY id ASC  data：('pj_wecharno', '无计划', '20160720174827')
2016-07-20 17:48:28,388 htmlreporter.py[line: 105] INFO: 正在记录测试测试计划[project：pj_wecharno, testplan：无计划]的测试用例运行结果到测试报告
2016-07-20 17:48:28,388 htmlreporter.py[line: 115] INFO: 正在查询已运的测试计划
2016-07-20 17:48:28,388 mydb.py[line: 93] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20160720174827',)
2016-07-20 17:48:28,389 htmlreporter.py[line: 127] INFO: 正在查询测试计划[project：pj_wecharno, testplan：无计划]已运行的测试用例
2016-07-20 17:48:28,389 mydb.py[line: 93] INFO: query：SELECT testcase_id, testcase_name, project, testplan FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id ORDER BY id ASC  data：('pj_wecharno', '无计划', '20160720174827')
2016-07-20 17:48:28,390 htmlreporter.py[line: 158] INFO: 正在查询测试用例[id=80]步骤运行结果
2016-07-20 17:48:28,391 mydb.py[line: 93] INFO: query：SELECT step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, cstb.runresult, reason, cstb.runtime FROM case_step_report_tb AS cstb JOIN testcase_report_tb AS tstb ON cstb.testcase_id =  tstb.testcase_id AND cstb.project=tstb.project AND cstb.testplan=tstb.testplan AND cstb.executed_history_id = tstb.executed_history_id WHERE tstb.project= %s AND tstb.testplan=%s AND cstb.testcase_id=%s AND cstb.executed_history_id = %s  data：('pj_wecharno', '无计划', 80, '20160720174827')
2016-07-20 17:48:28,392 htmlreporter.py[line: 158] INFO: 正在查询测试用例[id=102]步骤运行结果
2016-07-20 17:48:28,392 mydb.py[line: 93] INFO: query：SELECT step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, cstb.runresult, reason, cstb.runtime FROM case_step_report_tb AS cstb JOIN testcase_report_tb AS tstb ON cstb.testcase_id =  tstb.testcase_id AND cstb.project=tstb.project AND cstb.testplan=tstb.testplan AND cstb.executed_history_id = tstb.executed_history_id WHERE tstb.project= %s AND tstb.testplan=%s AND cstb.testcase_id=%s AND cstb.executed_history_id = %s  data：('pj_wecharno', '无计划', 102, '20160720174827')
2016-07-20 17:48:28,394 htmlreporter.py[line: 177] INFO: 正在设置测试报告结果文件名
2016-07-20 17:48:28,394 htmlreporter.py[line: 187] INFO: 测试报告文件名所在路径为：E:\\Projects\\report\\test_report20160720174827.html
2016-07-20 17:48:28,394 htmlreporter.py[line: 180] INFO: 正在生成测试报告
2016-07-20 17:48:28,396 main.py[line: 252] INFO: 生成测试报告成功
2016-07-20 17:48:28,710 main.py[line: 259] INFO: E:\\Projects\\report\\test_report20160720174827.html
2016-07-20 17:48:28,711 main.py[line: 262] INFO: 正在发送测试报告邮件...
2016-07-20 17:48:28,711 main.py[line: 266] INFO: 发送邮件成功
2016-07-20 18:34:14,790 globalpy.py[line: 14] INFO: 正在初始化数据库[名称：TESTDB]对象
2016-07-20 18:34:14,800 globalpy.py[line: 17] INFO: 正在初始化数据库[名称：SAOFUDB]对象
2016-07-20 18:34:14,806 globalpy.py[line: 20] INFO: 正在获取testlink
2016-07-20 18:34:14,881 main.py[line: 60] INFO: 正在创建测试用例报告报表
2016-07-20 18:34:14,882 mydb.py[line: 37] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime)
2016-07-20 18:34:14,884 main.py[line: 63] INFO: 正在创建测试步骤报告报表
2016-07-20 18:34:14,885 mydb.py[line: 37] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2016-07-20 18:34:14,887 main.py[line: 66] INFO: 正在读取运行模式配置
2016-07-20 18:34:14,889 main.py[line: 187] INFO: 按套件运行测试
2016-07-20 18:34:14,889 main.py[line: 189] INFO: 已获取配置的套件id列表：[79]
2016-07-20 18:34:15,277 main.py[line: 205] INFO: 正在读取套件[id=79，name=微商城-模拟点击页面跳转]的协议，host，端口配置...
2016-07-20 18:34:15,278 main.py[line: 223] INFO: 正在执行测试套件[id=79 ,name=微商城-模拟点击页面跳转]
2016-07-20 18:34:15,278 testsuite.py[line: 42] INFO: 正在获取套件[id=79，name=微商城-模拟点击页面跳转]的测试用例...
2016-07-20 18:34:15,534 testsuite.py[line: 60] INFO: 记录测试用例到到测试用例报表
2016-07-20 18:34:15,535 mydb.py[line: 50] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720183414', '80', 'test-n-点击商品', '微商城-模拟点击页面跳转', '无计划', 'pj_wecharno', 'Block', '')
2016-07-20 18:34:15,536 testsuite.py[line: 63] INFO: 开始执行测试用例[id=80，name=test-n-点击商品]
2016-07-20 18:34:15,537 testcase.py[line: 48] INFO: 记录测试步骤到测试步骤报告表
2016-07-20 18:34:15,537 mydb.py[line: 50] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720183414', '80', 'test-n-点击商品', '无计划', 'pj_wecharno', 82, 1, '', 'http', 'm.test.saofu.cn', '80', '{"class":"Goods","function":"test_click_goods","method":"get","url":"/goods/item?","params":{"id":26838, "serial":"var"}}', '{"status":200}', 'Block', '', '')
2016-07-20 18:34:15,538 testcase.py[line: 60] INFO: 开始执行步骤操作[第1步]
2016-07-20 18:34:15,538 casestep.py[line: 64] INFO: 调用的方法为：Goods.test_click_goods
2016-07-20 18:34:15,538 wechatno_wemall.py[line: 89] INFO: 正在发起GET请求...
2016-07-20 18:34:15,539 httpprotocol.py[line: 50] INFO: 发起的请求为：http://m.test.saofu.cn:80/goods/item?serial=10549840601068216320&id=26838
2016-07-20 18:34:15,539 httpprotocol.py[line: 51] INFO: {'Cookie': '10549840601068216320=ous64uFCCLMyXYDJ-MkNilyCI5C'}
2016-07-20 18:34:15,742 wechatno_wemall.py[line: 93] INFO: 正在解析返回结果:





<!DOCTYPE html>
<link rel="stylesheet" href="/css/bind/banner.css?v=3.4.0-f5bd5" />  
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport"
	content="width=device-width, initial-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no">
<meta http-equiv="Expires" CONTENT="0">
<meta http-equiv="Cache-Control" CONTENT="no-cache">
<meta http-equiv="Pragma" CONTENT="no-cache">
<title>微商城</title>
<link rel="stylesheet" href="/css/mall/pure.css?v=3.4.0-f5bd5">
<link rel="stylesheet" href="/css/mall/grids-core.css?v=3.4.0-f5bd5">
<link rel="stylesheet" href="/css/mall/zepto.alert.css?v=3.4.0-f5bd5">
<script type="text/javascript" src="/js/TouchSlide.1.1.js?v=3.4.0-f5bd5"></script>
</head>
<style type="text/css">
* {
	margin: 0;
	padding: 0;
}

html {
	color: #626262;
}

a {
	text-decoration: none;
}

ol,ul {
	list-style: outside none none;
}

.left {
	float: left;
}

.right {
	float: right;
}

.in-block {
	display: inline-block;
}

.orange {
	color: #c58d04;
}

.grey {
	color: #adadad;
}

.bg-color {
	background: #ececec;
}

#wrapper {
	width: 100%;
	margin: 0 auto;
}

.header {
	width: 100%;
	overflow: hidden;
	border-bottom: 1px solid #eaeaea;
}

.top {
	width: 90%;
	margin: 0 auto;
	padding-bottom: 1em;
}

.top p {
	margin: 0.5em 0;
	font-size: 0.8em;
}
.top>p:first-child{
	font-size:1.1em;
}

.fonts {
	font-size: 1em !important;
	margin: 0.8em 0 !important;
}


.jian {
	display: inline-block;
	width: 1.5em;
	height: 1.5em;
	line-height: 1.5em;
	border: 1px solid #d1d1d1;
	border-right: 0 none;
	border-top-left-radius: 4px;
	border-bottom-left-radius: 4px;
	text-align: center;
	margin-left:0.4em;
}

.val {
	background: #fff;
	display: inline-block;
	width: 3.5em;
	height: 1.5em;
	line-height: 1.5em;
	border: 1px solid #d1d1d1;
	text-align: center;
}

.jia {
	display: inline-block;
	width: 1.5em;
	height: 1.5em;
	line-height: 1.5em;
	border: 1px solid #d1d1d1;
	border-left: 0 none;
	border-top-right-radius: 4px;
	border-bottom-right-radius: 4px;
	text-align: center;
}

.button {
	width: 47%;
	height: 3em;
	color: #fff;
	border: none;
	border-radius: 4px;
}

.addbtn {
	background: #edb23e;
	margin-right: 3%;
}

.buybtn {
	background: #f96364;
}

.bottom {
	border-top: 0.5em solid #eeeeee;
	padding-bottom: 3em;
    position: relative;
    width:100%;
}

.bottom .bottom-details{
	width:100%;	
	word-break:break-all;
	overflow-x: hidden; 
}

.bottom-details h1,.bottom-details h2,.bottom-details h3,.bottom-details h4,.bottom-details h5{
	word-break:break-all;
}

.bottom > p:first-child {
	text-indent: 1em;
}

.bottom > p img{
    width: 1em;
    position: absolute;
    top:0.8em;
    right: 1em;
}

.bottom-details p {
	text-indent: 1em;
	word-break:break-all;
}

.inline-padding {
	display: inline-block;
	padding-left: 0.8em;
}

.inline-paddings {
	display: inline-block;
	padding-left: 1.6em;
}

.footer {
	width: 100%;
	height: 3em;
	position: fixed;
	bottom: 0;
	background: #fff;
	color: #b6b6b6;
	text-align: center;
	border-top: 1px solid #eaeaea;
}

.footer a {
	color: #626262;
	display: inline-block;
	height:1em;
	line-height:1em;
	padding-top: 1em;
	padding-bottom: 1em;
}
.footer .inline-paddings-right{
    padding-top: 1em;
    float: right;
}
.footer img {
	display: inline-block;
	width: 1em;
}

.top-bg{
    position: fixed;
    bottom: 3.5em;
    right: 1em;
    width: 2em;
    display: none;
    filter:alpha(opacity=40);       /* IE */
    -moz-opacity:0.4;              /* Moz + FF */
    opacity: 0.4;     
}
.spec{
    display: inline-block;
    margin: 0 1em 0.8em 0;
    font-size:0.7em;
    padding:0.3em 1em;
    border:1px solid #ccc;
    border-radius:3px;
    cursor:pointer;
}
.fonts a.active{
    border: 2px solid #d2b57b;
}
.guige{
    float: left;
    width: 40px;
}
.guige-detail{
    margin-left: 40px;
}
.guige-detail a[disabled]{
    background: none repeat scroll 0 0 #fff;
    color: #e3e3e3;
    cursor: default;
}
/* 本例子css -------------------------------------- */
.slideBox {
	position: relative;
	width: 100%;
	height: 240px;
	overflow: hidden;
}

.slideBox .hd {
	position: absolute;
	width: 100%;
	height: 27px;
	bottom: 0;
	left: 0;
	z-index: 1;
}

.slideBox .hd img {
	width: 11px;
}

.slideBox .bd {
	position: relative;
	z-index: 0;
}

.slideBox .bd li {
	position: relative;
}

.slideBox .bd li img {
	width: 100%;
	height: 240px;
	display: block;
}

.slideBox .bd li a {
	-webkit-tap-highlight-color: rgba(0, 0, 0, 0); /* 取消链接高亮 */
}

.slideBox .hd a {
	display: block;
	width: auto;
	position: absolute;
	bottom: 0.5em;
	right: 0.5em;
	padding: 0.1em 0.7em;
	text-align: center;
	color: #fff;
	background-color: rgba(0, 0, 0, 0.6);
	border-radius: 4px;
}
.slideBox>.a-img{
    position: fixed;
    top:1em;
    right: 0.5em;
    display: block;
    width:2em;
    height: 2em;
    border-radius: 2em;
    background-color: rgba(0, 0, 0, 0.6); 
    z-index: 2;
}
.slideBox>.a-img>img{
    width: 1em;            
    position: absolute;
    top:50%;
    left: 50%;
    margin-top:-0.5em;
    margin-left: -0.5em;
}
.carts{
	position: relative;
}
.cartNum{                      
    display: inline-block;
    width: 1.2em;
    height: 1.2em;
    line-height:1.2em;
    border-radius: 1.5em;
    background:#ff0000;  
    position: absolute;
    right: -0.7em;
    top: 0.3em;
    color: #fff;
}
#soldCount{
	float: right; 
	font-size: 0.8em; 
	padding-top: 0.3em;
	color:#adadad;
}
.freight{
	font-size:0.8em;
	color:#adadad;
}
.standard_sku{
	font-size:0.9em;
	color:#adadad;
}
@media all and (max-width:320px){
	.slideBox{
		height:240px;
	}
	.slideBox .bd li img {
		height:240px;
	}
}
@media all and (min-width:321px) and (max-width:360px){
	.slideBox{
		height:270px;
	}
	.slideBox .bd li img {
		height:270px;
	}
}
@media all and (min-width:361px) and (max-width:375px){
	.slideBox{
		height:281px;
	}
	.slideBox .bd li img {
		height:281px;
	}
}
@media all and (min-width:376px) and (max-width:384px){
	.slideBox{
		height:288px;
	}
	.slideBox .bd li img {
		height:288px;
	}
}
@media all and (min-width:385px) and (max-width:414px){
	.slideBox{
		height:311px;
	}
	.slideBox .bd li img {
		height:311px;
	}
}
@media all and (min-width:415px){
	.slideBox{
		height:360px;
	}
	.slideBox .bd li img {
		height:360px;
	}
}
</style>
<body>
	<div id="wrapper">
		<div class="header">
			<div id="slideBox" class="slideBox">
				<a class="a-img" href="/cart?serial=10549840601068216320">
                  <img src="/images/mall/detail_cart_icon.png?v=3.4.0-f5bd5" class="pure-img">
              	</a>
				<div class="bd">
					<ul>
						
							
								<li><img src="http://res.test.saofu.cn/saofu/upload/image/2016/07/18/352c9a44-5fe7-4546-9786-563d8700a773.jpg" class="pure-img" /></li>
							
						
					</ul>
				</div>
				<div class="hd">
					<a class="pageState"></a>
				</div>
			</div>
		</div>		
		<div class="content">
			<div class="top">
				<p>
					接口-测试商品1
				</p>
				<p class="grey">
					接口测试专用,烦请勿删,勿操作
				</p>				
				<p class="fonts">
					单价:
					<span class="orange">
					
					
						
							￥0.01
						
						
					
					
					</span>
					<span id = "soldCount">销量:6件</span>
				</p>
				
					<p class="freight">运费:<span>4.00元</span></p>
				
				
				<p class="fonts shuliang">
					数量:<span class="jian">-</span><span class="val">1</span><span class="jia">+</span>
					
						
						
							<span class="standard_sku">(库存：999994件)</span>
						
						
						
					
				</p> 
				<div>
					<input type="button" class="button addbtn" value="加入购物车" />
					<input type="button" class="button buybtn" value="立即购买" />
				</div>
			</div>
			<div class="bottom">
				<p>图文详情<img src="/images/mall/down.png?v=3.4.0-f5bd5" class="pure-img"></p>
				<div class="bottom-details">
					<p>											</p><p><br/></p><p><br/></p><p><br/></p><p>接口测试专用商品,商品详情简介<br/></p>
				</div>
			</div>
		</div>		
	</div>
	<img src="/images/mall/top_bg.png?v=3.4.0-f5bd5" class="pure-img top-bg">
	<script type="text/javascript" src="/js/zepto.min.js?v=3.4.0-f5bd5"></script>
    <script type="text/javascript" src="/js/touch.js?v=3.4.0-f5bd5"></script>
    <script type="text/javascript" src="/js/mall/zepto.alert.js?v=3.4.0-f5bd5"></script>
	<script type="text/javascript" src="/js/mall/mall.js?v=3.4.0-f5bd5"></script>
	<script type="text/javascript">
			
	var priceLimita = $(".orange").text();
	var soldCounta = $("#soldCount").text();
	var skua = $(".standard_sku").text();
	
            // 滚动窗口来判断按钮显示或隐藏
            $(window).scroll(function() {
                if ($(this).scrollTop() > 120) {
                    $('.top-bg').show(100);
                } else {
                    $('.top-bg').hide(100);
                }
            });
            
            function choose(obj,price,sku,standardSoldCount){
            	if(!$(obj).attr('disabled')){
            	if($(obj).hasClass('active')){
            		$(".orange").text(priceLimita);
                	$("#soldCount").text(soldCounta);
                	$(".standard_sku").text(skua);
                	 $(obj).removeClass('active');
            	}else{
	            	$(".standard_sku").text("(库存:"+sku+"件)");
	            	$(".orange").text("￥"+price);
	            	$("#soldCount").text("销量:"+standardSoldCount+"件");
	            	$(".spec").removeClass('active');
                    $(obj).addClass('active');
            	}
            	}
            }
            
           
            
            $(function(){
            	/* $(".spec").tap(function(){
                    if(!$(this).attr('disabled')){
                        if($(this).hasClass('active')){
                            $(this).removeClass('active');
                            
                        }else{
                        	
                        }
                    }                    
                }); */
                
            	TouchSlide({
    				slideCell : "#slideBox",
    				mainCell : ".bd ul",
    				effect : "leftLoop",
    				pageStateCell : ".pageState"
    			});            	            	
				
            	$(".bottom-details img").width($(".top").width());
            });
            
            // jQuery实现动画滚动
            $('.top-bg').click(function(event) {
                event.preventDefault();
                $('html, body').scrollTop(0);
            });
			
			$(".bottom > p img").click(function(){
                $(this).parent().next().toggle();
                if($(this).parent().next().css("display")=="block"){
                    $(this).attr("src","/images/mall/down.png");
                }else{
                    $(this).attr("src","/images/mall/up.png");
                }
            });
            
            $(".jia").click(function(){
            	var val = $(this).siblings(".val");
            	var count = parseInt(val.text());
                if (isNaN(count)) {
                	count = 1;
                } else {
                	count += 1;
                }
                val.text(count);
            });
            $(".jian").click(function(){
            	var val = $(this).siblings(".val");
            	var count = parseInt(val.text());
                if (isNaN(count) || count <= 1) {
                	count = 1;
                } else {
                	count -= 1;
                }
                val.text(count);
            });
            
            $(".addbtn").click(function(event){
            	if($(this).prop("disabled") == true)
            		return false;
            	var params = {
   					mallGoodsId : "26838",
   					standardId : standardId,
   					amount : $(".val").text(),
   					serial : "10549840601068216320",
   					openId : "ous64uFCCLMyXYDJ-MkNilyCI5C"
   				};
            	
            	var standard = 1;
            	if(standard == 2 && $(".active").length < 1){
    				doAlert("no", "请选择商品的规格");
    				return;
    			}
            	if(standard == 2){
            		var standardId = $(".active").attr("data");
    				params.standardId = standardId;
            	}
            	$.post("/addtocart", params, function(result){
            		if (null == result || !result.success) {
            			toast(result.message);
    					return;
    				}
    				//更新购物车数量
    				/* var cartNum = $(".cartNum").text();
    				if (null == cartNum || "" == cartNum || typeof (cartNum) == undefined) {
    					$(".carts").append("<span class='cartNum'>1</span>");
    				} else {
    					if (null != result.attach && result.attach > 0) {
    						$(".cartNum").text(result.attach);
    					}
    				} */
    				toast("已经成功加入购物车");
            	});
            });
		$(".buybtn").click(function(event) {
			if($(this).prop("disabled") == true)
        		return false;
			$(this).attr("disabled","disabled");
			var standard = 1;
        	if(standard == 2 && $(".active").length < 1){
				doAlert("no", "请选择商品的规格");
				$(this).removeAttr("disabled");
				return;
        	}
        	if(standard == 2){
        		var standardId = $(".active").attr("data");
        		window.location.href = "/mall/tobuy/1?mallGoodsId=26838&amount=" + $(".val").text() + "&type=1&serial=10549840601068216320&standardId="+standardId;
        		return;
        	}
			window.location.href = "/mall/tobuy/1?mallGoodsId=26838&amount=" + $(".val").text() + "&type=1&serial=10549840601068216320";
		});
	</script>
</body>
</html>
<!--加入判断用户是否关注公众号功能 add by lipengfei at 2015-11-9  -->
  	
	<script type="text/javascript" src="/js/bind/banner.js?v=3.4.0-f5bd5"></script>
	<script type="text/javascript">
		$(function() {
			//var SHOP_SERIAL = getCookie("SHOP_SERIAL");
			var SHOP_SERIAL = "10549840601068216320";
			if(null != SHOP_SERIAL && SHOP_SERIAL != ""){
				$.ajax({
					url : '/saofu_mobile/checkUserBindStatus',
					data : {
						"serial" : SHOP_SERIAL
					},
					type : 'post',
					cache : false,
					dataType : 'json',
					success : function(data) {
						if (data != null) {
							var guildFocusStr = data.guildFocusStr;
							if(guildFocusStr != null && guildFocusStr == "1"){
								var hasBindedShop = data.hasBindedShop;
								if(hasBindedShop == "0"){
									var qrName = data.QRPublicName;
									var qrUrl = data.QRCodeURL;
									if(qrName != "" && qrUrl != ""){
										var params = qrName+"**"+qrUrl;
										followModule(params);
									}
								}
							}
						} 
					},
					error : function() {
					}
				});
			}
		});
				
	</script>

2016-07-20 18:34:15,756 wechatno_wemall.py[line: 96] INFO: 正在解析返回结果:200
2016-07-20 18:34:15,757 testcase.py[line: 98] INFO: 正在更新步骤执行结果
2016-07-20 18:34:15,758 mydb.py[line: 63] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2016-07-20 18:34:15" WHERE executed_history_id = 20160720183414 AND testcase_id = 80 AND step_id = 82 AND project='pj_wecharno' AND testplan='无计划'
2016-07-20 18:34:15,767 testcase.py[line: 101] INFO: 测试用例[id=80, name=test-n-点击商品]执行成功
2016-07-20 18:34:15,767 testsuite.py[line: 67] INFO: 正在更新用例执行结果
2016-07-20 18:34:15,767 mydb.py[line: 63] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2016-07-20 18:34:15" WHERE executed_history_id = 20160720183414 and testcase_id = 80 AND project='pj_wecharno' AND testplan='无计划'
2016-07-20 18:34:15,946 testsuite.py[line: 60] INFO: 记录测试用例到到测试用例报表
2016-07-20 18:34:15,947 mydb.py[line: 50] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720183414', '102', 'test-n-点击立即购买按钮', '微商城-模拟点击页面跳转', '无计划', 'pj_wecharno', 'Block', '')
2016-07-20 18:34:15,949 testsuite.py[line: 63] INFO: 开始执行测试用例[id=102，name=test-n-点击立即购买按钮]
2016-07-20 18:34:15,949 testcase.py[line: 48] INFO: 记录测试步骤到测试步骤报告表
2016-07-20 18:34:15,949 mydb.py[line: 50] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720183414', '102', 'test-n-点击立即购买按钮', '无计划', 'pj_wecharno', 104, 1, '', 'http', 'm.test.saofu.cn', '80', '{"class":"ToBuyGoods","function":"test_to_buy_goods","method":"get","url":"/mall/tobuy/1?","params":{"mallGoodsId":"26838","amount":1,"type":1,"serial":"var"}}', '{"status":200}', 'Block', '', '')
2016-07-20 18:34:15,950 testcase.py[line: 60] INFO: 开始执行步骤操作[第1步]
2016-07-20 18:34:15,951 casestep.py[line: 64] INFO: 调用的方法为：ToBuyGoods.test_to_buy_goods
2016-07-20 18:34:15,951 wechatno_wemall.py[line: 210] INFO: 正在发起GET请求...
2016-07-20 18:34:15,951 httpprotocol.py[line: 50] INFO: 发起的请求为：http://m.test.saofu.cn:80/mall/tobuy/1?serial=10549840601068216320&mallGoodsId=26838&amount=1&type=1
2016-07-20 18:34:15,951 httpprotocol.py[line: 51] INFO: {'Cookie': '10549840601068216320=ous64uFCCLMyXYDJ-MkNilyCI5C'}
2016-07-20 18:34:15,962 wechatno_wemall.py[line: 216] INFO: 正在解析返回结果:





<!DOCTYPE html>
<link rel="stylesheet" href="/css/bind/banner.css?v=3.4.0-f5bd5" />  
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <link rel="stylesheet" href="/css/skin-nr-min.css?v=3.4.0-f5bd5">
        <link rel="stylesheet" href="/css/cpn.css?v=3.4.0-f5bd5">
        <link rel="stylesheet" type="text/css" href="/css/zepto.alert.css?v=3.4.0-f5bd5">
        <title>哎哟~出错啦~</title>
    </head>
    <body>
        <script type="text/javascript" src="/js/zepto.min.js?v=3.4.0-f5bd5" ></script>
        <script type="text/javascript" src="/js/zepto.alert.min.js?v=3.4.0-f5bd5"></script>
        <script type="text/javascript">
        Zepto(function($){
			function myAlert(content) {
		    	$.dialog({
		    		content : content,
		    		title : "alert"
		    	});
		    }
			
				
				
					myAlert("噢...出错了!请等待管理员处理,稍后重试");					
				
			
        });
        </script>
    </body>
</html>

2016-07-20 18:34:15,963 htmlparser.py[line: 28] INFO: Data 






2016-07-20 18:34:15,965 testcase.py[line: 69] ERROR: 步骤[1]执行出错,停止执行用例[id=102, name=test-n-点击立即购买按钮]
2016-07-20 18:34:15,965 testcase.py[line: 75] INFO: 正在更新步骤执行结果
2016-07-20 18:34:15,966 mydb.py[line: 63] INFO: query：UPDATE case_step_report_tb SET runresult="Error",reason="Traceback (most recent call last):  File E:\Projects\interface_project\interface\wechatno_wemall.py, line 220, in test_to_buy_goods    parser.feed(response)  File D:\Program Files\python33\lib\html\parser.py, line 145, in feed    self.goahead(0)  File D:\Program Files\python33\lib\html\parser.py, line 200, in goahead    k = self.parse_html_declaration(i)  File D:\Program Files\python33\lib\html\parser.py, line 290, in parse_html_declaration    self.handle_decl(rawdata[i+2:gtpos])  File E:\Projects\interface_project\htmlparser.py, line 47, in handle_decl    logger.info(Decl： % data)TypeError: not all arguments converted during string formatting", protocol_method="get", runtime="2016-07-20 18:34:15" WHERE executed_history_id = 20160720183414 AND testcase_id = 102 AND step_id = 104 AND project='pj_wecharno' AND testplan='无计划'
2016-07-20 18:34:15,969 testsuite.py[line: 67] INFO: 正在更新用例执行结果
2016-07-20 18:34:15,970 mydb.py[line: 63] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2016-07-20 18:34:15" WHERE executed_history_id = 20160720183414 and testcase_id = 102 AND project='pj_wecharno' AND testplan='无计划'
2016-07-20 18:34:15,972 testsuite.py[line: 74] INFO: 测试套件[id=79 ,name=微商城-模拟点击页面跳转]已执行完
2016-07-20 18:34:15,972 main.py[line: 229] INFO: 接口测试已执行完成，正在关闭数据库连接
2016-07-20 18:34:15,973 htmlreporter.py[line: 37] INFO: 正在查询测试用例总数
2016-07-20 18:34:15,973 mydb.py[line: 77] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20160720183414',)
2016-07-20 18:34:15,975 htmlreporter.py[line: 43] INFO: 正在查询执行通过的用例数
2016-07-20 18:34:15,975 mydb.py[line: 77] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20160720183414')
2016-07-20 18:34:15,977 htmlreporter.py[line: 49] INFO: 正在查询执行失败的用例数
2016-07-20 18:34:15,977 mydb.py[line: 77] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20160720183414')
2016-07-20 18:34:15,978 htmlreporter.py[line: 55] INFO: 正在查询执行出错的用例数
2016-07-20 18:34:15,978 mydb.py[line: 77] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20160720183414')
2016-07-20 18:34:15,979 htmlreporter.py[line: 61] INFO: 正在查询未执行的用例数
2016-07-20 18:34:15,979 mydb.py[line: 77] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20160720183414')
2016-07-20 18:34:15,980 htmlreporter.py[line: 72] INFO: 正在查询已运的测试计划
2016-07-20 18:34:15,980 mydb.py[line: 93] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20160720183414',)
2016-07-20 18:34:15,981 htmlreporter.py[line: 98] INFO: 正在查询测试计划[project：pj_wecharno, testplan：无计划]的测试用例执行结果
2016-07-20 18:34:15,982 mydb.py[line: 93] INFO: query：SELECT id, executed_history_id, testcase_id, testcase_name,testsuit, testplan, project, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s ORDER BY id ASC  data：('pj_wecharno', '无计划', '20160720183414')
2016-07-20 18:34:15,983 htmlreporter.py[line: 105] INFO: 正在记录测试测试计划[project：pj_wecharno, testplan：无计划]的测试用例运行结果到测试报告
2016-07-20 18:34:15,983 htmlreporter.py[line: 115] INFO: 正在查询已运的测试计划
2016-07-20 18:34:15,983 mydb.py[line: 93] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20160720183414',)
2016-07-20 18:34:15,985 htmlreporter.py[line: 127] INFO: 正在查询测试计划[project：pj_wecharno, testplan：无计划]已运行的测试用例
2016-07-20 18:34:15,985 mydb.py[line: 93] INFO: query：SELECT testcase_id, testcase_name, project, testplan FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id ORDER BY id ASC  data：('pj_wecharno', '无计划', '20160720183414')
2016-07-20 18:34:15,986 htmlreporter.py[line: 158] INFO: 正在查询测试用例[id=80]步骤运行结果
2016-07-20 18:34:15,987 mydb.py[line: 93] INFO: query：SELECT step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, cstb.runresult, reason, cstb.runtime FROM case_step_report_tb AS cstb JOIN testcase_report_tb AS tstb ON cstb.testcase_id =  tstb.testcase_id AND cstb.project=tstb.project AND cstb.testplan=tstb.testplan AND cstb.executed_history_id = tstb.executed_history_id WHERE tstb.project= %s AND tstb.testplan=%s AND cstb.testcase_id=%s AND cstb.executed_history_id = %s  data：('pj_wecharno', '无计划', 80, '20160720183414')
2016-07-20 18:34:15,989 htmlreporter.py[line: 158] INFO: 正在查询测试用例[id=102]步骤运行结果
2016-07-20 18:34:15,989 mydb.py[line: 93] INFO: query：SELECT step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, cstb.runresult, reason, cstb.runtime FROM case_step_report_tb AS cstb JOIN testcase_report_tb AS tstb ON cstb.testcase_id =  tstb.testcase_id AND cstb.project=tstb.project AND cstb.testplan=tstb.testplan AND cstb.executed_history_id = tstb.executed_history_id WHERE tstb.project= %s AND tstb.testplan=%s AND cstb.testcase_id=%s AND cstb.executed_history_id = %s  data：('pj_wecharno', '无计划', 102, '20160720183414')
2016-07-20 18:34:15,991 htmlreporter.py[line: 177] INFO: 正在设置测试报告结果文件名
2016-07-20 18:34:15,991 htmlreporter.py[line: 187] INFO: 测试报告文件名所在路径为：E:\\Projects\\report\\test_report20160720183414.html
2016-07-20 18:34:15,991 htmlreporter.py[line: 180] INFO: 正在生成测试报告
2016-07-20 18:34:15,992 main.py[line: 252] INFO: 生成测试报告成功
2016-07-20 18:34:17,184 main.py[line: 259] INFO: E:\\Projects\\report\\test_report20160720183414.html
2016-07-20 18:34:17,184 main.py[line: 262] INFO: 正在发送测试报告邮件...
2016-07-20 18:34:17,185 main.py[line: 266] INFO: 发送邮件成功
2016-07-20 18:35:57,495 globalpy.py[line: 14] INFO: 正在初始化数据库[名称：TESTDB]对象
2016-07-20 18:35:57,505 globalpy.py[line: 17] INFO: 正在初始化数据库[名称：SAOFUDB]对象
2016-07-20 18:35:57,510 globalpy.py[line: 20] INFO: 正在获取testlink
2016-07-20 18:35:57,561 main.py[line: 60] INFO: 正在创建测试用例报告报表
2016-07-20 18:35:57,561 mydb.py[line: 37] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime)
2016-07-20 18:35:57,563 main.py[line: 63] INFO: 正在创建测试步骤报告报表
2016-07-20 18:35:57,563 mydb.py[line: 37] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2016-07-20 18:35:57,564 main.py[line: 66] INFO: 正在读取运行模式配置
2016-07-20 18:35:57,565 main.py[line: 187] INFO: 按套件运行测试
2016-07-20 18:35:57,565 main.py[line: 189] INFO: 已获取配置的套件id列表：[79]
2016-07-20 18:35:57,817 main.py[line: 205] INFO: 正在读取套件[id=79，name=微商城-模拟点击页面跳转]的协议，host，端口配置...
2016-07-20 18:35:57,818 main.py[line: 223] INFO: 正在执行测试套件[id=79 ,name=微商城-模拟点击页面跳转]
2016-07-20 18:35:57,818 testsuite.py[line: 42] INFO: 正在获取套件[id=79，name=微商城-模拟点击页面跳转]的测试用例...
2016-07-20 18:35:58,063 testsuite.py[line: 60] INFO: 记录测试用例到到测试用例报表
2016-07-20 18:35:58,063 mydb.py[line: 50] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720183557', '80', 'test-n-点击商品', '微商城-模拟点击页面跳转', '无计划', 'pj_wecharno', 'Block', '')
2016-07-20 18:35:58,065 testsuite.py[line: 63] INFO: 开始执行测试用例[id=80，name=test-n-点击商品]
2016-07-20 18:35:58,065 testcase.py[line: 48] INFO: 记录测试步骤到测试步骤报告表
2016-07-20 18:35:58,065 mydb.py[line: 50] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720183557', '80', 'test-n-点击商品', '无计划', 'pj_wecharno', 82, 1, '', 'http', 'm.test.saofu.cn', '80', '{"class":"Goods","function":"test_click_goods","method":"get","url":"/goods/item?","params":{"id":26838, "serial":"var"}}', '{"status":200}', 'Block', '', '')
2016-07-20 18:35:58,066 testcase.py[line: 60] INFO: 开始执行步骤操作[第1步]
2016-07-20 18:35:58,067 casestep.py[line: 64] INFO: 调用的方法为：Goods.test_click_goods
2016-07-20 18:35:58,067 wechatno_wemall.py[line: 89] INFO: 正在发起GET请求...
2016-07-20 18:35:58,067 httpprotocol.py[line: 50] INFO: 发起的请求为：http://m.test.saofu.cn:80/goods/item?serial=10549840601068216320&id=26838
2016-07-20 18:35:58,067 httpprotocol.py[line: 51] INFO: {'Cookie': '10549840601068216320=ous64uFCCLMyXYDJ-MkNilyCI5C'}
2016-07-20 18:35:58,232 wechatno_wemall.py[line: 93] INFO: 正在解析返回结果:





<!DOCTYPE html>
<link rel="stylesheet" href="/css/bind/banner.css?v=3.4.0-f5bd5" />  
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport"
	content="width=device-width, initial-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no">
<meta http-equiv="Expires" CONTENT="0">
<meta http-equiv="Cache-Control" CONTENT="no-cache">
<meta http-equiv="Pragma" CONTENT="no-cache">
<title>微商城</title>
<link rel="stylesheet" href="/css/mall/pure.css?v=3.4.0-f5bd5">
<link rel="stylesheet" href="/css/mall/grids-core.css?v=3.4.0-f5bd5">
<link rel="stylesheet" href="/css/mall/zepto.alert.css?v=3.4.0-f5bd5">
<script type="text/javascript" src="/js/TouchSlide.1.1.js?v=3.4.0-f5bd5"></script>
</head>
<style type="text/css">
* {
	margin: 0;
	padding: 0;
}

html {
	color: #626262;
}

a {
	text-decoration: none;
}

ol,ul {
	list-style: outside none none;
}

.left {
	float: left;
}

.right {
	float: right;
}

.in-block {
	display: inline-block;
}

.orange {
	color: #c58d04;
}

.grey {
	color: #adadad;
}

.bg-color {
	background: #ececec;
}

#wrapper {
	width: 100%;
	margin: 0 auto;
}

.header {
	width: 100%;
	overflow: hidden;
	border-bottom: 1px solid #eaeaea;
}

.top {
	width: 90%;
	margin: 0 auto;
	padding-bottom: 1em;
}

.top p {
	margin: 0.5em 0;
	font-size: 0.8em;
}
.top>p:first-child{
	font-size:1.1em;
}

.fonts {
	font-size: 1em !important;
	margin: 0.8em 0 !important;
}


.jian {
	display: inline-block;
	width: 1.5em;
	height: 1.5em;
	line-height: 1.5em;
	border: 1px solid #d1d1d1;
	border-right: 0 none;
	border-top-left-radius: 4px;
	border-bottom-left-radius: 4px;
	text-align: center;
	margin-left:0.4em;
}

.val {
	background: #fff;
	display: inline-block;
	width: 3.5em;
	height: 1.5em;
	line-height: 1.5em;
	border: 1px solid #d1d1d1;
	text-align: center;
}

.jia {
	display: inline-block;
	width: 1.5em;
	height: 1.5em;
	line-height: 1.5em;
	border: 1px solid #d1d1d1;
	border-left: 0 none;
	border-top-right-radius: 4px;
	border-bottom-right-radius: 4px;
	text-align: center;
}

.button {
	width: 47%;
	height: 3em;
	color: #fff;
	border: none;
	border-radius: 4px;
}

.addbtn {
	background: #edb23e;
	margin-right: 3%;
}

.buybtn {
	background: #f96364;
}

.bottom {
	border-top: 0.5em solid #eeeeee;
	padding-bottom: 3em;
    position: relative;
    width:100%;
}

.bottom .bottom-details{
	width:100%;	
	word-break:break-all;
	overflow-x: hidden; 
}

.bottom-details h1,.bottom-details h2,.bottom-details h3,.bottom-details h4,.bottom-details h5{
	word-break:break-all;
}

.bottom > p:first-child {
	text-indent: 1em;
}

.bottom > p img{
    width: 1em;
    position: absolute;
    top:0.8em;
    right: 1em;
}

.bottom-details p {
	text-indent: 1em;
	word-break:break-all;
}

.inline-padding {
	display: inline-block;
	padding-left: 0.8em;
}

.inline-paddings {
	display: inline-block;
	padding-left: 1.6em;
}

.footer {
	width: 100%;
	height: 3em;
	position: fixed;
	bottom: 0;
	background: #fff;
	color: #b6b6b6;
	text-align: center;
	border-top: 1px solid #eaeaea;
}

.footer a {
	color: #626262;
	display: inline-block;
	height:1em;
	line-height:1em;
	padding-top: 1em;
	padding-bottom: 1em;
}
.footer .inline-paddings-right{
    padding-top: 1em;
    float: right;
}
.footer img {
	display: inline-block;
	width: 1em;
}

.top-bg{
    position: fixed;
    bottom: 3.5em;
    right: 1em;
    width: 2em;
    display: none;
    filter:alpha(opacity=40);       /* IE */
    -moz-opacity:0.4;              /* Moz + FF */
    opacity: 0.4;     
}
.spec{
    display: inline-block;
    margin: 0 1em 0.8em 0;
    font-size:0.7em;
    padding:0.3em 1em;
    border:1px solid #ccc;
    border-radius:3px;
    cursor:pointer;
}
.fonts a.active{
    border: 2px solid #d2b57b;
}
.guige{
    float: left;
    width: 40px;
}
.guige-detail{
    margin-left: 40px;
}
.guige-detail a[disabled]{
    background: none repeat scroll 0 0 #fff;
    color: #e3e3e3;
    cursor: default;
}
/* 本例子css -------------------------------------- */
.slideBox {
	position: relative;
	width: 100%;
	height: 240px;
	overflow: hidden;
}

.slideBox .hd {
	position: absolute;
	width: 100%;
	height: 27px;
	bottom: 0;
	left: 0;
	z-index: 1;
}

.slideBox .hd img {
	width: 11px;
}

.slideBox .bd {
	position: relative;
	z-index: 0;
}

.slideBox .bd li {
	position: relative;
}

.slideBox .bd li img {
	width: 100%;
	height: 240px;
	display: block;
}

.slideBox .bd li a {
	-webkit-tap-highlight-color: rgba(0, 0, 0, 0); /* 取消链接高亮 */
}

.slideBox .hd a {
	display: block;
	width: auto;
	position: absolute;
	bottom: 0.5em;
	right: 0.5em;
	padding: 0.1em 0.7em;
	text-align: center;
	color: #fff;
	background-color: rgba(0, 0, 0, 0.6);
	border-radius: 4px;
}
.slideBox>.a-img{
    position: fixed;
    top:1em;
    right: 0.5em;
    display: block;
    width:2em;
    height: 2em;
    border-radius: 2em;
    background-color: rgba(0, 0, 0, 0.6); 
    z-index: 2;
}
.slideBox>.a-img>img{
    width: 1em;            
    position: absolute;
    top:50%;
    left: 50%;
    margin-top:-0.5em;
    margin-left: -0.5em;
}
.carts{
	position: relative;
}
.cartNum{                      
    display: inline-block;
    width: 1.2em;
    height: 1.2em;
    line-height:1.2em;
    border-radius: 1.5em;
    background:#ff0000;  
    position: absolute;
    right: -0.7em;
    top: 0.3em;
    color: #fff;
}
#soldCount{
	float: right; 
	font-size: 0.8em; 
	padding-top: 0.3em;
	color:#adadad;
}
.freight{
	font-size:0.8em;
	color:#adadad;
}
.standard_sku{
	font-size:0.9em;
	color:#adadad;
}
@media all and (max-width:320px){
	.slideBox{
		height:240px;
	}
	.slideBox .bd li img {
		height:240px;
	}
}
@media all and (min-width:321px) and (max-width:360px){
	.slideBox{
		height:270px;
	}
	.slideBox .bd li img {
		height:270px;
	}
}
@media all and (min-width:361px) and (max-width:375px){
	.slideBox{
		height:281px;
	}
	.slideBox .bd li img {
		height:281px;
	}
}
@media all and (min-width:376px) and (max-width:384px){
	.slideBox{
		height:288px;
	}
	.slideBox .bd li img {
		height:288px;
	}
}
@media all and (min-width:385px) and (max-width:414px){
	.slideBox{
		height:311px;
	}
	.slideBox .bd li img {
		height:311px;
	}
}
@media all and (min-width:415px){
	.slideBox{
		height:360px;
	}
	.slideBox .bd li img {
		height:360px;
	}
}
</style>
<body>
	<div id="wrapper">
		<div class="header">
			<div id="slideBox" class="slideBox">
				<a class="a-img" href="/cart?serial=10549840601068216320">
                  <img src="/images/mall/detail_cart_icon.png?v=3.4.0-f5bd5" class="pure-img">
              	</a>
				<div class="bd">
					<ul>
						
							
								<li><img src="http://res.test.saofu.cn/saofu/upload/image/2016/07/18/352c9a44-5fe7-4546-9786-563d8700a773.jpg" class="pure-img" /></li>
							
						
					</ul>
				</div>
				<div class="hd">
					<a class="pageState"></a>
				</div>
			</div>
		</div>		
		<div class="content">
			<div class="top">
				<p>
					接口-测试商品1
				</p>
				<p class="grey">
					接口测试专用,烦请勿删,勿操作
				</p>				
				<p class="fonts">
					单价:
					<span class="orange">
					
					
						
							￥0.01
						
						
					
					
					</span>
					<span id = "soldCount">销量:6件</span>
				</p>
				
					<p class="freight">运费:<span>4.00元</span></p>
				
				
				<p class="fonts shuliang">
					数量:<span class="jian">-</span><span class="val">1</span><span class="jia">+</span>
					
						
						
							<span class="standard_sku">(库存：999994件)</span>
						
						
						
					
				</p> 
				<div>
					<input type="button" class="button addbtn" value="加入购物车" />
					<input type="button" class="button buybtn" value="立即购买" />
				</div>
			</div>
			<div class="bottom">
				<p>图文详情<img src="/images/mall/down.png?v=3.4.0-f5bd5" class="pure-img"></p>
				<div class="bottom-details">
					<p>											</p><p><br/></p><p><br/></p><p><br/></p><p>接口测试专用商品,商品详情简介<br/></p>
				</div>
			</div>
		</div>		
	</div>
	<img src="/images/mall/top_bg.png?v=3.4.0-f5bd5" class="pure-img top-bg">
	<script type="text/javascript" src="/js/zepto.min.js?v=3.4.0-f5bd5"></script>
    <script type="text/javascript" src="/js/touch.js?v=3.4.0-f5bd5"></script>
    <script type="text/javascript" src="/js/mall/zepto.alert.js?v=3.4.0-f5bd5"></script>
	<script type="text/javascript" src="/js/mall/mall.js?v=3.4.0-f5bd5"></script>
	<script type="text/javascript">
			
	var priceLimita = $(".orange").text();
	var soldCounta = $("#soldCount").text();
	var skua = $(".standard_sku").text();
	
            // 滚动窗口来判断按钮显示或隐藏
            $(window).scroll(function() {
                if ($(this).scrollTop() > 120) {
                    $('.top-bg').show(100);
                } else {
                    $('.top-bg').hide(100);
                }
            });
            
            function choose(obj,price,sku,standardSoldCount){
            	if(!$(obj).attr('disabled')){
            	if($(obj).hasClass('active')){
            		$(".orange").text(priceLimita);
                	$("#soldCount").text(soldCounta);
                	$(".standard_sku").text(skua);
                	 $(obj).removeClass('active');
            	}else{
	            	$(".standard_sku").text("(库存:"+sku+"件)");
	            	$(".orange").text("￥"+price);
	            	$("#soldCount").text("销量:"+standardSoldCount+"件");
	            	$(".spec").removeClass('active');
                    $(obj).addClass('active');
            	}
            	}
            }
            
           
            
            $(function(){
            	/* $(".spec").tap(function(){
                    if(!$(this).attr('disabled')){
                        if($(this).hasClass('active')){
                            $(this).removeClass('active');
                            
                        }else{
                        	
                        }
                    }                    
                }); */
                
            	TouchSlide({
    				slideCell : "#slideBox",
    				mainCell : ".bd ul",
    				effect : "leftLoop",
    				pageStateCell : ".pageState"
    			});            	            	
				
            	$(".bottom-details img").width($(".top").width());
            });
            
            // jQuery实现动画滚动
            $('.top-bg').click(function(event) {
                event.preventDefault();
                $('html, body').scrollTop(0);
            });
			
			$(".bottom > p img").click(function(){
                $(this).parent().next().toggle();
                if($(this).parent().next().css("display")=="block"){
                    $(this).attr("src","/images/mall/down.png");
                }else{
                    $(this).attr("src","/images/mall/up.png");
                }
            });
            
            $(".jia").click(function(){
            	var val = $(this).siblings(".val");
            	var count = parseInt(val.text());
                if (isNaN(count)) {
                	count = 1;
                } else {
                	count += 1;
                }
                val.text(count);
            });
            $(".jian").click(function(){
            	var val = $(this).siblings(".val");
            	var count = parseInt(val.text());
                if (isNaN(count) || count <= 1) {
                	count = 1;
                } else {
                	count -= 1;
                }
                val.text(count);
            });
            
            $(".addbtn").click(function(event){
            	if($(this).prop("disabled") == true)
            		return false;
            	var params = {
   					mallGoodsId : "26838",
   					standardId : standardId,
   					amount : $(".val").text(),
   					serial : "10549840601068216320",
   					openId : "ous64uFCCLMyXYDJ-MkNilyCI5C"
   				};
            	
            	var standard = 1;
            	if(standard == 2 && $(".active").length < 1){
    				doAlert("no", "请选择商品的规格");
    				return;
    			}
            	if(standard == 2){
            		var standardId = $(".active").attr("data");
    				params.standardId = standardId;
            	}
            	$.post("/addtocart", params, function(result){
            		if (null == result || !result.success) {
            			toast(result.message);
    					return;
    				}
    				//更新购物车数量
    				/* var cartNum = $(".cartNum").text();
    				if (null == cartNum || "" == cartNum || typeof (cartNum) == undefined) {
    					$(".carts").append("<span class='cartNum'>1</span>");
    				} else {
    					if (null != result.attach && result.attach > 0) {
    						$(".cartNum").text(result.attach);
    					}
    				} */
    				toast("已经成功加入购物车");
            	});
            });
		$(".buybtn").click(function(event) {
			if($(this).prop("disabled") == true)
        		return false;
			$(this).attr("disabled","disabled");
			var standard = 1;
        	if(standard == 2 && $(".active").length < 1){
				doAlert("no", "请选择商品的规格");
				$(this).removeAttr("disabled");
				return;
        	}
        	if(standard == 2){
        		var standardId = $(".active").attr("data");
        		window.location.href = "/mall/tobuy/1?mallGoodsId=26838&amount=" + $(".val").text() + "&type=1&serial=10549840601068216320&standardId="+standardId;
        		return;
        	}
			window.location.href = "/mall/tobuy/1?mallGoodsId=26838&amount=" + $(".val").text() + "&type=1&serial=10549840601068216320";
		});
	</script>
</body>
</html>
<!--加入判断用户是否关注公众号功能 add by lipengfei at 2015-11-9  -->
  	
	<script type="text/javascript" src="/js/bind/banner.js?v=3.4.0-f5bd5"></script>
	<script type="text/javascript">
		$(function() {
			//var SHOP_SERIAL = getCookie("SHOP_SERIAL");
			var SHOP_SERIAL = "10549840601068216320";
			if(null != SHOP_SERIAL && SHOP_SERIAL != ""){
				$.ajax({
					url : '/saofu_mobile/checkUserBindStatus',
					data : {
						"serial" : SHOP_SERIAL
					},
					type : 'post',
					cache : false,
					dataType : 'json',
					success : function(data) {
						if (data != null) {
							var guildFocusStr = data.guildFocusStr;
							if(guildFocusStr != null && guildFocusStr == "1"){
								var hasBindedShop = data.hasBindedShop;
								if(hasBindedShop == "0"){
									var qrName = data.QRPublicName;
									var qrUrl = data.QRCodeURL;
									if(qrName != "" && qrUrl != ""){
										var params = qrName+"**"+qrUrl;
										followModule(params);
									}
								}
							}
						} 
					},
					error : function() {
					}
				});
			}
		});
				
	</script>

2016-07-20 18:35:58,236 htmlparser.py[line: 28] INFO: Data 






2016-07-20 18:35:58,240 testcase.py[line: 69] ERROR: 步骤[1]执行出错,停止执行用例[id=80, name=test-n-点击商品]
2016-07-20 18:35:58,240 testcase.py[line: 75] INFO: 正在更新步骤执行结果
2016-07-20 18:35:58,241 mydb.py[line: 63] INFO: query：UPDATE case_step_report_tb SET runresult="Error",reason="Traceback (most recent call last):  File E:\Projects\interface_project\interface\wechatno_wemall.py, line 96, in test_click_goods    parser.feed(response[0].decode(utf-8))  File D:\Program Files\python33\lib\html\parser.py, line 145, in feed    self.goahead(0)  File D:\Program Files\python33\lib\html\parser.py, line 200, in goahead    k = self.parse_html_declaration(i)  File D:\Program Files\python33\lib\html\parser.py, line 290, in parse_html_declaration    self.handle_decl(rawdata[i+2:gtpos])  File E:\Projects\interface_project\htmlparser.py, line 47, in handle_decl    logger.info(Decl： % data)TypeError: not all arguments converted during string formatting", protocol_method="get", runtime="2016-07-20 18:35:58" WHERE executed_history_id = 20160720183557 AND testcase_id = 80 AND step_id = 82 AND project='pj_wecharno' AND testplan='无计划'
2016-07-20 18:35:58,246 testsuite.py[line: 67] INFO: 正在更新用例执行结果
2016-07-20 18:35:58,247 mydb.py[line: 63] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2016-07-20 18:35:58" WHERE executed_history_id = 20160720183557 and testcase_id = 80 AND project='pj_wecharno' AND testplan='无计划'
2016-07-20 18:35:58,401 testsuite.py[line: 60] INFO: 记录测试用例到到测试用例报表
2016-07-20 18:35:58,401 mydb.py[line: 50] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720183557', '102', 'test-n-点击立即购买按钮', '微商城-模拟点击页面跳转', '无计划', 'pj_wecharno', 'Block', '')
2016-07-20 18:35:58,403 testsuite.py[line: 63] INFO: 开始执行测试用例[id=102，name=test-n-点击立即购买按钮]
2016-07-20 18:35:58,403 testcase.py[line: 48] INFO: 记录测试步骤到测试步骤报告表
2016-07-20 18:35:58,403 mydb.py[line: 50] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720183557', '102', 'test-n-点击立即购买按钮', '无计划', 'pj_wecharno', 104, 1, '', 'http', 'm.test.saofu.cn', '80', '{"class":"ToBuyGoods","function":"test_to_buy_goods","method":"get","url":"/mall/tobuy/1?","params":{"mallGoodsId":"26838","amount":1,"type":1,"serial":"var"}}', '{"status":200}', 'Block', '', '')
2016-07-20 18:35:58,405 testcase.py[line: 60] INFO: 开始执行步骤操作[第1步]
2016-07-20 18:35:58,406 casestep.py[line: 64] INFO: 调用的方法为：ToBuyGoods.test_to_buy_goods
2016-07-20 18:35:58,406 wechatno_wemall.py[line: 215] INFO: 正在发起GET请求...
2016-07-20 18:35:58,406 httpprotocol.py[line: 50] INFO: 发起的请求为：http://m.test.saofu.cn:80/mall/tobuy/1?serial=10549840601068216320&type=1&mallGoodsId=26838&amount=1
2016-07-20 18:35:58,406 httpprotocol.py[line: 51] INFO: {'Cookie': '10549840601068216320=ous64uFCCLMyXYDJ-MkNilyCI5C'}
2016-07-20 18:35:58,418 wechatno_wemall.py[line: 221] INFO: 正在解析返回结果:





<!DOCTYPE html>
<link rel="stylesheet" href="/css/bind/banner.css?v=3.4.0-f5bd5" />  
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <link rel="stylesheet" href="/css/skin-nr-min.css?v=3.4.0-f5bd5">
        <link rel="stylesheet" href="/css/cpn.css?v=3.4.0-f5bd5">
        <link rel="stylesheet" type="text/css" href="/css/zepto.alert.css?v=3.4.0-f5bd5">
        <title>哎哟~出错啦~</title>
    </head>
    <body>
        <script type="text/javascript" src="/js/zepto.min.js?v=3.4.0-f5bd5" ></script>
        <script type="text/javascript" src="/js/zepto.alert.min.js?v=3.4.0-f5bd5"></script>
        <script type="text/javascript">
        Zepto(function($){
			function myAlert(content) {
		    	$.dialog({
		    		content : content,
		    		title : "alert"
		    	});
		    }
			
				
				
					myAlert("噢...出错了!请等待管理员处理,稍后重试");					
				
			
        });
        </script>
    </body>
</html>

2016-07-20 18:35:58,418 htmlparser.py[line: 28] INFO: Data 






2016-07-20 18:35:58,419 testcase.py[line: 69] ERROR: 步骤[1]执行出错,停止执行用例[id=102, name=test-n-点击立即购买按钮]
2016-07-20 18:35:58,419 testcase.py[line: 75] INFO: 正在更新步骤执行结果
2016-07-20 18:35:58,419 mydb.py[line: 63] INFO: query：UPDATE case_step_report_tb SET runresult="Error",reason="Traceback (most recent call last):  File E:\Projects\interface_project\interface\wechatno_wemall.py, line 225, in test_to_buy_goods    parser.feed(response)  File D:\Program Files\python33\lib\html\parser.py, line 145, in feed    self.goahead(0)  File D:\Program Files\python33\lib\html\parser.py, line 200, in goahead    k = self.parse_html_declaration(i)  File D:\Program Files\python33\lib\html\parser.py, line 290, in parse_html_declaration    self.handle_decl(rawdata[i+2:gtpos])  File E:\Projects\interface_project\htmlparser.py, line 47, in handle_decl    logger.info(Decl： % data)TypeError: not all arguments converted during string formatting", protocol_method="get", runtime="2016-07-20 18:35:58" WHERE executed_history_id = 20160720183557 AND testcase_id = 102 AND step_id = 104 AND project='pj_wecharno' AND testplan='无计划'
2016-07-20 18:35:58,422 testsuite.py[line: 67] INFO: 正在更新用例执行结果
2016-07-20 18:35:58,423 mydb.py[line: 63] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2016-07-20 18:35:58" WHERE executed_history_id = 20160720183557 and testcase_id = 102 AND project='pj_wecharno' AND testplan='无计划'
2016-07-20 18:35:58,425 testsuite.py[line: 74] INFO: 测试套件[id=79 ,name=微商城-模拟点击页面跳转]已执行完
2016-07-20 18:35:58,425 main.py[line: 229] INFO: 接口测试已执行完成，正在关闭数据库连接
2016-07-20 18:35:58,426 htmlreporter.py[line: 37] INFO: 正在查询测试用例总数
2016-07-20 18:35:58,426 mydb.py[line: 77] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20160720183557',)
2016-07-20 18:35:58,428 htmlreporter.py[line: 43] INFO: 正在查询执行通过的用例数
2016-07-20 18:35:58,428 mydb.py[line: 77] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20160720183557')
2016-07-20 18:35:58,429 htmlreporter.py[line: 49] INFO: 正在查询执行失败的用例数
2016-07-20 18:35:58,429 mydb.py[line: 77] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20160720183557')
2016-07-20 18:35:58,430 htmlreporter.py[line: 55] INFO: 正在查询执行出错的用例数
2016-07-20 18:35:58,431 mydb.py[line: 77] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20160720183557')
2016-07-20 18:35:58,432 htmlreporter.py[line: 61] INFO: 正在查询未执行的用例数
2016-07-20 18:35:58,432 mydb.py[line: 77] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20160720183557')
2016-07-20 18:35:58,433 htmlreporter.py[line: 72] INFO: 正在查询已运的测试计划
2016-07-20 18:35:58,433 mydb.py[line: 93] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20160720183557',)
2016-07-20 18:35:58,435 htmlreporter.py[line: 98] INFO: 正在查询测试计划[project：pj_wecharno, testplan：无计划]的测试用例执行结果
2016-07-20 18:35:58,435 mydb.py[line: 93] INFO: query：SELECT id, executed_history_id, testcase_id, testcase_name,testsuit, testplan, project, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s ORDER BY id ASC  data：('pj_wecharno', '无计划', '20160720183557')
2016-07-20 18:35:58,436 htmlreporter.py[line: 105] INFO: 正在记录测试测试计划[project：pj_wecharno, testplan：无计划]的测试用例运行结果到测试报告
2016-07-20 18:35:58,436 htmlreporter.py[line: 115] INFO: 正在查询已运的测试计划
2016-07-20 18:35:58,436 mydb.py[line: 93] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20160720183557',)
2016-07-20 18:35:58,438 htmlreporter.py[line: 127] INFO: 正在查询测试计划[project：pj_wecharno, testplan：无计划]已运行的测试用例
2016-07-20 18:35:58,438 mydb.py[line: 93] INFO: query：SELECT testcase_id, testcase_name, project, testplan FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id ORDER BY id ASC  data：('pj_wecharno', '无计划', '20160720183557')
2016-07-20 18:35:58,439 htmlreporter.py[line: 158] INFO: 正在查询测试用例[id=80]步骤运行结果
2016-07-20 18:35:58,439 mydb.py[line: 93] INFO: query：SELECT step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, cstb.runresult, reason, cstb.runtime FROM case_step_report_tb AS cstb JOIN testcase_report_tb AS tstb ON cstb.testcase_id =  tstb.testcase_id AND cstb.project=tstb.project AND cstb.testplan=tstb.testplan AND cstb.executed_history_id = tstb.executed_history_id WHERE tstb.project= %s AND tstb.testplan=%s AND cstb.testcase_id=%s AND cstb.executed_history_id = %s  data：('pj_wecharno', '无计划', 80, '20160720183557')
2016-07-20 18:35:58,441 htmlreporter.py[line: 158] INFO: 正在查询测试用例[id=102]步骤运行结果
2016-07-20 18:35:58,441 mydb.py[line: 93] INFO: query：SELECT step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, cstb.runresult, reason, cstb.runtime FROM case_step_report_tb AS cstb JOIN testcase_report_tb AS tstb ON cstb.testcase_id =  tstb.testcase_id AND cstb.project=tstb.project AND cstb.testplan=tstb.testplan AND cstb.executed_history_id = tstb.executed_history_id WHERE tstb.project= %s AND tstb.testplan=%s AND cstb.testcase_id=%s AND cstb.executed_history_id = %s  data：('pj_wecharno', '无计划', 102, '20160720183557')
2016-07-20 18:35:58,443 htmlreporter.py[line: 177] INFO: 正在设置测试报告结果文件名
2016-07-20 18:35:58,443 htmlreporter.py[line: 187] INFO: 测试报告文件名所在路径为：E:\\Projects\\report\\test_report20160720183557.html
2016-07-20 18:35:58,443 htmlreporter.py[line: 180] INFO: 正在生成测试报告
2016-07-20 18:35:58,444 main.py[line: 252] INFO: 生成测试报告成功
2016-07-20 18:35:58,664 main.py[line: 259] INFO: E:\\Projects\\report\\test_report20160720183557.html
2016-07-20 18:35:58,664 main.py[line: 262] INFO: 正在发送测试报告邮件...
2016-07-20 18:35:58,664 main.py[line: 266] INFO: 发送邮件成功
2016-07-20 18:38:13,378 globalpy.py[line: 14] INFO: 正在初始化数据库[名称：TESTDB]对象
2016-07-20 18:38:13,387 globalpy.py[line: 17] INFO: 正在初始化数据库[名称：SAOFUDB]对象
2016-07-20 18:38:13,393 globalpy.py[line: 20] INFO: 正在获取testlink
2016-07-20 18:38:13,445 main.py[line: 60] INFO: 正在创建测试用例报告报表
2016-07-20 18:38:13,445 mydb.py[line: 37] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime)
2016-07-20 18:38:13,446 main.py[line: 63] INFO: 正在创建测试步骤报告报表
2016-07-20 18:38:13,446 mydb.py[line: 37] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2016-07-20 18:38:13,447 main.py[line: 66] INFO: 正在读取运行模式配置
2016-07-20 18:38:13,448 main.py[line: 187] INFO: 按套件运行测试
2016-07-20 18:38:13,448 main.py[line: 189] INFO: 已获取配置的套件id列表：[79]
2016-07-20 18:38:13,693 main.py[line: 205] INFO: 正在读取套件[id=79，name=微商城-模拟点击页面跳转]的协议，host，端口配置...
2016-07-20 18:38:13,694 main.py[line: 223] INFO: 正在执行测试套件[id=79 ,name=微商城-模拟点击页面跳转]
2016-07-20 18:38:13,694 testsuite.py[line: 42] INFO: 正在获取套件[id=79，name=微商城-模拟点击页面跳转]的测试用例...
2016-07-20 18:38:13,942 testsuite.py[line: 60] INFO: 记录测试用例到到测试用例报表
2016-07-20 18:38:13,942 mydb.py[line: 50] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720183813', '80', 'test-n-点击商品', '微商城-模拟点击页面跳转', '无计划', 'pj_wecharno', 'Block', '')
2016-07-20 18:38:13,944 testsuite.py[line: 63] INFO: 开始执行测试用例[id=80，name=test-n-点击商品]
2016-07-20 18:38:13,944 testcase.py[line: 48] INFO: 记录测试步骤到测试步骤报告表
2016-07-20 18:38:13,944 mydb.py[line: 50] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720183813', '80', 'test-n-点击商品', '无计划', 'pj_wecharno', 82, 1, '', 'http', 'm.test.saofu.cn', '80', '{"class":"Goods","function":"test_click_goods","method":"get","url":"/goods/item?","params":{"id":26838, "serial":"var"}}', '{"status":200}', 'Block', '', '')
2016-07-20 18:38:13,945 testcase.py[line: 60] INFO: 开始执行步骤操作[第1步]
2016-07-20 18:38:13,945 casestep.py[line: 64] INFO: 调用的方法为：Goods.test_click_goods
2016-07-20 18:38:13,945 wechatno_wemall.py[line: 89] INFO: 正在发起GET请求...
2016-07-20 18:38:13,945 httpprotocol.py[line: 50] INFO: 发起的请求为：http://m.test.saofu.cn:80/goods/item?serial=10549840601068216320&id=26838
2016-07-20 18:38:13,945 httpprotocol.py[line: 51] INFO: {'Cookie': '10549840601068216320=ous64uFCCLMyXYDJ-MkNilyCI5C'}
2016-07-20 18:38:14,086 htmlparser.py[line: 28] INFO: Data 






2016-07-20 18:38:14,091 testcase.py[line: 69] ERROR: 步骤[1]执行出错,停止执行用例[id=80, name=test-n-点击商品]
2016-07-20 18:38:14,092 testcase.py[line: 75] INFO: 正在更新步骤执行结果
2016-07-20 18:38:14,092 mydb.py[line: 63] INFO: query：UPDATE case_step_report_tb SET runresult="Error",reason="Traceback (most recent call last):  File E:\Projects\interface_project\interface\wechatno_wemall.py, line 96, in test_click_goods    parser.feed(response[0].decode(utf-8))  File D:\Program Files\python33\lib\html\parser.py, line 145, in feed    self.goahead(0)  File D:\Program Files\python33\lib\html\parser.py, line 200, in goahead    k = self.parse_html_declaration(i)  File D:\Program Files\python33\lib\html\parser.py, line 290, in parse_html_declaration    self.handle_decl(rawdata[i+2:gtpos])  File E:\Projects\interface_project\htmlparser.py, line 47, in handle_decl    logger.info(Decl： % data)TypeError: not all arguments converted during string formatting", protocol_method="get", runtime="2016-07-20 18:38:13" WHERE executed_history_id = 20160720183813 AND testcase_id = 80 AND step_id = 82 AND project='pj_wecharno' AND testplan='无计划'
2016-07-20 18:38:14,103 testsuite.py[line: 67] INFO: 正在更新用例执行结果
2016-07-20 18:38:14,104 mydb.py[line: 63] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2016-07-20 18:38:13" WHERE executed_history_id = 20160720183813 and testcase_id = 80 AND project='pj_wecharno' AND testplan='无计划'
2016-07-20 18:38:14,352 testsuite.py[line: 60] INFO: 记录测试用例到到测试用例报表
2016-07-20 18:38:14,352 mydb.py[line: 50] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720183813', '102', 'test-n-点击立即购买按钮', '微商城-模拟点击页面跳转', '无计划', 'pj_wecharno', 'Block', '')
2016-07-20 18:38:14,354 testsuite.py[line: 63] INFO: 开始执行测试用例[id=102，name=test-n-点击立即购买按钮]
2016-07-20 18:38:14,355 testcase.py[line: 48] INFO: 记录测试步骤到测试步骤报告表
2016-07-20 18:38:14,355 mydb.py[line: 50] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720183813', '102', 'test-n-点击立即购买按钮', '无计划', 'pj_wecharno', 104, 1, '', 'http', 'm.test.saofu.cn', '80', '{"class":"ToBuyGoods","function":"test_to_buy_goods","method":"get","url":"/mall/tobuy/1?","params":{"mallGoodsId":"26838","amount":1,"type":1,"serial":"var"}}', '{"status":200}', 'Block', '', '')
2016-07-20 18:38:14,358 testcase.py[line: 60] INFO: 开始执行步骤操作[第1步]
2016-07-20 18:38:14,358 casestep.py[line: 64] INFO: 调用的方法为：ToBuyGoods.test_to_buy_goods
2016-07-20 18:38:14,359 wechatno_wemall.py[line: 215] INFO: 正在发起GET请求...
2016-07-20 18:38:14,359 httpprotocol.py[line: 50] INFO: 发起的请求为：http://m.test.saofu.cn:80/mall/tobuy/1?amount=1&serial=10549840601068216320&mallGoodsId=26838&type=1
2016-07-20 18:38:14,360 httpprotocol.py[line: 51] INFO: {'Cookie': '10549840601068216320=ous64uFCCLMyXYDJ-MkNilyCI5C'}
2016-07-20 18:38:14,371 wechatno_wemall.py[line: 221] INFO: 正在解析返回结果:





<!DOCTYPE html>
<link rel="stylesheet" href="/css/bind/banner.css?v=3.4.0-f5bd5" />  
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <link rel="stylesheet" href="/css/skin-nr-min.css?v=3.4.0-f5bd5">
        <link rel="stylesheet" href="/css/cpn.css?v=3.4.0-f5bd5">
        <link rel="stylesheet" type="text/css" href="/css/zepto.alert.css?v=3.4.0-f5bd5">
        <title>哎哟~出错啦~</title>
    </head>
    <body>
        <script type="text/javascript" src="/js/zepto.min.js?v=3.4.0-f5bd5" ></script>
        <script type="text/javascript" src="/js/zepto.alert.min.js?v=3.4.0-f5bd5"></script>
        <script type="text/javascript">
        Zepto(function($){
			function myAlert(content) {
		    	$.dialog({
		    		content : content,
		    		title : "alert"
		    	});
		    }
			
				
				
					myAlert("噢...出错了!请等待管理员处理,稍后重试");					
				
			
        });
        </script>
    </body>
</html>

2016-07-20 18:38:14,371 htmlparser.py[line: 28] INFO: Data 






2016-07-20 18:38:14,373 testcase.py[line: 69] ERROR: 步骤[1]执行出错,停止执行用例[id=102, name=test-n-点击立即购买按钮]
2016-07-20 18:38:14,373 testcase.py[line: 75] INFO: 正在更新步骤执行结果
2016-07-20 18:38:14,373 mydb.py[line: 63] INFO: query：UPDATE case_step_report_tb SET runresult="Error",reason="Traceback (most recent call last):  File E:\Projects\interface_project\interface\wechatno_wemall.py, line 225, in test_to_buy_goods    parser.feed(response)  File D:\Program Files\python33\lib\html\parser.py, line 145, in feed    self.goahead(0)  File D:\Program Files\python33\lib\html\parser.py, line 200, in goahead    k = self.parse_html_declaration(i)  File D:\Program Files\python33\lib\html\parser.py, line 290, in parse_html_declaration    self.handle_decl(rawdata[i+2:gtpos])  File E:\Projects\interface_project\htmlparser.py, line 47, in handle_decl    logger.info(Decl： % data)TypeError: not all arguments converted during string formatting", protocol_method="get", runtime="2016-07-20 18:38:14" WHERE executed_history_id = 20160720183813 AND testcase_id = 102 AND step_id = 104 AND project='pj_wecharno' AND testplan='无计划'
2016-07-20 18:38:14,378 testsuite.py[line: 67] INFO: 正在更新用例执行结果
2016-07-20 18:38:14,378 mydb.py[line: 63] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2016-07-20 18:38:14" WHERE executed_history_id = 20160720183813 and testcase_id = 102 AND project='pj_wecharno' AND testplan='无计划'
2016-07-20 18:38:14,382 testsuite.py[line: 74] INFO: 测试套件[id=79 ,name=微商城-模拟点击页面跳转]已执行完
2016-07-20 18:38:14,382 main.py[line: 229] INFO: 接口测试已执行完成，正在关闭数据库连接
2016-07-20 18:38:14,384 htmlreporter.py[line: 37] INFO: 正在查询测试用例总数
2016-07-20 18:38:14,384 mydb.py[line: 77] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20160720183813',)
2016-07-20 18:38:14,386 htmlreporter.py[line: 43] INFO: 正在查询执行通过的用例数
2016-07-20 18:38:14,386 mydb.py[line: 77] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20160720183813')
2016-07-20 18:38:14,388 htmlreporter.py[line: 49] INFO: 正在查询执行失败的用例数
2016-07-20 18:38:14,389 mydb.py[line: 77] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20160720183813')
2016-07-20 18:38:14,391 htmlreporter.py[line: 55] INFO: 正在查询执行出错的用例数
2016-07-20 18:38:14,391 mydb.py[line: 77] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20160720183813')
2016-07-20 18:38:14,393 htmlreporter.py[line: 61] INFO: 正在查询未执行的用例数
2016-07-20 18:38:14,393 mydb.py[line: 77] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20160720183813')
2016-07-20 18:38:14,395 htmlreporter.py[line: 72] INFO: 正在查询已运的测试计划
2016-07-20 18:38:14,396 mydb.py[line: 93] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20160720183813',)
2016-07-20 18:38:14,398 htmlreporter.py[line: 98] INFO: 正在查询测试计划[project：pj_wecharno, testplan：无计划]的测试用例执行结果
2016-07-20 18:38:14,398 mydb.py[line: 93] INFO: query：SELECT id, executed_history_id, testcase_id, testcase_name,testsuit, testplan, project, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s ORDER BY id ASC  data：('pj_wecharno', '无计划', '20160720183813')
2016-07-20 18:38:14,401 htmlreporter.py[line: 105] INFO: 正在记录测试测试计划[project：pj_wecharno, testplan：无计划]的测试用例运行结果到测试报告
2016-07-20 18:38:14,402 htmlreporter.py[line: 115] INFO: 正在查询已运的测试计划
2016-07-20 18:38:14,402 mydb.py[line: 93] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20160720183813',)
2016-07-20 18:38:14,404 htmlreporter.py[line: 127] INFO: 正在查询测试计划[project：pj_wecharno, testplan：无计划]已运行的测试用例
2016-07-20 18:38:14,405 mydb.py[line: 93] INFO: query：SELECT testcase_id, testcase_name, project, testplan FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id ORDER BY id ASC  data：('pj_wecharno', '无计划', '20160720183813')
2016-07-20 18:38:14,408 htmlreporter.py[line: 158] INFO: 正在查询测试用例[id=80]步骤运行结果
2016-07-20 18:38:14,409 mydb.py[line: 93] INFO: query：SELECT step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, cstb.runresult, reason, cstb.runtime FROM case_step_report_tb AS cstb JOIN testcase_report_tb AS tstb ON cstb.testcase_id =  tstb.testcase_id AND cstb.project=tstb.project AND cstb.testplan=tstb.testplan AND cstb.executed_history_id = tstb.executed_history_id WHERE tstb.project= %s AND tstb.testplan=%s AND cstb.testcase_id=%s AND cstb.executed_history_id = %s  data：('pj_wecharno', '无计划', 80, '20160720183813')
2016-07-20 18:38:14,413 htmlreporter.py[line: 158] INFO: 正在查询测试用例[id=102]步骤运行结果
2016-07-20 18:38:14,413 mydb.py[line: 93] INFO: query：SELECT step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, cstb.runresult, reason, cstb.runtime FROM case_step_report_tb AS cstb JOIN testcase_report_tb AS tstb ON cstb.testcase_id =  tstb.testcase_id AND cstb.project=tstb.project AND cstb.testplan=tstb.testplan AND cstb.executed_history_id = tstb.executed_history_id WHERE tstb.project= %s AND tstb.testplan=%s AND cstb.testcase_id=%s AND cstb.executed_history_id = %s  data：('pj_wecharno', '无计划', 102, '20160720183813')
2016-07-20 18:38:14,416 htmlreporter.py[line: 177] INFO: 正在设置测试报告结果文件名
2016-07-20 18:38:14,416 htmlreporter.py[line: 187] INFO: 测试报告文件名所在路径为：E:\\Projects\\report\\test_report20160720183813.html
2016-07-20 18:38:14,417 htmlreporter.py[line: 180] INFO: 正在生成测试报告
2016-07-20 18:38:14,418 main.py[line: 252] INFO: 生成测试报告成功
2016-07-20 18:38:14,643 main.py[line: 259] INFO: E:\\Projects\\report\\test_report20160720183813.html
2016-07-20 18:38:14,644 main.py[line: 262] INFO: 正在发送测试报告邮件...
2016-07-20 18:38:14,644 main.py[line: 266] INFO: 发送邮件成功
2016-07-20 18:39:13,636 globalpy.py[line: 14] INFO: 正在初始化数据库[名称：TESTDB]对象
2016-07-20 18:39:13,645 globalpy.py[line: 17] INFO: 正在初始化数据库[名称：SAOFUDB]对象
2016-07-20 18:39:13,650 globalpy.py[line: 20] INFO: 正在获取testlink
2016-07-20 18:39:13,700 main.py[line: 60] INFO: 正在创建测试用例报告报表
2016-07-20 18:39:13,700 mydb.py[line: 37] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime)
2016-07-20 18:39:13,701 main.py[line: 63] INFO: 正在创建测试步骤报告报表
2016-07-20 18:39:13,702 mydb.py[line: 37] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2016-07-20 18:39:13,702 main.py[line: 66] INFO: 正在读取运行模式配置
2016-07-20 18:39:13,704 main.py[line: 187] INFO: 按套件运行测试
2016-07-20 18:39:13,704 main.py[line: 189] INFO: 已获取配置的套件id列表：[79]
2016-07-20 18:39:13,933 main.py[line: 205] INFO: 正在读取套件[id=79，name=微商城-模拟点击页面跳转]的协议，host，端口配置...
2016-07-20 18:39:13,934 main.py[line: 223] INFO: 正在执行测试套件[id=79 ,name=微商城-模拟点击页面跳转]
2016-07-20 18:39:13,934 testsuite.py[line: 42] INFO: 正在获取套件[id=79，name=微商城-模拟点击页面跳转]的测试用例...
2016-07-20 18:39:14,199 testsuite.py[line: 60] INFO: 记录测试用例到到测试用例报表
2016-07-20 18:39:14,199 mydb.py[line: 50] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720183913', '80', 'test-n-点击商品', '微商城-模拟点击页面跳转', '无计划', 'pj_wecharno', 'Block', '')
2016-07-20 18:39:14,200 testsuite.py[line: 63] INFO: 开始执行测试用例[id=80，name=test-n-点击商品]
2016-07-20 18:39:14,200 testcase.py[line: 48] INFO: 记录测试步骤到测试步骤报告表
2016-07-20 18:39:14,200 mydb.py[line: 50] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720183913', '80', 'test-n-点击商品', '无计划', 'pj_wecharno', 82, 1, '', 'http', 'm.test.saofu.cn', '80', '{"class":"Goods","function":"test_click_goods","method":"get","url":"/goods/item?","params":{"id":26838, "serial":"var"}}', '{"status":200}', 'Block', '', '')
2016-07-20 18:39:14,201 testcase.py[line: 60] INFO: 开始执行步骤操作[第1步]
2016-07-20 18:39:14,202 casestep.py[line: 64] INFO: 调用的方法为：Goods.test_click_goods
2016-07-20 18:39:14,202 wechatno_wemall.py[line: 89] INFO: 正在发起GET请求...
2016-07-20 18:39:14,202 httpprotocol.py[line: 50] INFO: 发起的请求为：http://m.test.saofu.cn:80/goods/item?id=26838&serial=10549840601068216320
2016-07-20 18:39:14,202 httpprotocol.py[line: 51] INFO: {'Cookie': '10549840601068216320=ous64uFCCLMyXYDJ-MkNilyCI5C'}
2016-07-20 18:39:14,354 htmlparser.py[line: 28] INFO: Data 






2016-07-20 18:39:14,355 htmlparser.py[line: 28] INFO: Data 

2016-07-20 18:39:14,355 htmlparser.py[line: 19] INFO: Start tag: link
2016-07-20 18:39:14,356 htmlparser.py[line: 25] INFO: End tag: link
2016-07-20 18:39:14,357 htmlparser.py[line: 28] INFO: Data   

2016-07-20 18:39:14,357 htmlparser.py[line: 28] INFO: Data 

2016-07-20 18:39:14,358 htmlparser.py[line: 19] INFO: Start tag: html
2016-07-20 18:39:14,359 htmlparser.py[line: 28] INFO: Data 

2016-07-20 18:39:14,359 htmlparser.py[line: 19] INFO: Start tag: head
2016-07-20 18:39:14,359 htmlparser.py[line: 28] INFO: Data 

2016-07-20 18:39:14,360 htmlparser.py[line: 19] INFO: Start tag: meta
2016-07-20 18:39:14,360 htmlparser.py[line: 28] INFO: Data 

2016-07-20 18:39:14,361 htmlparser.py[line: 19] INFO: Start tag: meta
2016-07-20 18:39:14,361 htmlparser.py[line: 28] INFO: Data 

2016-07-20 18:39:14,361 htmlparser.py[line: 19] INFO: Start tag: meta
2016-07-20 18:39:14,362 htmlparser.py[line: 28] INFO: Data 

2016-07-20 18:39:14,362 htmlparser.py[line: 19] INFO: Start tag: meta
2016-07-20 18:39:14,363 htmlparser.py[line: 28] INFO: Data 

2016-07-20 18:39:14,363 htmlparser.py[line: 19] INFO: Start tag: meta
2016-07-20 18:39:14,363 htmlparser.py[line: 28] INFO: Data 

2016-07-20 18:39:14,364 htmlparser.py[line: 19] INFO: Start tag: meta
2016-07-20 18:39:14,364 htmlparser.py[line: 28] INFO: Data 

2016-07-20 18:39:14,365 htmlparser.py[line: 19] INFO: Start tag: title
2016-07-20 18:39:14,366 htmlparser.py[line: 28] INFO: Data 微商城
2016-07-20 18:39:14,366 htmlparser.py[line: 25] INFO: End tag: title
2016-07-20 18:39:14,367 htmlparser.py[line: 28] INFO: Data 

2016-07-20 18:39:14,367 htmlparser.py[line: 19] INFO: Start tag: link
2016-07-20 18:39:14,367 htmlparser.py[line: 28] INFO: Data 

2016-07-20 18:39:14,368 htmlparser.py[line: 19] INFO: Start tag: link
2016-07-20 18:39:14,368 htmlparser.py[line: 28] INFO: Data 

2016-07-20 18:39:14,369 htmlparser.py[line: 19] INFO: Start tag: link
2016-07-20 18:39:14,369 htmlparser.py[line: 28] INFO: Data 

2016-07-20 18:39:14,370 htmlparser.py[line: 19] INFO: Start tag: script
2016-07-20 18:39:14,370 htmlparser.py[line: 25] INFO: End tag: script
2016-07-20 18:39:14,371 htmlparser.py[line: 28] INFO: Data 

2016-07-20 18:39:14,371 htmlparser.py[line: 25] INFO: End tag: head
2016-07-20 18:39:14,372 htmlparser.py[line: 28] INFO: Data 

2016-07-20 18:39:14,372 htmlparser.py[line: 19] INFO: Start tag: style
2016-07-20 18:39:14,374 htmlparser.py[line: 28] INFO: Data 
* {
	margin: 0;
	padding: 0;
}

html {
	color: #626262;
}

a {
	text-decoration: none;
}

ol,ul {
	list-style: outside none none;
}

.left {
	float: left;
}

.right {
	float: right;
}

.in-block {
	display: inline-block;
}

.orange {
	color: #c58d04;
}

.grey {
	color: #adadad;
}

.bg-color {
	background: #ececec;
}

#wrapper {
	width: 100%;
	margin: 0 auto;
}

.header {
	width: 100%;
	overflow: hidden;
	border-bottom: 1px solid #eaeaea;
}

.top {
	width: 90%;
	margin: 0 auto;
	padding-bottom: 1em;
}

.top p {
	margin: 0.5em 0;
	font-size: 0.8em;
}
.top>p:first-child{
	font-size:1.1em;
}

.fonts {
	font-size: 1em !important;
	margin: 0.8em 0 !important;
}


.jian {
	display: inline-block;
	width: 1.5em;
	height: 1.5em;
	line-height: 1.5em;
	border: 1px solid #d1d1d1;
	border-right: 0 none;
	border-top-left-radius: 4px;
	border-bottom-left-radius: 4px;
	text-align: center;
	margin-left:0.4em;
}

.val {
	background: #fff;
	display: inline-block;
	width: 3.5em;
	height: 1.5em;
	line-height: 1.5em;
	border: 1px solid #d1d1d1;
	text-align: center;
}

.jia {
	display: inline-block;
	width: 1.5em;
	height: 1.5em;
	line-height: 1.5em;
	border: 1px solid #d1d1d1;
	border-left: 0 none;
	border-top-right-radius: 4px;
	border-bottom-right-radius: 4px;
	text-align: center;
}

.button {
	width: 47%;
	height: 3em;
	color: #fff;
	border: none;
	border-radius: 4px;
}

.addbtn {
	background: #edb23e;
	margin-right: 3%;
}

.buybtn {
	background: #f96364;
}

.bottom {
	border-top: 0.5em solid #eeeeee;
	padding-bottom: 3em;
    position: relative;
    width:100%;
}

.bottom .bottom-details{
	width:100%;	
	word-break:break-all;
	overflow-x: hidden; 
}

.bottom-details h1,.bottom-details h2,.bottom-details h3,.bottom-details h4,.bottom-details h5{
	word-break:break-all;
}

.bottom > p:first-child {
	text-indent: 1em;
}

.bottom > p img{
    width: 1em;
    position: absolute;
    top:0.8em;
    right: 1em;
}

.bottom-details p {
	text-indent: 1em;
	word-break:break-all;
}

.inline-padding {
	display: inline-block;
	padding-left: 0.8em;
}

.inline-paddings {
	display: inline-block;
	padding-left: 1.6em;
}

.footer {
	width: 100%;
	height: 3em;
	position: fixed;
	bottom: 0;
	background: #fff;
	color: #b6b6b6;
	text-align: center;
	border-top: 1px solid #eaeaea;
}

.footer a {
	color: #626262;
	display: inline-block;
	height:1em;
	line-height:1em;
	padding-top: 1em;
	padding-bottom: 1em;
}
.footer .inline-paddings-right{
    padding-top: 1em;
    float: right;
}
.footer img {
	display: inline-block;
	width: 1em;
}

.top-bg{
    position: fixed;
    bottom: 3.5em;
    right: 1em;
    width: 2em;
    display: none;
    filter:alpha(opacity=40);       /* IE */
    -moz-opacity:0.4;              /* Moz + FF */
    opacity: 0.4;     
}
.spec{
    display: inline-block;
    margin: 0 1em 0.8em 0;
    font-size:0.7em;
    padding:0.3em 1em;
    border:1px solid #ccc;
    border-radius:3px;
    cursor:pointer;
}
.fonts a.active{
    border: 2px solid #d2b57b;
}
.guige{
    float: left;
    width: 40px;
}
.guige-detail{
    margin-left: 40px;
}
.guige-detail a[disabled]{
    background: none repeat scroll 0 0 #fff;
    color: #e3e3e3;
    cursor: default;
}
/* 本例子css -------------------------------------- */
.slideBox {
	position: relative;
	width: 100%;
	height: 240px;
	overflow: hidden;
}

.slideBox .hd {
	position: absolute;
	width: 100%;
	height: 27px;
	bottom: 0;
	left: 0;
	z-index: 1;
}

.slideBox .hd img {
	width: 11px;
}

.slideBox .bd {
	position: relative;
	z-index: 0;
}

.slideBox .bd li {
	position: relative;
}

.slideBox .bd li img {
	width: 100%;
	height: 240px;
	display: block;
}

.slideBox .bd li a {
	-webkit-tap-highlight-color: rgba(0, 0, 0, 0); /* 取消链接高亮 */
}

.slideBox .hd a {
	display: block;
	width: auto;
	position: absolute;
	bottom: 0.5em;
	right: 0.5em;
	padding: 0.1em 0.7em;
	text-align: center;
	color: #fff;
	background-color: rgba(0, 0, 0, 0.6);
	border-radius: 4px;
}
.slideBox>.a-img{
    position: fixed;
    top:1em;
    right: 0.5em;
    display: block;
    width:2em;
    height: 2em;
    border-radius: 2em;
    background-color: rgba(0, 0, 0, 0.6); 
    z-index: 2;
}
.slideBox>.a-img>img{
    width: 1em;            
    position: absolute;
    top:50%;
    left: 50%;
    margin-top:-0.5em;
    margin-left: -0.5em;
}
.carts{
	position: relative;
}
.cartNum{                      
    display: inline-block;
    width: 1.2em;
    height: 1.2em;
    line-height:1.2em;
    border-radius: 1.5em;
    background:#ff0000;  
    position: absolute;
    right: -0.7em;
    top: 0.3em;
    color: #fff;
}
#soldCount{
	float: right; 
	font-size: 0.8em; 
	padding-top: 0.3em;
	color:#adadad;
}
.freight{
	font-size:0.8em;
	color:#adadad;
}
.standard_sku{
	font-size:0.9em;
	color:#adadad;
}
@media all and (max-width:320px){
	.slideBox{
		height:240px;
	}
	.slideBox .bd li img {
		height:240px;
	}
}
@media all and (min-width:321px) and (max-width:360px){
	.slideBox{
		height:270px;
	}
	.slideBox .bd li img {
		height:270px;
	}
}
@media all and (min-width:361px) and (max-width:375px){
	.slideBox{
		height:281px;
	}
	.slideBox .bd li img {
		height:281px;
	}
}
@media all and (min-width:376px) and (max-width:384px){
	.slideBox{
		height:288px;
	}
	.slideBox .bd li img {
		height:288px;
	}
}
@media all and (min-width:385px) and (max-width:414px){
	.slideBox{
		height:311px;
	}
	.slideBox .bd li img {
		height:311px;
	}
}
@media all and (min-width:415px){
	.slideBox{
		height:360px;
	}
	.slideBox .bd li img {
		height:360px;
	}
}

2016-07-20 18:39:14,380 htmlparser.py[line: 25] INFO: End tag: style
2016-07-20 18:39:14,381 htmlparser.py[line: 28] INFO: Data 

2016-07-20 18:39:14,382 htmlparser.py[line: 19] INFO: Start tag: body
2016-07-20 18:39:14,382 htmlparser.py[line: 28] INFO: Data 
	
2016-07-20 18:39:14,383 htmlparser.py[line: 19] INFO: Start tag: div
2016-07-20 18:39:14,383 htmlparser.py[line: 28] INFO: Data 
		
2016-07-20 18:39:14,384 htmlparser.py[line: 19] INFO: Start tag: div
2016-07-20 18:39:14,384 htmlparser.py[line: 28] INFO: Data 
			
2016-07-20 18:39:14,384 htmlparser.py[line: 19] INFO: Start tag: div
2016-07-20 18:39:14,385 htmlparser.py[line: 28] INFO: Data 
				
2016-07-20 18:39:14,385 htmlparser.py[line: 19] INFO: Start tag: a
2016-07-20 18:39:14,385 htmlparser.py[line: 28] INFO: Data 
                  
2016-07-20 18:39:14,385 htmlparser.py[line: 19] INFO: Start tag: img
2016-07-20 18:39:14,386 htmlparser.py[line: 28] INFO: Data 
              	
2016-07-20 18:39:14,386 htmlparser.py[line: 25] INFO: End tag: a
2016-07-20 18:39:14,386 htmlparser.py[line: 28] INFO: Data 
				
2016-07-20 18:39:14,386 htmlparser.py[line: 19] INFO: Start tag: div
2016-07-20 18:39:14,386 htmlparser.py[line: 28] INFO: Data 
					
2016-07-20 18:39:14,386 htmlparser.py[line: 19] INFO: Start tag: ul
2016-07-20 18:39:14,386 htmlparser.py[line: 28] INFO: Data 
						
							
								
2016-07-20 18:39:14,387 htmlparser.py[line: 19] INFO: Start tag: li
2016-07-20 18:39:14,387 htmlparser.py[line: 19] INFO: Start tag: img
2016-07-20 18:39:14,387 htmlparser.py[line: 25] INFO: End tag: img
2016-07-20 18:39:14,387 htmlparser.py[line: 25] INFO: End tag: li
2016-07-20 18:39:14,387 htmlparser.py[line: 28] INFO: Data 
							
						
					
2016-07-20 18:39:14,387 htmlparser.py[line: 25] INFO: End tag: ul
2016-07-20 18:39:14,387 htmlparser.py[line: 28] INFO: Data 
				
2016-07-20 18:39:14,388 htmlparser.py[line: 25] INFO: End tag: div
2016-07-20 18:39:14,388 htmlparser.py[line: 28] INFO: Data 
				
2016-07-20 18:39:14,388 htmlparser.py[line: 19] INFO: Start tag: div
2016-07-20 18:39:14,388 htmlparser.py[line: 28] INFO: Data 
					
2016-07-20 18:39:14,388 htmlparser.py[line: 19] INFO: Start tag: a
2016-07-20 18:39:14,389 htmlparser.py[line: 25] INFO: End tag: a
2016-07-20 18:39:14,389 htmlparser.py[line: 28] INFO: Data 
				
2016-07-20 18:39:14,389 htmlparser.py[line: 25] INFO: End tag: div
2016-07-20 18:39:14,389 htmlparser.py[line: 28] INFO: Data 
			
2016-07-20 18:39:14,389 htmlparser.py[line: 25] INFO: End tag: div
2016-07-20 18:39:14,389 htmlparser.py[line: 28] INFO: Data 
		
2016-07-20 18:39:14,390 htmlparser.py[line: 25] INFO: End tag: div
2016-07-20 18:39:14,390 htmlparser.py[line: 28] INFO: Data 		
		
2016-07-20 18:39:14,390 htmlparser.py[line: 19] INFO: Start tag: div
2016-07-20 18:39:14,390 htmlparser.py[line: 28] INFO: Data 
			
2016-07-20 18:39:14,390 htmlparser.py[line: 19] INFO: Start tag: div
2016-07-20 18:39:14,390 htmlparser.py[line: 28] INFO: Data 
				
2016-07-20 18:39:14,390 htmlparser.py[line: 19] INFO: Start tag: p
2016-07-20 18:39:14,391 htmlparser.py[line: 28] INFO: Data 
					接口-测试商品1
				
2016-07-20 18:39:14,391 htmlparser.py[line: 25] INFO: End tag: p
2016-07-20 18:39:14,391 htmlparser.py[line: 28] INFO: Data 
				
2016-07-20 18:39:14,391 htmlparser.py[line: 19] INFO: Start tag: p
2016-07-20 18:39:14,391 htmlparser.py[line: 28] INFO: Data 
					接口测试专用,烦请勿删,勿操作
				
2016-07-20 18:39:14,391 htmlparser.py[line: 25] INFO: End tag: p
2016-07-20 18:39:14,392 htmlparser.py[line: 28] INFO: Data 				
				
2016-07-20 18:39:14,392 htmlparser.py[line: 19] INFO: Start tag: p
2016-07-20 18:39:14,392 htmlparser.py[line: 28] INFO: Data 
					单价:
					
2016-07-20 18:39:14,393 htmlparser.py[line: 19] INFO: Start tag: span
2016-07-20 18:39:14,393 htmlparser.py[line: 28] INFO: Data 
					
					
						
							￥0.01
						
						
					
					
					
2016-07-20 18:39:14,393 htmlparser.py[line: 25] INFO: End tag: span
2016-07-20 18:39:14,393 htmlparser.py[line: 28] INFO: Data 
					
2016-07-20 18:39:14,393 htmlparser.py[line: 19] INFO: Start tag: span
2016-07-20 18:39:14,393 htmlparser.py[line: 28] INFO: Data 销量:6件
2016-07-20 18:39:14,393 htmlparser.py[line: 25] INFO: End tag: span
2016-07-20 18:39:14,394 htmlparser.py[line: 28] INFO: Data 
				
2016-07-20 18:39:14,394 htmlparser.py[line: 25] INFO: End tag: p
2016-07-20 18:39:14,394 htmlparser.py[line: 28] INFO: Data 
				
					
2016-07-20 18:39:14,394 htmlparser.py[line: 19] INFO: Start tag: p
2016-07-20 18:39:14,394 htmlparser.py[line: 28] INFO: Data 运费:
2016-07-20 18:39:14,394 htmlparser.py[line: 19] INFO: Start tag: span
2016-07-20 18:39:14,394 htmlparser.py[line: 28] INFO: Data 4.00元
2016-07-20 18:39:14,395 htmlparser.py[line: 25] INFO: End tag: span
2016-07-20 18:39:14,395 htmlparser.py[line: 25] INFO: End tag: p
2016-07-20 18:39:14,395 htmlparser.py[line: 28] INFO: Data 
				
				
				
2016-07-20 18:39:14,395 htmlparser.py[line: 19] INFO: Start tag: p
2016-07-20 18:39:14,395 htmlparser.py[line: 28] INFO: Data 
					数量:
2016-07-20 18:39:14,395 htmlparser.py[line: 19] INFO: Start tag: span
2016-07-20 18:39:14,395 htmlparser.py[line: 28] INFO: Data -
2016-07-20 18:39:14,396 htmlparser.py[line: 25] INFO: End tag: span
2016-07-20 18:39:14,396 htmlparser.py[line: 19] INFO: Start tag: span
2016-07-20 18:39:14,396 htmlparser.py[line: 28] INFO: Data 1
2016-07-20 18:39:14,396 htmlparser.py[line: 25] INFO: End tag: span
2016-07-20 18:39:14,397 htmlparser.py[line: 19] INFO: Start tag: span
2016-07-20 18:39:14,397 htmlparser.py[line: 28] INFO: Data +
2016-07-20 18:39:14,397 htmlparser.py[line: 25] INFO: End tag: span
2016-07-20 18:39:14,397 htmlparser.py[line: 28] INFO: Data 
					
						
						
							
2016-07-20 18:39:14,397 htmlparser.py[line: 19] INFO: Start tag: span
2016-07-20 18:39:14,397 htmlparser.py[line: 28] INFO: Data (库存：999994件)
2016-07-20 18:39:14,398 htmlparser.py[line: 25] INFO: End tag: span
2016-07-20 18:39:14,398 htmlparser.py[line: 28] INFO: Data 
						
						
						
					
				
2016-07-20 18:39:14,398 htmlparser.py[line: 25] INFO: End tag: p
2016-07-20 18:39:14,398 htmlparser.py[line: 28] INFO: Data  
				
2016-07-20 18:39:14,398 htmlparser.py[line: 19] INFO: Start tag: div
2016-07-20 18:39:14,398 htmlparser.py[line: 28] INFO: Data 
					
2016-07-20 18:39:14,399 htmlparser.py[line: 19] INFO: Start tag: input
2016-07-20 18:39:14,399 htmlparser.py[line: 25] INFO: End tag: input
2016-07-20 18:39:14,399 htmlparser.py[line: 28] INFO: Data 
					
2016-07-20 18:39:14,399 htmlparser.py[line: 19] INFO: Start tag: input
2016-07-20 18:39:14,399 htmlparser.py[line: 25] INFO: End tag: input
2016-07-20 18:39:14,399 htmlparser.py[line: 28] INFO: Data 
				
2016-07-20 18:39:14,400 htmlparser.py[line: 25] INFO: End tag: div
2016-07-20 18:39:14,400 htmlparser.py[line: 28] INFO: Data 
			
2016-07-20 18:39:14,400 htmlparser.py[line: 25] INFO: End tag: div
2016-07-20 18:39:14,400 htmlparser.py[line: 28] INFO: Data 
			
2016-07-20 18:39:14,400 htmlparser.py[line: 19] INFO: Start tag: div
2016-07-20 18:39:14,400 htmlparser.py[line: 28] INFO: Data 
				
2016-07-20 18:39:14,400 htmlparser.py[line: 19] INFO: Start tag: p
2016-07-20 18:39:14,401 htmlparser.py[line: 28] INFO: Data 图文详情
2016-07-20 18:39:14,401 htmlparser.py[line: 19] INFO: Start tag: img
2016-07-20 18:39:14,401 htmlparser.py[line: 25] INFO: End tag: p
2016-07-20 18:39:14,401 htmlparser.py[line: 28] INFO: Data 
				
2016-07-20 18:39:14,401 htmlparser.py[line: 19] INFO: Start tag: div
2016-07-20 18:39:14,401 htmlparser.py[line: 28] INFO: Data 
					
2016-07-20 18:39:14,402 htmlparser.py[line: 19] INFO: Start tag: p
2016-07-20 18:39:14,402 htmlparser.py[line: 28] INFO: Data 											
2016-07-20 18:39:14,402 htmlparser.py[line: 25] INFO: End tag: p
2016-07-20 18:39:14,402 htmlparser.py[line: 19] INFO: Start tag: p
2016-07-20 18:39:14,402 htmlparser.py[line: 19] INFO: Start tag: br
2016-07-20 18:39:14,402 htmlparser.py[line: 25] INFO: End tag: br
2016-07-20 18:39:14,403 htmlparser.py[line: 25] INFO: End tag: p
2016-07-20 18:39:14,403 htmlparser.py[line: 19] INFO: Start tag: p
2016-07-20 18:39:14,403 htmlparser.py[line: 19] INFO: Start tag: br
2016-07-20 18:39:14,403 htmlparser.py[line: 25] INFO: End tag: br
2016-07-20 18:39:14,439 htmlparser.py[line: 25] INFO: End tag: p
2016-07-20 18:39:14,439 htmlparser.py[line: 19] INFO: Start tag: p
2016-07-20 18:39:14,439 htmlparser.py[line: 19] INFO: Start tag: br
2016-07-20 18:39:14,439 htmlparser.py[line: 25] INFO: End tag: br
2016-07-20 18:39:14,440 htmlparser.py[line: 25] INFO: End tag: p
2016-07-20 18:39:14,440 htmlparser.py[line: 19] INFO: Start tag: p
2016-07-20 18:39:14,440 htmlparser.py[line: 28] INFO: Data 接口测试专用商品,商品详情简介
2016-07-20 18:39:14,440 htmlparser.py[line: 19] INFO: Start tag: br
2016-07-20 18:39:14,440 htmlparser.py[line: 25] INFO: End tag: br
2016-07-20 18:39:14,440 htmlparser.py[line: 25] INFO: End tag: p
2016-07-20 18:39:14,440 htmlparser.py[line: 28] INFO: Data 
				
2016-07-20 18:39:14,440 htmlparser.py[line: 25] INFO: End tag: div
2016-07-20 18:39:14,440 htmlparser.py[line: 28] INFO: Data 
			
2016-07-20 18:39:14,441 htmlparser.py[line: 25] INFO: End tag: div
2016-07-20 18:39:14,441 htmlparser.py[line: 28] INFO: Data 
		
2016-07-20 18:39:14,441 htmlparser.py[line: 25] INFO: End tag: div
2016-07-20 18:39:14,441 htmlparser.py[line: 28] INFO: Data 		
	
2016-07-20 18:39:14,441 htmlparser.py[line: 25] INFO: End tag: div
2016-07-20 18:39:14,441 htmlparser.py[line: 28] INFO: Data 
	
2016-07-20 18:39:14,441 htmlparser.py[line: 19] INFO: Start tag: img
2016-07-20 18:39:14,441 htmlparser.py[line: 28] INFO: Data 
	
2016-07-20 18:39:14,441 htmlparser.py[line: 19] INFO: Start tag: script
2016-07-20 18:39:14,442 htmlparser.py[line: 25] INFO: End tag: script
2016-07-20 18:39:14,442 htmlparser.py[line: 28] INFO: Data 
    
2016-07-20 18:39:14,442 htmlparser.py[line: 19] INFO: Start tag: script
2016-07-20 18:39:14,442 htmlparser.py[line: 25] INFO: End tag: script
2016-07-20 18:39:14,442 htmlparser.py[line: 28] INFO: Data 
    
2016-07-20 18:39:14,442 htmlparser.py[line: 19] INFO: Start tag: script
2016-07-20 18:39:14,442 htmlparser.py[line: 25] INFO: End tag: script
2016-07-20 18:39:14,442 htmlparser.py[line: 28] INFO: Data 
	
2016-07-20 18:39:14,442 htmlparser.py[line: 19] INFO: Start tag: script
2016-07-20 18:39:14,442 htmlparser.py[line: 25] INFO: End tag: script
2016-07-20 18:39:14,443 htmlparser.py[line: 28] INFO: Data 
	
2016-07-20 18:39:14,443 htmlparser.py[line: 19] INFO: Start tag: script
2016-07-20 18:39:14,443 htmlparser.py[line: 28] INFO: Data 
			
	var priceLimita = $(".orange").text();
	var soldCounta = $("#soldCount").text();
	var skua = $(".standard_sku").text();
	
            // 滚动窗口来判断按钮显示或隐藏
            $(window).scroll(function() {
                if ($(this).scrollTop() > 120) {
                    $('.top-bg').show(100);
                } else {
                    $('.top-bg').hide(100);
                }
            });
            
            function choose(obj,price,sku,standardSoldCount){
            	if(!$(obj).attr('disabled')){
            	if($(obj).hasClass('active')){
            		$(".orange").text(priceLimita);
                	$("#soldCount").text(soldCounta);
                	$(".standard_sku").text(skua);
                	 $(obj).removeClass('active');
            	}else{
	            	$(".standard_sku").text("(库存:"+sku+"件)");
	            	$(".orange").text("￥"+price);
	            	$("#soldCount").text("销量:"+standardSoldCount+"件");
	            	$(".spec").removeClass('active');
                    $(obj).addClass('active');
            	}
            	}
            }
            
           
            
            $(function(){
            	/* $(".spec").tap(function(){
                    if(!$(this).attr('disabled')){
                        if($(this).hasClass('active')){
                            $(this).removeClass('active');
                            
                        }else{
                        	
                        }
                    }                    
                }); */
                
            	TouchSlide({
    				slideCell : "#slideBox",
    				mainCell : ".bd ul",
    				effect : "leftLoop",
    				pageStateCell : ".pageState"
    			});            	            	
				
            	$(".bottom-details img").width($(".top").width());
            });
            
            // jQuery实现动画滚动
            $('.top-bg').click(function(event) {
                event.preventDefault();
                $('html, body').scrollTop(0);
            });
			
			$(".bottom > p img").click(function(){
                $(this).parent().next().toggle();
                if($(this).parent().next().css("display")=="block"){
                    $(this).attr("src","/images/mall/down.png");
                }else{
                    $(this).attr("src","/images/mall/up.png");
                }
            });
            
            $(".jia").click(function(){
            	var val = $(this).siblings(".val");
            	var count = parseInt(val.text());
                if (isNaN(count)) {
                	count = 1;
                } else {
                	count += 1;
                }
                val.text(count);
            });
            $(".jian").click(function(){
            	var val = $(this).siblings(".val");
            	var count = parseInt(val.text());
                if (isNaN(count) || count <= 1) {
                	count = 1;
                } else {
                	count -= 1;
                }
                val.text(count);
            });
            
            $(".addbtn").click(function(event){
            	if($(this).prop("disabled") == true)
            		return false;
            	var params = {
   					mallGoodsId : "26838",
   					standardId : standardId,
   					amount : $(".val").text(),
   					serial : "10549840601068216320",
   					openId : "ous64uFCCLMyXYDJ-MkNilyCI5C"
   				};
            	
            	var standard = 1;
            	if(standard == 2 && $(".active").length < 1){
    				doAlert("no", "请选择商品的规格");
    				return;
    			}
            	if(standard == 2){
            		var standardId = $(".active").attr("data");
    				params.standardId = standardId;
            	}
            	$.post("/addtocart", params, function(result){
            		if (null == result || !result.success) {
            			toast(result.message);
    					return;
    				}
    				//更新购物车数量
    				/* var cartNum = $(".cartNum").text();
    				if (null == cartNum || "" == cartNum || typeof (cartNum) == undefined) {
    					$(".carts").append("<span class='cartNum'>1</span>");
    				} else {
    					if (null != result.attach && result.attach > 0) {
    						$(".cartNum").text(result.attach);
    					}
    				} */
    				toast("已经成功加入购物车");
            	});
            });
		$(".buybtn").click(function(event) {
			if($(this).prop("disabled") == true)
        		return false;
			$(this).attr("disabled","disabled");
			var standard = 1;
        	if(standard == 2 && $(".active").length < 1){
				doAlert("no", "请选择商品的规格");
				$(this).removeAttr("disabled");
				return;
        	}
        	if(standard == 2){
        		var standardId = $(".active").attr("data");
        		window.location.href = "/mall/tobuy/1?mallGoodsId=26838&amount=" + $(".val").text() + "&type=1&serial=10549840601068216320&standardId="+standardId;
        		return;
        	}
			window.location.href = "/mall/tobuy/1?mallGoodsId=26838&amount=" + $(".val").text() + "&type=1&serial=10549840601068216320";
		});
	
2016-07-20 18:39:14,444 htmlparser.py[line: 25] INFO: End tag: script
2016-07-20 18:39:14,444 htmlparser.py[line: 28] INFO: Data 

2016-07-20 18:39:14,444 htmlparser.py[line: 25] INFO: End tag: body
2016-07-20 18:39:14,444 htmlparser.py[line: 28] INFO: Data 

2016-07-20 18:39:14,444 htmlparser.py[line: 25] INFO: End tag: html
2016-07-20 18:39:14,444 htmlparser.py[line: 28] INFO: Data 

2016-07-20 18:39:14,445 htmlparser.py[line: 33] INFO: Comment：加入判断用户是否关注公众号功能 add by lipengfei at 2015-11-9  
2016-07-20 18:39:14,445 htmlparser.py[line: 28] INFO: Data 
  	
	
2016-07-20 18:39:14,445 htmlparser.py[line: 19] INFO: Start tag: script
2016-07-20 18:39:14,445 htmlparser.py[line: 25] INFO: End tag: script
2016-07-20 18:39:14,445 htmlparser.py[line: 28] INFO: Data 
	
2016-07-20 18:39:14,445 htmlparser.py[line: 19] INFO: Start tag: script
2016-07-20 18:39:14,445 htmlparser.py[line: 28] INFO: Data 
		$(function() {
			//var SHOP_SERIAL = getCookie("SHOP_SERIAL");
			var SHOP_SERIAL = "10549840601068216320";
			if(null != SHOP_SERIAL && SHOP_SERIAL != ""){
				$.ajax({
					url : '/saofu_mobile/checkUserBindStatus',
					data : {
						"serial" : SHOP_SERIAL
					},
					type : 'post',
					cache : false,
					dataType : 'json',
					success : function(data) {
						if (data != null) {
							var guildFocusStr = data.guildFocusStr;
							if(guildFocusStr != null && guildFocusStr == "1"){
								var hasBindedShop = data.hasBindedShop;
								if(hasBindedShop == "0"){
									var qrName = data.QRPublicName;
									var qrUrl = data.QRCodeURL;
									if(qrName != "" && qrUrl != ""){
										var params = qrName+"**"+qrUrl;
										followModule(params);
									}
								}
							}
						} 
					},
					error : function() {
					}
				});
			}
		});
				
	
2016-07-20 18:39:14,445 htmlparser.py[line: 25] INFO: End tag: script
2016-07-20 18:39:14,446 htmlparser.py[line: 28] INFO: Data 

2016-07-20 18:39:14,446 wechatno_wemall.py[line: 98] INFO: [['', '\r\n\r\n\r\n\r\n\r\n\r\n'], ['', '\r\n'], ['link', '  \r\n'], ['link', '\r\n'], ['html', '\r\n'], ['head', '\r\n'], ['meta', '\r\n'], ['meta', '\r\n'], ['meta', '\r\n'], ['meta', '\r\n'], ['meta', '\r\n'], ['meta', '\r\n'], ['title', '微商城'], ['title', '\r\n'], ['link', '\r\n'], ['link', '\r\n'], ['link', '\r\n'], ['script', '\r\n'], ['script', '\r\n'], ['style', '\r\n* {\r\n\tmargin: 0;\r\n\tpadding: 0;\r\n}\r\n\r\nhtml {\r\n\tcolor: #626262;\r\n}\r\n\r\na {\r\n\ttext-decoration: none;\r\n}\r\n\r\nol,ul {\r\n\tlist-style: outside none none;\r\n}\r\n\r\n.left {\r\n\tfloat: left;\r\n}\r\n\r\n.right {\r\n\tfloat: right;\r\n}\r\n\r\n.in-block {\r\n\tdisplay: inline-block;\r\n}\r\n\r\n.orange {\r\n\tcolor: #c58d04;\r\n}\r\n\r\n.grey {\r\n\tcolor: #adadad;\r\n}\r\n\r\n.bg-color {\r\n\tbackground: #ececec;\r\n}\r\n\r\n#wrapper {\r\n\twidth: 100%;\r\n\tmargin: 0 auto;\r\n}\r\n\r\n.header {\r\n\twidth: 100%;\r\n\toverflow: hidden;\r\n\tborder-bottom: 1px solid #eaeaea;\r\n}\r\n\r\n.top {\r\n\twidth: 90%;\r\n\tmargin: 0 auto;\r\n\tpadding-bottom: 1em;\r\n}\r\n\r\n.top p {\r\n\tmargin: 0.5em 0;\r\n\tfont-size: 0.8em;\r\n}\r\n.top>p:first-child{\r\n\tfont-size:1.1em;\r\n}\r\n\r\n.fonts {\r\n\tfont-size: 1em !important;\r\n\tmargin: 0.8em 0 !important;\r\n}\r\n\r\n\r\n.jian {\r\n\tdisplay: inline-block;\r\n\twidth: 1.5em;\r\n\theight: 1.5em;\r\n\tline-height: 1.5em;\r\n\tborder: 1px solid #d1d1d1;\r\n\tborder-right: 0 none;\r\n\tborder-top-left-radius: 4px;\r\n\tborder-bottom-left-radius: 4px;\r\n\ttext-align: center;\r\n\tmargin-left:0.4em;\r\n}\r\n\r\n.val {\r\n\tbackground: #fff;\r\n\tdisplay: inline-block;\r\n\twidth: 3.5em;\r\n\theight: 1.5em;\r\n\tline-height: 1.5em;\r\n\tborder: 1px solid #d1d1d1;\r\n\ttext-align: center;\r\n}\r\n\r\n.jia {\r\n\tdisplay: inline-block;\r\n\twidth: 1.5em;\r\n\theight: 1.5em;\r\n\tline-height: 1.5em;\r\n\tborder: 1px solid #d1d1d1;\r\n\tborder-left: 0 none;\r\n\tborder-top-right-radius: 4px;\r\n\tborder-bottom-right-radius: 4px;\r\n\ttext-align: center;\r\n}\r\n\r\n.button {\r\n\twidth: 47%;\r\n\theight: 3em;\r\n\tcolor: #fff;\r\n\tborder: none;\r\n\tborder-radius: 4px;\r\n}\r\n\r\n.addbtn {\r\n\tbackground: #edb23e;\r\n\tmargin-right: 3%;\r\n}\r\n\r\n.buybtn {\r\n\tbackground: #f96364;\r\n}\r\n\r\n.bottom {\r\n\tborder-top: 0.5em solid #eeeeee;\r\n\tpadding-bottom: 3em;\r\n    position: relative;\r\n    width:100%;\r\n}\r\n\r\n.bottom .bottom-details{\r\n\twidth:100%;\t\r\n\tword-break:break-all;\r\n\toverflow-x: hidden; \r\n}\r\n\r\n.bottom-details h1,.bottom-details h2,.bottom-details h3,.bottom-details h4,.bottom-details h5{\r\n\tword-break:break-all;\r\n}\r\n\r\n.bottom > p:first-child {\r\n\ttext-indent: 1em;\r\n}\r\n\r\n.bottom > p img{\r\n    width: 1em;\r\n    position: absolute;\r\n    top:0.8em;\r\n    right: 1em;\r\n}\r\n\r\n.bottom-details p {\r\n\ttext-indent: 1em;\r\n\tword-break:break-all;\r\n}\r\n\r\n.inline-padding {\r\n\tdisplay: inline-block;\r\n\tpadding-left: 0.8em;\r\n}\r\n\r\n.inline-paddings {\r\n\tdisplay: inline-block;\r\n\tpadding-left: 1.6em;\r\n}\r\n\r\n.footer {\r\n\twidth: 100%;\r\n\theight: 3em;\r\n\tposition: fixed;\r\n\tbottom: 0;\r\n\tbackground: #fff;\r\n\tcolor: #b6b6b6;\r\n\ttext-align: center;\r\n\tborder-top: 1px solid #eaeaea;\r\n}\r\n\r\n.footer a {\r\n\tcolor: #626262;\r\n\tdisplay: inline-block;\r\n\theight:1em;\r\n\tline-height:1em;\r\n\tpadding-top: 1em;\r\n\tpadding-bottom: 1em;\r\n}\r\n.footer .inline-paddings-right{\r\n    padding-top: 1em;\r\n    float: right;\r\n}\r\n.footer img {\r\n\tdisplay: inline-block;\r\n\twidth: 1em;\r\n}\r\n\r\n.top-bg{\r\n    position: fixed;\r\n    bottom: 3.5em;\r\n    right: 1em;\r\n    width: 2em;\r\n    display: none;\r\n    filter:alpha(opacity=40);       /* IE */\r\n    -moz-opacity:0.4;              /* Moz + FF */\r\n    opacity: 0.4;     \r\n}\r\n.spec{\r\n    display: inline-block;\r\n    margin: 0 1em 0.8em 0;\r\n    font-size:0.7em;\r\n    padding:0.3em 1em;\r\n    border:1px solid #ccc;\r\n    border-radius:3px;\r\n    cursor:pointer;\r\n}\r\n.fonts a.active{\r\n    border: 2px solid #d2b57b;\r\n}\r\n.guige{\r\n    float: left;\r\n    width: 40px;\r\n}\r\n.guige-detail{\r\n    margin-left: 40px;\r\n}\r\n.guige-detail a[disabled]{\r\n    background: none repeat scroll 0 0 #fff;\r\n    color: #e3e3e3;\r\n    cursor: default;\r\n}\r\n/* 本例子css -------------------------------------- */\r\n.slideBox {\r\n\tposition: relative;\r\n\twidth: 100%;\r\n\theight: 240px;\r\n\toverflow: hidden;\r\n}\r\n\r\n.slideBox .hd {\r\n\tposition: absolute;\r\n\twidth: 100%;\r\n\theight: 27px;\r\n\tbottom: 0;\r\n\tleft: 0;\r\n\tz-index: 1;\r\n}\r\n\r\n.slideBox .hd img {\r\n\twidth: 11px;\r\n}\r\n\r\n.slideBox .bd {\r\n\tposition: relative;\r\n\tz-index: 0;\r\n}\r\n\r\n.slideBox .bd li {\r\n\tposition: relative;\r\n}\r\n\r\n.slideBox .bd li img {\r\n\twidth: 100%;\r\n\theight: 240px;\r\n\tdisplay: block;\r\n}\r\n\r\n.slideBox .bd li a {\r\n\t-webkit-tap-highlight-color: rgba(0, 0, 0, 0); /* 取消链接高亮 */\r\n}\r\n\r\n.slideBox .hd a {\r\n\tdisplay: block;\r\n\twidth: auto;\r\n\tposition: absolute;\r\n\tbottom: 0.5em;\r\n\tright: 0.5em;\r\n\tpadding: 0.1em 0.7em;\r\n\ttext-align: center;\r\n\tcolor: #fff;\r\n\tbackground-color: rgba(0, 0, 0, 0.6);\r\n\tborder-radius: 4px;\r\n}\r\n.slideBox>.a-img{\r\n    position: fixed;\r\n    top:1em;\r\n    right: 0.5em;\r\n    display: block;\r\n    width:2em;\r\n    height: 2em;\r\n    border-radius: 2em;\r\n    background-color: rgba(0, 0, 0, 0.6); \r\n    z-index: 2;\r\n}\r\n.slideBox>.a-img>img{\r\n    width: 1em;            \r\n    position: absolute;\r\n    top:50%;\r\n    left: 50%;\r\n    margin-top:-0.5em;\r\n    margin-left: -0.5em;\r\n}\r\n.carts{\r\n\tposition: relative;\r\n}\r\n.cartNum{                      \r\n    display: inline-block;\r\n    width: 1.2em;\r\n    height: 1.2em;\r\n    line-height:1.2em;\r\n    border-radius: 1.5em;\r\n    background:#ff0000;  \r\n    position: absolute;\r\n    right: -0.7em;\r\n    top: 0.3em;\r\n    color: #fff;\r\n}\r\n#soldCount{\r\n\tfloat: right; \r\n\tfont-size: 0.8em; \r\n\tpadding-top: 0.3em;\r\n\tcolor:#adadad;\r\n}\r\n.freight{\r\n\tfont-size:0.8em;\r\n\tcolor:#adadad;\r\n}\r\n.standard_sku{\r\n\tfont-size:0.9em;\r\n\tcolor:#adadad;\r\n}\r\n@media all and (max-width:320px){\r\n\t.slideBox{\r\n\t\theight:240px;\r\n\t}\r\n\t.slideBox .bd li img {\r\n\t\theight:240px;\r\n\t}\r\n}\r\n@media all and (min-width:321px) and (max-width:360px){\r\n\t.slideBox{\r\n\t\theight:270px;\r\n\t}\r\n\t.slideBox .bd li img {\r\n\t\theight:270px;\r\n\t}\r\n}\r\n@media all and (min-width:361px) and (max-width:375px){\r\n\t.slideBox{\r\n\t\theight:281px;\r\n\t}\r\n\t.slideBox .bd li img {\r\n\t\theight:281px;\r\n\t}\r\n}\r\n@media all and (min-width:376px) and (max-width:384px){\r\n\t.slideBox{\r\n\t\theight:288px;\r\n\t}\r\n\t.slideBox .bd li img {\r\n\t\theight:288px;\r\n\t}\r\n}\r\n@media all and (min-width:385px) and (max-width:414px){\r\n\t.slideBox{\r\n\t\theight:311px;\r\n\t}\r\n\t.slideBox .bd li img {\r\n\t\theight:311px;\r\n\t}\r\n}\r\n@media all and (min-width:415px){\r\n\t.slideBox{\r\n\t\theight:360px;\r\n\t}\r\n\t.slideBox .bd li img {\r\n\t\theight:360px;\r\n\t}\r\n}\r\n'], ['style', '\r\n'], ['body', '\r\n\t'], ['div', '\r\n\t\t'], ['div', '\r\n\t\t\t'], ['div', '\r\n\t\t\t\t'], ['a', '\r\n                  '], ['img', '\r\n              \t'], ['img', '\r\n\t\t\t\t'], ['div', '\r\n\t\t\t\t\t'], ['ul', '\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t'], ['img', '\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t'], ['img', '\r\n\t\t\t\t'], ['img', '\r\n\t\t\t\t'], ['div', '\r\n\t\t\t\t\t'], ['a', '\r\n\t\t\t\t'], ['a', '\r\n\t\t\t'], ['a', '\r\n\t\t'], ['a', '\t\t\r\n\t\t'], ['div', '\r\n\t\t\t'], ['div', '\r\n\t\t\t\t'], ['p', '\r\n\t\t\t\t\t接口-测试商品1\r\n\t\t\t\t'], ['p', '\r\n\t\t\t\t'], ['p', '\r\n\t\t\t\t\t接口测试专用,烦请勿删,勿操作\r\n\t\t\t\t'], ['p', '\t\t\t\t\r\n\t\t\t\t'], ['p', '\r\n\t\t\t\t\t单价:\r\n\t\t\t\t\t'], ['span', '\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t￥0.01\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t'], ['span', '\r\n\t\t\t\t\t'], ['span', '销量:6件'], ['span', '\r\n\t\t\t\t'], ['span', '\r\n\t\t\t\t\r\n\t\t\t\t\t'], ['p', '运费:'], ['span', '4.00元'], ['span', '\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t'], ['p', '\r\n\t\t\t\t\t数量:'], ['span', '-'], ['span', '1'], ['span', '+'], ['span', '\r\n\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t'], ['span', '(库存：999994件)'], ['span', '\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t'], ['span', ' \r\n\t\t\t\t'], ['div', '\r\n\t\t\t\t\t'], ['input', '\r\n\t\t\t\t\t'], ['input', '\r\n\t\t\t\t'], ['input', '\r\n\t\t\t'], ['input', '\r\n\t\t\t'], ['div', '\r\n\t\t\t\t'], ['p', '图文详情'], ['img', '\r\n\t\t\t\t'], ['div', '\r\n\t\t\t\t\t'], ['p', '\t\t\t\t\t\t\t\t\t\t\t'], ['p', '接口测试专用商品,商品详情简介'], ['br', '\r\n\t\t\t\t'], ['br', '\r\n\t\t\t'], ['br', '\r\n\t\t'], ['br', '\t\t\r\n\t'], ['br', '\r\n\t'], ['img', '\r\n\t'], ['script', '\r\n    '], ['script', '\r\n    '], ['script', '\r\n\t'], ['script', '\r\n\t'], ['script', '\r\n\t\t\t\r\n\tvar priceLimita = $(".orange").text();\r\n\tvar soldCounta = $("#soldCount").text();\r\n\tvar skua = $(".standard_sku").text();\r\n\t\r\n            // 滚动窗口来判断按钮显示或隐藏\r\n            $(window).scroll(function() {\r\n                if ($(this).scrollTop() > 120) {\r\n                    $(\'.top-bg\').show(100);\r\n                } else {\r\n                    $(\'.top-bg\').hide(100);\r\n                }\r\n            });\r\n            \r\n            function choose(obj,price,sku,standardSoldCount){\r\n            \tif(!$(obj).attr(\'disabled\')){\r\n            \tif($(obj).hasClass(\'active\')){\r\n            \t\t$(".orange").text(priceLimita);\r\n                \t$("#soldCount").text(soldCounta);\r\n                \t$(".standard_sku").text(skua);\r\n                \t $(obj).removeClass(\'active\');\r\n            \t}else{\r\n\t            \t$(".standard_sku").text("(库存:"+sku+"件)");\r\n\t            \t$(".orange").text("￥"+price);\r\n\t            \t$("#soldCount").text("销量:"+standardSoldCount+"件");\r\n\t            \t$(".spec").removeClass(\'active\');\r\n                    $(obj).addClass(\'active\');\r\n            \t}\r\n            \t}\r\n            }\r\n            \r\n           \r\n            \r\n            $(function(){\r\n            \t/* $(".spec").tap(function(){\r\n                    if(!$(this).attr(\'disabled\')){\r\n                        if($(this).hasClass(\'active\')){\r\n                            $(this).removeClass(\'active\');\r\n                            \r\n                        }else{\r\n                        \t\r\n                        }\r\n                    }                    \r\n                }); */\r\n                \r\n            \tTouchSlide({\r\n    \t\t\t\tslideCell : "#slideBox",\r\n    \t\t\t\tmainCell : ".bd ul",\r\n    \t\t\t\teffect : "leftLoop",\r\n    \t\t\t\tpageStateCell : ".pageState"\r\n    \t\t\t});            \t            \t\r\n\t\t\t\t\r\n            \t$(".bottom-details img").width($(".top").width());\r\n            });\r\n            \r\n            // jQuery实现动画滚动\r\n            $(\'.top-bg\').click(function(event) {\r\n                event.preventDefault();\r\n                $(\'html, body\').scrollTop(0);\r\n            });\r\n\t\t\t\r\n\t\t\t$(".bottom > p img").click(function(){\r\n                $(this).parent().next().toggle();\r\n                if($(this).parent().next().css("display")=="block"){\r\n                    $(this).attr("src","/images/mall/down.png");\r\n                }else{\r\n                    $(this).attr("src","/images/mall/up.png");\r\n                }\r\n            });\r\n            \r\n            $(".jia").click(function(){\r\n            \tvar val = $(this).siblings(".val");\r\n            \tvar count = parseInt(val.text());\r\n                if (isNaN(count)) {\r\n                \tcount = 1;\r\n                } else {\r\n                \tcount += 1;\r\n                }\r\n                val.text(count);\r\n            });\r\n            $(".jian").click(function(){\r\n            \tvar val = $(this).siblings(".val");\r\n            \tvar count = parseInt(val.text());\r\n                if (isNaN(count) || count <= 1) {\r\n                \tcount = 1;\r\n                } else {\r\n                \tcount -= 1;\r\n                }\r\n                val.text(count);\r\n            });\r\n            \r\n            $(".addbtn").click(function(event){\r\n            \tif($(this).prop("disabled") == true)\r\n            \t\treturn false;\r\n            \tvar params = {\r\n   \t\t\t\t\tmallGoodsId : "26838",\r\n   \t\t\t\t\tstandardId : standardId,\r\n   \t\t\t\t\tamount : $(".val").text(),\r\n   \t\t\t\t\tserial : "10549840601068216320",\r\n   \t\t\t\t\topenId : "ous64uFCCLMyXYDJ-MkNilyCI5C"\r\n   \t\t\t\t};\r\n            \t\r\n            \tvar standard = 1;\r\n            \tif(standard == 2 && $(".active").length < 1){\r\n    \t\t\t\tdoAlert("no", "请选择商品的规格");\r\n    \t\t\t\treturn;\r\n    \t\t\t}\r\n            \tif(standard == 2){\r\n            \t\tvar standardId = $(".active").attr("data");\r\n    \t\t\t\tparams.standardId = standardId;\r\n            \t}\r\n            \t$.post("/addtocart", params, function(result){\r\n            \t\tif (null == result || !result.success) {\r\n            \t\t\ttoast(result.message);\r\n    \t\t\t\t\treturn;\r\n    \t\t\t\t}\r\n    \t\t\t\t//更新购物车数量\r\n    \t\t\t\t/* var cartNum = $(".cartNum").text();\r\n    \t\t\t\tif (null == cartNum || "" == cartNum || typeof (cartNum) == undefined) {\r\n    \t\t\t\t\t$(".carts").append("<span class=\'cartNum\'>1</span>");\r\n    \t\t\t\t} else {\r\n    \t\t\t\t\tif (null != result.attach && result.attach > 0) {\r\n    \t\t\t\t\t\t$(".cartNum").text(result.attach);\r\n    \t\t\t\t\t}\r\n    \t\t\t\t} */\r\n    \t\t\t\ttoast("已经成功加入购物车");\r\n            \t});\r\n            });\r\n\t\t$(".buybtn").click(function(event) {\r\n\t\t\tif($(this).prop("disabled") == true)\r\n        \t\treturn false;\r\n\t\t\t$(this).attr("disabled","disabled");\r\n\t\t\tvar standard = 1;\r\n        \tif(standard == 2 && $(".active").length < 1){\r\n\t\t\t\tdoAlert("no", "请选择商品的规格");\r\n\t\t\t\t$(this).removeAttr("disabled");\r\n\t\t\t\treturn;\r\n        \t}\r\n        \tif(standard == 2){\r\n        \t\tvar standardId = $(".active").attr("data");\r\n        \t\twindow.location.href = "/mall/tobuy/1?mallGoodsId=26838&amount=" + $(".val").text() + "&type=1&serial=10549840601068216320&standardId="+standardId;\r\n        \t\treturn;\r\n        \t}\r\n\t\t\twindow.location.href = "/mall/tobuy/1?mallGoodsId=26838&amount=" + $(".val").text() + "&type=1&serial=10549840601068216320";\r\n\t\t});\r\n\t'], ['script', '\r\n'], ['script', '\r\n'], ['script', '\r\n'], ['script', '\r\n  \t\r\n\t'], ['script', '\r\n\t'], ['script', '\r\n\t\t$(function() {\r\n\t\t\t//var SHOP_SERIAL = getCookie("SHOP_SERIAL");\r\n\t\t\tvar SHOP_SERIAL = "10549840601068216320";\r\n\t\t\tif(null != SHOP_SERIAL && SHOP_SERIAL != ""){\r\n\t\t\t\t$.ajax({\r\n\t\t\t\t\turl : \'/saofu_mobile/checkUserBindStatus\',\r\n\t\t\t\t\tdata : {\r\n\t\t\t\t\t\t"serial" : SHOP_SERIAL\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttype : \'post\',\r\n\t\t\t\t\tcache : false,\r\n\t\t\t\t\tdataType : \'json\',\r\n\t\t\t\t\tsuccess : function(data) {\r\n\t\t\t\t\t\tif (data != null) {\r\n\t\t\t\t\t\t\tvar guildFocusStr = data.guildFocusStr;\r\n\t\t\t\t\t\t\tif(guildFocusStr != null && guildFocusStr == "1"){\r\n\t\t\t\t\t\t\t\tvar hasBindedShop = data.hasBindedShop;\r\n\t\t\t\t\t\t\t\tif(hasBindedShop == "0"){\r\n\t\t\t\t\t\t\t\t\tvar qrName = data.QRPublicName;\r\n\t\t\t\t\t\t\t\t\tvar qrUrl = data.QRCodeURL;\r\n\t\t\t\t\t\t\t\t\tif(qrName != "" && qrUrl != ""){\r\n\t\t\t\t\t\t\t\t\t\tvar params = qrName+"**"+qrUrl;\r\n\t\t\t\t\t\t\t\t\t\tfollowModule(params);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} \r\n\t\t\t\t\t},\r\n\t\t\t\t\terror : function() {\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t\t\t\t\r\n\t'], ['script', '\r\n']]
2016-07-20 18:39:14,447 wechatno_wemall.py[line: 101] INFO: 正在解析返回结果:200
2016-07-20 18:39:14,447 testcase.py[line: 98] INFO: 正在更新步骤执行结果
2016-07-20 18:39:14,447 mydb.py[line: 63] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2016-07-20 18:39:14" WHERE executed_history_id = 20160720183913 AND testcase_id = 80 AND step_id = 82 AND project='pj_wecharno' AND testplan='无计划'
2016-07-20 18:39:14,450 testcase.py[line: 101] INFO: 测试用例[id=80, name=test-n-点击商品]执行成功
2016-07-20 18:39:14,450 testsuite.py[line: 67] INFO: 正在更新用例执行结果
2016-07-20 18:39:14,450 mydb.py[line: 63] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2016-07-20 18:39:14" WHERE executed_history_id = 20160720183913 and testcase_id = 80 AND project='pj_wecharno' AND testplan='无计划'
2016-07-20 18:39:14,570 testsuite.py[line: 60] INFO: 记录测试用例到到测试用例报表
2016-07-20 18:39:14,570 mydb.py[line: 50] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720183913', '102', 'test-n-点击立即购买按钮', '微商城-模拟点击页面跳转', '无计划', 'pj_wecharno', 'Block', '')
2016-07-20 18:39:14,571 testsuite.py[line: 63] INFO: 开始执行测试用例[id=102，name=test-n-点击立即购买按钮]
2016-07-20 18:39:14,571 testcase.py[line: 48] INFO: 记录测试步骤到测试步骤报告表
2016-07-20 18:39:14,571 mydb.py[line: 50] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720183913', '102', 'test-n-点击立即购买按钮', '无计划', 'pj_wecharno', 104, 1, '', 'http', 'm.test.saofu.cn', '80', '{"class":"ToBuyGoods","function":"test_to_buy_goods","method":"get","url":"/mall/tobuy/1?","params":{"mallGoodsId":"26838","amount":1,"type":1,"serial":"var"}}', '{"status":200}', 'Block', '', '')
2016-07-20 18:39:14,573 testcase.py[line: 60] INFO: 开始执行步骤操作[第1步]
2016-07-20 18:39:14,573 casestep.py[line: 64] INFO: 调用的方法为：ToBuyGoods.test_to_buy_goods
2016-07-20 18:39:14,573 wechatno_wemall.py[line: 215] INFO: 正在发起GET请求...
2016-07-20 18:39:14,573 httpprotocol.py[line: 50] INFO: 发起的请求为：http://m.test.saofu.cn:80/mall/tobuy/1?type=1&serial=10549840601068216320&mallGoodsId=26838&amount=1
2016-07-20 18:39:14,573 httpprotocol.py[line: 51] INFO: {'Cookie': '10549840601068216320=ous64uFCCLMyXYDJ-MkNilyCI5C'}
2016-07-20 18:39:14,584 wechatno_wemall.py[line: 221] INFO: 正在解析返回结果:





<!DOCTYPE html>
<link rel="stylesheet" href="/css/bind/banner.css?v=3.4.0-f5bd5" />  
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <link rel="stylesheet" href="/css/skin-nr-min.css?v=3.4.0-f5bd5">
        <link rel="stylesheet" href="/css/cpn.css?v=3.4.0-f5bd5">
        <link rel="stylesheet" type="text/css" href="/css/zepto.alert.css?v=3.4.0-f5bd5">
        <title>哎哟~出错啦~</title>
    </head>
    <body>
        <script type="text/javascript" src="/js/zepto.min.js?v=3.4.0-f5bd5" ></script>
        <script type="text/javascript" src="/js/zepto.alert.min.js?v=3.4.0-f5bd5"></script>
        <script type="text/javascript">
        Zepto(function($){
			function myAlert(content) {
		    	$.dialog({
		    		content : content,
		    		title : "alert"
		    	});
		    }
			
				
				
					myAlert("噢...出错了!请等待管理员处理,稍后重试");					
				
			
        });
        </script>
    </body>
</html>

2016-07-20 18:39:14,584 htmlparser.py[line: 28] INFO: Data 






2016-07-20 18:39:14,584 htmlparser.py[line: 28] INFO: Data 

2016-07-20 18:39:14,584 htmlparser.py[line: 19] INFO: Start tag: link
2016-07-20 18:39:14,584 htmlparser.py[line: 25] INFO: End tag: link
2016-07-20 18:39:14,584 htmlparser.py[line: 28] INFO: Data   

2016-07-20 18:39:14,584 htmlparser.py[line: 28] INFO: Data 

2016-07-20 18:39:14,584 htmlparser.py[line: 19] INFO: Start tag: html
2016-07-20 18:39:14,584 htmlparser.py[line: 28] INFO: Data 
    
2016-07-20 18:39:14,585 htmlparser.py[line: 19] INFO: Start tag: head
2016-07-20 18:39:14,585 htmlparser.py[line: 28] INFO: Data 
        
2016-07-20 18:39:14,585 htmlparser.py[line: 19] INFO: Start tag: meta
2016-07-20 18:39:14,585 htmlparser.py[line: 28] INFO: Data 
        
2016-07-20 18:39:14,585 htmlparser.py[line: 19] INFO: Start tag: meta
2016-07-20 18:39:14,585 htmlparser.py[line: 28] INFO: Data 
        
2016-07-20 18:39:14,585 htmlparser.py[line: 19] INFO: Start tag: link
2016-07-20 18:39:14,585 htmlparser.py[line: 28] INFO: Data 
        
2016-07-20 18:39:14,585 htmlparser.py[line: 19] INFO: Start tag: link
2016-07-20 18:39:14,585 htmlparser.py[line: 28] INFO: Data 
        
2016-07-20 18:39:14,586 htmlparser.py[line: 19] INFO: Start tag: link
2016-07-20 18:39:14,586 htmlparser.py[line: 28] INFO: Data 
        
2016-07-20 18:39:14,586 htmlparser.py[line: 19] INFO: Start tag: title
2016-07-20 18:39:14,586 htmlparser.py[line: 28] INFO: Data 哎哟~出错啦~
2016-07-20 18:39:14,586 htmlparser.py[line: 25] INFO: End tag: title
2016-07-20 18:39:14,586 htmlparser.py[line: 28] INFO: Data 
    
2016-07-20 18:39:14,586 htmlparser.py[line: 25] INFO: End tag: head
2016-07-20 18:39:14,586 htmlparser.py[line: 28] INFO: Data 
    
2016-07-20 18:39:14,586 htmlparser.py[line: 19] INFO: Start tag: body
2016-07-20 18:39:14,586 htmlparser.py[line: 28] INFO: Data 
        
2016-07-20 18:39:14,587 htmlparser.py[line: 19] INFO: Start tag: script
2016-07-20 18:39:14,587 htmlparser.py[line: 25] INFO: End tag: script
2016-07-20 18:39:14,587 htmlparser.py[line: 28] INFO: Data 
        
2016-07-20 18:39:14,587 htmlparser.py[line: 19] INFO: Start tag: script
2016-07-20 18:39:14,587 htmlparser.py[line: 25] INFO: End tag: script
2016-07-20 18:39:14,587 htmlparser.py[line: 28] INFO: Data 
        
2016-07-20 18:39:14,587 htmlparser.py[line: 19] INFO: Start tag: script
2016-07-20 18:39:14,587 htmlparser.py[line: 28] INFO: Data 
        Zepto(function($){
			function myAlert(content) {
		    	$.dialog({
		    		content : content,
		    		title : "alert"
		    	});
		    }
			
				
				
					myAlert("噢...出错了!请等待管理员处理,稍后重试");					
				
			
        });
        
2016-07-20 18:39:14,587 htmlparser.py[line: 25] INFO: End tag: script
2016-07-20 18:39:14,589 htmlparser.py[line: 28] INFO: Data 
    
2016-07-20 18:39:14,589 htmlparser.py[line: 25] INFO: End tag: body
2016-07-20 18:39:14,589 htmlparser.py[line: 28] INFO: Data 

2016-07-20 18:39:14,589 htmlparser.py[line: 25] INFO: End tag: html
2016-07-20 18:39:14,589 htmlparser.py[line: 28] INFO: Data 

2016-07-20 18:39:14,589 wechatno_wemall.py[line: 227] INFO: [['', '\r\n\r\n\r\n\r\n\r\n\r\n'], ['', '\r\n'], ['link', '  \r\n'], ['link', '\r\n'], ['html', '\r\n    '], ['head', '\r\n        '], ['meta', '\r\n        '], ['meta', '\r\n        '], ['link', '\r\n        '], ['link', '\r\n        '], ['link', '\r\n        '], ['title', '哎哟~出错啦~'], ['title', '\r\n    '], ['title', '\r\n    '], ['body', '\r\n        '], ['script', '\r\n        '], ['script', '\r\n        '], ['script', '\r\n        Zepto(function($){\r\n\t\t\tfunction myAlert(content) {\r\n\t\t    \t$.dialog({\r\n\t\t    \t\tcontent : content,\r\n\t\t    \t\ttitle : "alert"\r\n\t\t    \t});\r\n\t\t    }\r\n\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\tmyAlert("噢...出错了!请等待管理员处理,稍后重试");\t\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\r\n        });\r\n        '], ['script', '\r\n    '], ['script', '\r\n'], ['script', '\r\n']]
2016-07-20 18:39:14,589 testcase.py[line: 98] INFO: 正在更新步骤执行结果
2016-07-20 18:39:14,589 mydb.py[line: 63] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2016-07-20 18:39:14" WHERE executed_history_id = 20160720183913 AND testcase_id = 102 AND step_id = 104 AND project='pj_wecharno' AND testplan='无计划'
2016-07-20 18:39:14,592 testcase.py[line: 101] INFO: 测试用例[id=102, name=test-n-点击立即购买按钮]执行成功
2016-07-20 18:39:14,592 testsuite.py[line: 67] INFO: 正在更新用例执行结果
2016-07-20 18:39:14,592 mydb.py[line: 63] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2016-07-20 18:39:14" WHERE executed_history_id = 20160720183913 and testcase_id = 102 AND project='pj_wecharno' AND testplan='无计划'
2016-07-20 18:39:14,594 testsuite.py[line: 74] INFO: 测试套件[id=79 ,name=微商城-模拟点击页面跳转]已执行完
2016-07-20 18:39:14,594 main.py[line: 229] INFO: 接口测试已执行完成，正在关闭数据库连接
2016-07-20 18:39:14,595 htmlreporter.py[line: 37] INFO: 正在查询测试用例总数
2016-07-20 18:39:14,595 mydb.py[line: 77] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20160720183913',)
2016-07-20 18:39:14,596 htmlreporter.py[line: 43] INFO: 正在查询执行通过的用例数
2016-07-20 18:39:14,596 mydb.py[line: 77] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20160720183913')
2016-07-20 18:39:14,597 htmlreporter.py[line: 49] INFO: 正在查询执行失败的用例数
2016-07-20 18:39:14,598 mydb.py[line: 77] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20160720183913')
2016-07-20 18:39:14,599 htmlreporter.py[line: 55] INFO: 正在查询执行出错的用例数
2016-07-20 18:39:14,599 mydb.py[line: 77] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20160720183913')
2016-07-20 18:39:14,600 htmlreporter.py[line: 61] INFO: 正在查询未执行的用例数
2016-07-20 18:39:14,600 mydb.py[line: 77] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20160720183913')
2016-07-20 18:39:14,601 htmlreporter.py[line: 72] INFO: 正在查询已运的测试计划
2016-07-20 18:39:14,601 mydb.py[line: 93] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20160720183913',)
2016-07-20 18:39:14,602 htmlreporter.py[line: 98] INFO: 正在查询测试计划[project：pj_wecharno, testplan：无计划]的测试用例执行结果
2016-07-20 18:39:14,602 mydb.py[line: 93] INFO: query：SELECT id, executed_history_id, testcase_id, testcase_name,testsuit, testplan, project, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s ORDER BY id ASC  data：('pj_wecharno', '无计划', '20160720183913')
2016-07-20 18:39:14,604 htmlreporter.py[line: 105] INFO: 正在记录测试测试计划[project：pj_wecharno, testplan：无计划]的测试用例运行结果到测试报告
2016-07-20 18:39:14,604 htmlreporter.py[line: 115] INFO: 正在查询已运的测试计划
2016-07-20 18:39:14,604 mydb.py[line: 93] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20160720183913',)
2016-07-20 18:39:14,606 htmlreporter.py[line: 127] INFO: 正在查询测试计划[project：pj_wecharno, testplan：无计划]已运行的测试用例
2016-07-20 18:39:14,606 mydb.py[line: 93] INFO: query：SELECT testcase_id, testcase_name, project, testplan FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id ORDER BY id ASC  data：('pj_wecharno', '无计划', '20160720183913')
2016-07-20 18:39:14,608 htmlreporter.py[line: 158] INFO: 正在查询测试用例[id=80]步骤运行结果
2016-07-20 18:39:14,608 mydb.py[line: 93] INFO: query：SELECT step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, cstb.runresult, reason, cstb.runtime FROM case_step_report_tb AS cstb JOIN testcase_report_tb AS tstb ON cstb.testcase_id =  tstb.testcase_id AND cstb.project=tstb.project AND cstb.testplan=tstb.testplan AND cstb.executed_history_id = tstb.executed_history_id WHERE tstb.project= %s AND tstb.testplan=%s AND cstb.testcase_id=%s AND cstb.executed_history_id = %s  data：('pj_wecharno', '无计划', 80, '20160720183913')
2016-07-20 18:39:14,611 htmlreporter.py[line: 158] INFO: 正在查询测试用例[id=102]步骤运行结果
2016-07-20 18:39:14,611 mydb.py[line: 93] INFO: query：SELECT step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, cstb.runresult, reason, cstb.runtime FROM case_step_report_tb AS cstb JOIN testcase_report_tb AS tstb ON cstb.testcase_id =  tstb.testcase_id AND cstb.project=tstb.project AND cstb.testplan=tstb.testplan AND cstb.executed_history_id = tstb.executed_history_id WHERE tstb.project= %s AND tstb.testplan=%s AND cstb.testcase_id=%s AND cstb.executed_history_id = %s  data：('pj_wecharno', '无计划', 102, '20160720183913')
2016-07-20 18:39:14,614 htmlreporter.py[line: 177] INFO: 正在设置测试报告结果文件名
2016-07-20 18:39:14,614 htmlreporter.py[line: 187] INFO: 测试报告文件名所在路径为：E:\\Projects\\report\\test_report20160720183913.html
2016-07-20 18:39:14,614 htmlreporter.py[line: 180] INFO: 正在生成测试报告
2016-07-20 18:39:14,615 main.py[line: 252] INFO: 生成测试报告成功
2016-07-20 18:39:14,831 main.py[line: 259] INFO: E:\\Projects\\report\\test_report20160720183913.html
2016-07-20 18:39:14,831 main.py[line: 262] INFO: 正在发送测试报告邮件...
2016-07-20 18:39:14,831 main.py[line: 266] INFO: 发送邮件成功
2016-07-20 19:43:55,284 globalpy.py[line: 14] INFO: 正在初始化数据库[名称：TESTDB]对象
2016-07-20 19:43:55,298 globalpy.py[line: 17] INFO: 正在初始化数据库[名称：SAOFUDB]对象
2016-07-20 19:43:55,306 globalpy.py[line: 20] INFO: 正在获取testlink
2016-07-20 19:43:55,375 main.py[line: 60] INFO: 正在创建测试用例报告报表
2016-07-20 19:43:55,375 mydb.py[line: 37] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime)
2016-07-20 19:43:55,380 main.py[line: 63] INFO: 正在创建测试步骤报告报表
2016-07-20 19:43:55,380 mydb.py[line: 37] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2016-07-20 19:43:55,388 main.py[line: 66] INFO: 正在读取运行模式配置
2016-07-20 19:43:55,391 main.py[line: 187] INFO: 按套件运行测试
2016-07-20 19:43:55,391 main.py[line: 189] INFO: 已获取配置的套件id列表：[79]
2016-07-20 19:43:55,814 main.py[line: 205] INFO: 正在读取套件[id=79，name=微商城-模拟点击页面跳转]的协议，host，端口配置...
2016-07-20 19:43:55,815 main.py[line: 223] INFO: 正在执行测试套件[id=79 ,name=微商城-模拟点击页面跳转]
2016-07-20 19:43:55,816 testsuite.py[line: 42] INFO: 正在获取套件[id=79，name=微商城-模拟点击页面跳转]的测试用例...
2016-07-20 19:43:56,084 testsuite.py[line: 60] INFO: 记录测试用例到到测试用例报表
2016-07-20 19:43:56,085 mydb.py[line: 50] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720194355', '80', 'test-n-点击商品', '微商城-模拟点击页面跳转', '无计划', 'pj_wecharno', 'Block', '')
2016-07-20 19:43:56,086 testsuite.py[line: 63] INFO: 开始执行测试用例[id=80，name=test-n-点击商品]
2016-07-20 19:43:56,086 testcase.py[line: 48] INFO: 记录测试步骤到测试步骤报告表
2016-07-20 19:43:56,086 mydb.py[line: 50] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720194355', '80', 'test-n-点击商品', '无计划', 'pj_wecharno', 82, 1, '', 'http', 'm.test.saofu.cn', '80', '{"class":"Goods","function":"test_click_goods","method":"get","url":"/goods/item?","params":{"id":26838, "serial":"var"}}', '{"status":200}', 'Block', '', '')
2016-07-20 19:43:56,088 testcase.py[line: 60] INFO: 开始执行步骤操作[第1步]
2016-07-20 19:43:56,088 casestep.py[line: 64] INFO: 调用的方法为：Goods.test_click_goods
2016-07-20 19:43:56,088 wechatno_wemall.py[line: 89] INFO: 正在发起GET请求...
2016-07-20 19:43:56,089 httpprotocol.py[line: 50] INFO: 发起的请求为：http://m.test.saofu.cn:80/goods/item?id=26838&serial=10549840601068216320
2016-07-20 19:43:56,089 httpprotocol.py[line: 51] INFO: {'Cookie': '10549840601068216320=ous64uFCCLMyXYDJ-MkNilyCI5C'}
2016-07-20 19:43:56,266 htmlparser.py[line: 28] INFO: Data 






2016-07-20 19:43:56,266 htmlparser.py[line: 28] INFO: Data 

2016-07-20 19:43:56,267 htmlparser.py[line: 19] INFO: Start tag: link
2016-07-20 19:43:56,267 htmlparser.py[line: 25] INFO: End tag: link
2016-07-20 19:43:56,267 htmlparser.py[line: 28] INFO: Data   

2016-07-20 19:43:56,267 htmlparser.py[line: 28] INFO: Data 

2016-07-20 19:43:56,268 htmlparser.py[line: 19] INFO: Start tag: html
2016-07-20 19:43:56,268 htmlparser.py[line: 28] INFO: Data 

2016-07-20 19:43:56,268 htmlparser.py[line: 19] INFO: Start tag: head
2016-07-20 19:43:56,268 htmlparser.py[line: 28] INFO: Data 

2016-07-20 19:43:56,269 htmlparser.py[line: 19] INFO: Start tag: meta
2016-07-20 19:43:56,269 htmlparser.py[line: 28] INFO: Data 

2016-07-20 19:43:56,269 htmlparser.py[line: 19] INFO: Start tag: meta
2016-07-20 19:43:56,269 htmlparser.py[line: 28] INFO: Data 

2016-07-20 19:43:56,270 htmlparser.py[line: 19] INFO: Start tag: meta
2016-07-20 19:43:56,270 htmlparser.py[line: 28] INFO: Data 

2016-07-20 19:43:56,270 htmlparser.py[line: 19] INFO: Start tag: meta
2016-07-20 19:43:56,270 htmlparser.py[line: 28] INFO: Data 

2016-07-20 19:43:56,271 htmlparser.py[line: 19] INFO: Start tag: meta
2016-07-20 19:43:56,271 htmlparser.py[line: 28] INFO: Data 

2016-07-20 19:43:56,271 htmlparser.py[line: 19] INFO: Start tag: meta
2016-07-20 19:43:56,271 htmlparser.py[line: 28] INFO: Data 

2016-07-20 19:43:56,271 htmlparser.py[line: 19] INFO: Start tag: title
2016-07-20 19:43:56,272 htmlparser.py[line: 28] INFO: Data 微商城
2016-07-20 19:43:56,272 htmlparser.py[line: 25] INFO: End tag: title
2016-07-20 19:43:56,272 htmlparser.py[line: 28] INFO: Data 

2016-07-20 19:43:56,272 htmlparser.py[line: 19] INFO: Start tag: link
2016-07-20 19:43:56,273 htmlparser.py[line: 28] INFO: Data 

2016-07-20 19:43:56,273 htmlparser.py[line: 19] INFO: Start tag: link
2016-07-20 19:43:56,273 htmlparser.py[line: 28] INFO: Data 

2016-07-20 19:43:56,273 htmlparser.py[line: 19] INFO: Start tag: link
2016-07-20 19:43:56,274 htmlparser.py[line: 28] INFO: Data 

2016-07-20 19:43:56,274 htmlparser.py[line: 19] INFO: Start tag: script
2016-07-20 19:43:56,274 htmlparser.py[line: 25] INFO: End tag: script
2016-07-20 19:43:56,275 htmlparser.py[line: 28] INFO: Data 

2016-07-20 19:43:56,275 htmlparser.py[line: 25] INFO: End tag: head
2016-07-20 19:43:56,275 htmlparser.py[line: 28] INFO: Data 

2016-07-20 19:43:56,275 htmlparser.py[line: 19] INFO: Start tag: style
2016-07-20 19:43:56,276 htmlparser.py[line: 28] INFO: Data 
* {
	margin: 0;
	padding: 0;
}

html {
	color: #626262;
}

a {
	text-decoration: none;
}

ol,ul {
	list-style: outside none none;
}

.left {
	float: left;
}

.right {
	float: right;
}

.in-block {
	display: inline-block;
}

.orange {
	color: #c58d04;
}

.grey {
	color: #adadad;
}

.bg-color {
	background: #ececec;
}

#wrapper {
	width: 100%;
	margin: 0 auto;
}

.header {
	width: 100%;
	overflow: hidden;
	border-bottom: 1px solid #eaeaea;
}

.top {
	width: 90%;
	margin: 0 auto;
	padding-bottom: 1em;
}

.top p {
	margin: 0.5em 0;
	font-size: 0.8em;
}
.top>p:first-child{
	font-size:1.1em;
}

.fonts {
	font-size: 1em !important;
	margin: 0.8em 0 !important;
}


.jian {
	display: inline-block;
	width: 1.5em;
	height: 1.5em;
	line-height: 1.5em;
	border: 1px solid #d1d1d1;
	border-right: 0 none;
	border-top-left-radius: 4px;
	border-bottom-left-radius: 4px;
	text-align: center;
	margin-left:0.4em;
}

.val {
	background: #fff;
	display: inline-block;
	width: 3.5em;
	height: 1.5em;
	line-height: 1.5em;
	border: 1px solid #d1d1d1;
	text-align: center;
}

.jia {
	display: inline-block;
	width: 1.5em;
	height: 1.5em;
	line-height: 1.5em;
	border: 1px solid #d1d1d1;
	border-left: 0 none;
	border-top-right-radius: 4px;
	border-bottom-right-radius: 4px;
	text-align: center;
}

.button {
	width: 47%;
	height: 3em;
	color: #fff;
	border: none;
	border-radius: 4px;
}

.addbtn {
	background: #edb23e;
	margin-right: 3%;
}

.buybtn {
	background: #f96364;
}

.bottom {
	border-top: 0.5em solid #eeeeee;
	padding-bottom: 3em;
    position: relative;
    width:100%;
}

.bottom .bottom-details{
	width:100%;	
	word-break:break-all;
	overflow-x: hidden; 
}

.bottom-details h1,.bottom-details h2,.bottom-details h3,.bottom-details h4,.bottom-details h5{
	word-break:break-all;
}

.bottom > p:first-child {
	text-indent: 1em;
}

.bottom > p img{
    width: 1em;
    position: absolute;
    top:0.8em;
    right: 1em;
}

.bottom-details p {
	text-indent: 1em;
	word-break:break-all;
}

.inline-padding {
	display: inline-block;
	padding-left: 0.8em;
}

.inline-paddings {
	display: inline-block;
	padding-left: 1.6em;
}

.footer {
	width: 100%;
	height: 3em;
	position: fixed;
	bottom: 0;
	background: #fff;
	color: #b6b6b6;
	text-align: center;
	border-top: 1px solid #eaeaea;
}

.footer a {
	color: #626262;
	display: inline-block;
	height:1em;
	line-height:1em;
	padding-top: 1em;
	padding-bottom: 1em;
}
.footer .inline-paddings-right{
    padding-top: 1em;
    float: right;
}
.footer img {
	display: inline-block;
	width: 1em;
}

.top-bg{
    position: fixed;
    bottom: 3.5em;
    right: 1em;
    width: 2em;
    display: none;
    filter:alpha(opacity=40);       /* IE */
    -moz-opacity:0.4;              /* Moz + FF */
    opacity: 0.4;     
}
.spec{
    display: inline-block;
    margin: 0 1em 0.8em 0;
    font-size:0.7em;
    padding:0.3em 1em;
    border:1px solid #ccc;
    border-radius:3px;
    cursor:pointer;
}
.fonts a.active{
    border: 2px solid #d2b57b;
}
.guige{
    float: left;
    width: 40px;
}
.guige-detail{
    margin-left: 40px;
}
.guige-detail a[disabled]{
    background: none repeat scroll 0 0 #fff;
    color: #e3e3e3;
    cursor: default;
}
/* 本例子css -------------------------------------- */
.slideBox {
	position: relative;
	width: 100%;
	height: 240px;
	overflow: hidden;
}

.slideBox .hd {
	position: absolute;
	width: 100%;
	height: 27px;
	bottom: 0;
	left: 0;
	z-index: 1;
}

.slideBox .hd img {
	width: 11px;
}

.slideBox .bd {
	position: relative;
	z-index: 0;
}

.slideBox .bd li {
	position: relative;
}

.slideBox .bd li img {
	width: 100%;
	height: 240px;
	display: block;
}

.slideBox .bd li a {
	-webkit-tap-highlight-color: rgba(0, 0, 0, 0); /* 取消链接高亮 */
}

.slideBox .hd a {
	display: block;
	width: auto;
	position: absolute;
	bottom: 0.5em;
	right: 0.5em;
	padding: 0.1em 0.7em;
	text-align: center;
	color: #fff;
	background-color: rgba(0, 0, 0, 0.6);
	border-radius: 4px;
}
.slideBox>.a-img{
    position: fixed;
    top:1em;
    right: 0.5em;
    display: block;
    width:2em;
    height: 2em;
    border-radius: 2em;
    background-color: rgba(0, 0, 0, 0.6); 
    z-index: 2;
}
.slideBox>.a-img>img{
    width: 1em;            
    position: absolute;
    top:50%;
    left: 50%;
    margin-top:-0.5em;
    margin-left: -0.5em;
}
.carts{
	position: relative;
}
.cartNum{                      
    display: inline-block;
    width: 1.2em;
    height: 1.2em;
    line-height:1.2em;
    border-radius: 1.5em;
    background:#ff0000;  
    position: absolute;
    right: -0.7em;
    top: 0.3em;
    color: #fff;
}
#soldCount{
	float: right; 
	font-size: 0.8em; 
	padding-top: 0.3em;
	color:#adadad;
}
.freight{
	font-size:0.8em;
	color:#adadad;
}
.standard_sku{
	font-size:0.9em;
	color:#adadad;
}
@media all and (max-width:320px){
	.slideBox{
		height:240px;
	}
	.slideBox .bd li img {
		height:240px;
	}
}
@media all and (min-width:321px) and (max-width:360px){
	.slideBox{
		height:270px;
	}
	.slideBox .bd li img {
		height:270px;
	}
}
@media all and (min-width:361px) and (max-width:375px){
	.slideBox{
		height:281px;
	}
	.slideBox .bd li img {
		height:281px;
	}
}
@media all and (min-width:376px) and (max-width:384px){
	.slideBox{
		height:288px;
	}
	.slideBox .bd li img {
		height:288px;
	}
}
@media all and (min-width:385px) and (max-width:414px){
	.slideBox{
		height:311px;
	}
	.slideBox .bd li img {
		height:311px;
	}
}
@media all and (min-width:415px){
	.slideBox{
		height:360px;
	}
	.slideBox .bd li img {
		height:360px;
	}
}

2016-07-20 19:43:56,277 htmlparser.py[line: 25] INFO: End tag: style
2016-07-20 19:43:56,278 htmlparser.py[line: 28] INFO: Data 

2016-07-20 19:43:56,278 htmlparser.py[line: 19] INFO: Start tag: body
2016-07-20 19:43:56,278 htmlparser.py[line: 28] INFO: Data 
	
2016-07-20 19:43:56,279 htmlparser.py[line: 19] INFO: Start tag: div
2016-07-20 19:43:56,279 htmlparser.py[line: 28] INFO: Data 
		
2016-07-20 19:43:56,279 htmlparser.py[line: 19] INFO: Start tag: div
2016-07-20 19:43:56,279 htmlparser.py[line: 28] INFO: Data 
			
2016-07-20 19:43:56,279 htmlparser.py[line: 19] INFO: Start tag: div
2016-07-20 19:43:56,280 htmlparser.py[line: 28] INFO: Data 
				
2016-07-20 19:43:56,280 htmlparser.py[line: 19] INFO: Start tag: a
2016-07-20 19:43:56,280 htmlparser.py[line: 28] INFO: Data 
                  
2016-07-20 19:43:56,281 htmlparser.py[line: 19] INFO: Start tag: img
2016-07-20 19:43:56,281 htmlparser.py[line: 28] INFO: Data 
              	
2016-07-20 19:43:56,281 htmlparser.py[line: 25] INFO: End tag: a
2016-07-20 19:43:56,281 htmlparser.py[line: 28] INFO: Data 
				
2016-07-20 19:43:56,282 htmlparser.py[line: 19] INFO: Start tag: div
2016-07-20 19:43:56,282 htmlparser.py[line: 28] INFO: Data 
					
2016-07-20 19:43:56,282 htmlparser.py[line: 19] INFO: Start tag: ul
2016-07-20 19:43:56,282 htmlparser.py[line: 28] INFO: Data 
						
							
								
2016-07-20 19:43:56,283 htmlparser.py[line: 19] INFO: Start tag: li
2016-07-20 19:43:56,283 htmlparser.py[line: 19] INFO: Start tag: img
2016-07-20 19:43:56,283 htmlparser.py[line: 25] INFO: End tag: img
2016-07-20 19:43:56,283 htmlparser.py[line: 25] INFO: End tag: li
2016-07-20 19:43:56,283 htmlparser.py[line: 28] INFO: Data 
							
						
					
2016-07-20 19:43:56,284 htmlparser.py[line: 25] INFO: End tag: ul
2016-07-20 19:43:56,284 htmlparser.py[line: 28] INFO: Data 
				
2016-07-20 19:43:56,284 htmlparser.py[line: 25] INFO: End tag: div
2016-07-20 19:43:56,285 htmlparser.py[line: 28] INFO: Data 
				
2016-07-20 19:43:56,285 htmlparser.py[line: 19] INFO: Start tag: div
2016-07-20 19:43:56,285 htmlparser.py[line: 28] INFO: Data 
					
2016-07-20 19:43:56,285 htmlparser.py[line: 19] INFO: Start tag: a
2016-07-20 19:43:56,285 htmlparser.py[line: 25] INFO: End tag: a
2016-07-20 19:43:56,286 htmlparser.py[line: 28] INFO: Data 
				
2016-07-20 19:43:56,286 htmlparser.py[line: 25] INFO: End tag: div
2016-07-20 19:43:56,286 htmlparser.py[line: 28] INFO: Data 
			
2016-07-20 19:43:56,286 htmlparser.py[line: 25] INFO: End tag: div
2016-07-20 19:43:56,287 htmlparser.py[line: 28] INFO: Data 
		
2016-07-20 19:43:56,287 htmlparser.py[line: 25] INFO: End tag: div
2016-07-20 19:43:56,287 htmlparser.py[line: 28] INFO: Data 		
		
2016-07-20 19:43:56,287 htmlparser.py[line: 19] INFO: Start tag: div
2016-07-20 19:43:56,288 htmlparser.py[line: 28] INFO: Data 
			
2016-07-20 19:43:56,288 htmlparser.py[line: 19] INFO: Start tag: div
2016-07-20 19:43:56,288 htmlparser.py[line: 28] INFO: Data 
				
2016-07-20 19:43:56,288 htmlparser.py[line: 19] INFO: Start tag: p
2016-07-20 19:43:56,288 htmlparser.py[line: 28] INFO: Data 
					接口-测试商品1
				
2016-07-20 19:43:56,289 htmlparser.py[line: 25] INFO: End tag: p
2016-07-20 19:43:56,289 htmlparser.py[line: 28] INFO: Data 
				
2016-07-20 19:43:56,289 htmlparser.py[line: 19] INFO: Start tag: p
2016-07-20 19:43:56,289 htmlparser.py[line: 28] INFO: Data 
					接口测试专用,烦请勿删,勿操作
				
2016-07-20 19:43:56,290 htmlparser.py[line: 25] INFO: End tag: p
2016-07-20 19:43:56,290 htmlparser.py[line: 28] INFO: Data 				
				
2016-07-20 19:43:56,290 htmlparser.py[line: 19] INFO: Start tag: p
2016-07-20 19:43:56,290 htmlparser.py[line: 28] INFO: Data 
					单价:
					
2016-07-20 19:43:56,291 htmlparser.py[line: 19] INFO: Start tag: span
2016-07-20 19:43:56,291 htmlparser.py[line: 28] INFO: Data 
					
					
						
							￥0.01
						
						
					
					
					
2016-07-20 19:43:56,292 htmlparser.py[line: 25] INFO: End tag: span
2016-07-20 19:43:56,292 htmlparser.py[line: 28] INFO: Data 
					
2016-07-20 19:43:56,292 htmlparser.py[line: 19] INFO: Start tag: span
2016-07-20 19:43:56,293 htmlparser.py[line: 28] INFO: Data 销量:6件
2016-07-20 19:43:56,293 htmlparser.py[line: 25] INFO: End tag: span
2016-07-20 19:43:56,294 htmlparser.py[line: 28] INFO: Data 
				
2016-07-20 19:43:56,294 htmlparser.py[line: 25] INFO: End tag: p
2016-07-20 19:43:56,294 htmlparser.py[line: 28] INFO: Data 
				
					
2016-07-20 19:43:56,295 htmlparser.py[line: 19] INFO: Start tag: p
2016-07-20 19:43:56,295 htmlparser.py[line: 28] INFO: Data 运费:
2016-07-20 19:43:56,295 htmlparser.py[line: 19] INFO: Start tag: span
2016-07-20 19:43:56,295 htmlparser.py[line: 28] INFO: Data 4.00元
2016-07-20 19:43:56,296 htmlparser.py[line: 25] INFO: End tag: span
2016-07-20 19:43:56,296 htmlparser.py[line: 25] INFO: End tag: p
2016-07-20 19:43:56,296 htmlparser.py[line: 28] INFO: Data 
				
				
				
2016-07-20 19:43:56,296 htmlparser.py[line: 19] INFO: Start tag: p
2016-07-20 19:43:56,297 htmlparser.py[line: 28] INFO: Data 
					数量:
2016-07-20 19:43:56,297 htmlparser.py[line: 19] INFO: Start tag: span
2016-07-20 19:43:56,297 htmlparser.py[line: 28] INFO: Data -
2016-07-20 19:43:56,297 htmlparser.py[line: 25] INFO: End tag: span
2016-07-20 19:43:56,297 htmlparser.py[line: 19] INFO: Start tag: span
2016-07-20 19:43:56,297 htmlparser.py[line: 28] INFO: Data 1
2016-07-20 19:43:56,297 htmlparser.py[line: 25] INFO: End tag: span
2016-07-20 19:43:56,298 htmlparser.py[line: 19] INFO: Start tag: span
2016-07-20 19:43:56,298 htmlparser.py[line: 28] INFO: Data +
2016-07-20 19:43:56,298 htmlparser.py[line: 25] INFO: End tag: span
2016-07-20 19:43:56,298 htmlparser.py[line: 28] INFO: Data 
					
						
						
							
2016-07-20 19:43:56,298 htmlparser.py[line: 19] INFO: Start tag: span
2016-07-20 19:43:56,298 htmlparser.py[line: 28] INFO: Data (库存：999994件)
2016-07-20 19:43:56,299 htmlparser.py[line: 25] INFO: End tag: span
2016-07-20 19:43:56,299 htmlparser.py[line: 28] INFO: Data 
						
						
						
					
				
2016-07-20 19:43:56,299 htmlparser.py[line: 25] INFO: End tag: p
2016-07-20 19:43:56,299 htmlparser.py[line: 28] INFO: Data  
				
2016-07-20 19:43:56,299 htmlparser.py[line: 19] INFO: Start tag: div
2016-07-20 19:43:56,299 htmlparser.py[line: 28] INFO: Data 
					
2016-07-20 19:43:56,299 htmlparser.py[line: 19] INFO: Start tag: input
2016-07-20 19:43:56,300 htmlparser.py[line: 25] INFO: End tag: input
2016-07-20 19:43:56,300 htmlparser.py[line: 28] INFO: Data 
					
2016-07-20 19:43:56,300 htmlparser.py[line: 19] INFO: Start tag: input
2016-07-20 19:43:56,300 htmlparser.py[line: 25] INFO: End tag: input
2016-07-20 19:43:56,300 htmlparser.py[line: 28] INFO: Data 
				
2016-07-20 19:43:56,300 htmlparser.py[line: 25] INFO: End tag: div
2016-07-20 19:43:56,300 htmlparser.py[line: 28] INFO: Data 
			
2016-07-20 19:43:56,300 htmlparser.py[line: 25] INFO: End tag: div
2016-07-20 19:43:56,301 htmlparser.py[line: 28] INFO: Data 
			
2016-07-20 19:43:56,301 htmlparser.py[line: 19] INFO: Start tag: div
2016-07-20 19:43:56,301 htmlparser.py[line: 28] INFO: Data 
				
2016-07-20 19:43:56,301 htmlparser.py[line: 19] INFO: Start tag: p
2016-07-20 19:43:56,301 htmlparser.py[line: 28] INFO: Data 图文详情
2016-07-20 19:43:56,301 htmlparser.py[line: 19] INFO: Start tag: img
2016-07-20 19:43:56,301 htmlparser.py[line: 25] INFO: End tag: p
2016-07-20 19:43:56,301 htmlparser.py[line: 28] INFO: Data 
				
2016-07-20 19:43:56,302 htmlparser.py[line: 19] INFO: Start tag: div
2016-07-20 19:43:56,302 htmlparser.py[line: 28] INFO: Data 
					
2016-07-20 19:43:56,302 htmlparser.py[line: 19] INFO: Start tag: p
2016-07-20 19:43:56,302 htmlparser.py[line: 28] INFO: Data 											
2016-07-20 19:43:56,302 htmlparser.py[line: 25] INFO: End tag: p
2016-07-20 19:43:56,302 htmlparser.py[line: 19] INFO: Start tag: p
2016-07-20 19:43:56,302 htmlparser.py[line: 19] INFO: Start tag: br
2016-07-20 19:43:56,303 htmlparser.py[line: 25] INFO: End tag: br
2016-07-20 19:43:56,303 htmlparser.py[line: 25] INFO: End tag: p
2016-07-20 19:43:56,303 htmlparser.py[line: 19] INFO: Start tag: p
2016-07-20 19:43:56,303 htmlparser.py[line: 19] INFO: Start tag: br
2016-07-20 19:43:56,303 htmlparser.py[line: 25] INFO: End tag: br
2016-07-20 19:43:56,303 htmlparser.py[line: 25] INFO: End tag: p
2016-07-20 19:43:56,303 htmlparser.py[line: 19] INFO: Start tag: p
2016-07-20 19:43:56,304 htmlparser.py[line: 19] INFO: Start tag: br
2016-07-20 19:43:56,304 htmlparser.py[line: 25] INFO: End tag: br
2016-07-20 19:43:56,304 htmlparser.py[line: 25] INFO: End tag: p
2016-07-20 19:43:56,304 htmlparser.py[line: 19] INFO: Start tag: p
2016-07-20 19:43:56,304 htmlparser.py[line: 28] INFO: Data 接口测试专用商品,商品详情简介
2016-07-20 19:43:56,304 htmlparser.py[line: 19] INFO: Start tag: br
2016-07-20 19:43:56,304 htmlparser.py[line: 25] INFO: End tag: br
2016-07-20 19:43:56,304 htmlparser.py[line: 25] INFO: End tag: p
2016-07-20 19:43:56,305 htmlparser.py[line: 28] INFO: Data 
				
2016-07-20 19:43:56,305 htmlparser.py[line: 25] INFO: End tag: div
2016-07-20 19:43:56,305 htmlparser.py[line: 28] INFO: Data 
			
2016-07-20 19:43:56,305 htmlparser.py[line: 25] INFO: End tag: div
2016-07-20 19:43:56,305 htmlparser.py[line: 28] INFO: Data 
		
2016-07-20 19:43:56,305 htmlparser.py[line: 25] INFO: End tag: div
2016-07-20 19:43:56,305 htmlparser.py[line: 28] INFO: Data 		
	
2016-07-20 19:43:56,305 htmlparser.py[line: 25] INFO: End tag: div
2016-07-20 19:43:56,305 htmlparser.py[line: 28] INFO: Data 
	
2016-07-20 19:43:56,306 htmlparser.py[line: 19] INFO: Start tag: img
2016-07-20 19:43:56,306 htmlparser.py[line: 28] INFO: Data 
	
2016-07-20 19:43:56,306 htmlparser.py[line: 19] INFO: Start tag: script
2016-07-20 19:43:56,306 htmlparser.py[line: 25] INFO: End tag: script
2016-07-20 19:43:56,306 htmlparser.py[line: 28] INFO: Data 
    
2016-07-20 19:43:56,306 htmlparser.py[line: 19] INFO: Start tag: script
2016-07-20 19:43:56,306 htmlparser.py[line: 25] INFO: End tag: script
2016-07-20 19:43:56,307 htmlparser.py[line: 28] INFO: Data 
    
2016-07-20 19:43:56,307 htmlparser.py[line: 19] INFO: Start tag: script
2016-07-20 19:43:56,307 htmlparser.py[line: 25] INFO: End tag: script
2016-07-20 19:43:56,307 htmlparser.py[line: 28] INFO: Data 
	
2016-07-20 19:43:56,307 htmlparser.py[line: 19] INFO: Start tag: script
2016-07-20 19:43:56,307 htmlparser.py[line: 25] INFO: End tag: script
2016-07-20 19:43:56,307 htmlparser.py[line: 28] INFO: Data 
	
2016-07-20 19:43:56,308 htmlparser.py[line: 19] INFO: Start tag: script
2016-07-20 19:43:56,308 htmlparser.py[line: 28] INFO: Data 
			
	var priceLimita = $(".orange").text();
	var soldCounta = $("#soldCount").text();
	var skua = $(".standard_sku").text();
	
            // 滚动窗口来判断按钮显示或隐藏
            $(window).scroll(function() {
                if ($(this).scrollTop() > 120) {
                    $('.top-bg').show(100);
                } else {
                    $('.top-bg').hide(100);
                }
            });
            
            function choose(obj,price,sku,standardSoldCount){
            	if(!$(obj).attr('disabled')){
            	if($(obj).hasClass('active')){
            		$(".orange").text(priceLimita);
                	$("#soldCount").text(soldCounta);
                	$(".standard_sku").text(skua);
                	 $(obj).removeClass('active');
            	}else{
	            	$(".standard_sku").text("(库存:"+sku+"件)");
	            	$(".orange").text("￥"+price);
	            	$("#soldCount").text("销量:"+standardSoldCount+"件");
	            	$(".spec").removeClass('active');
                    $(obj).addClass('active');
            	}
            	}
            }
            
           
            
            $(function(){
            	/* $(".spec").tap(function(){
                    if(!$(this).attr('disabled')){
                        if($(this).hasClass('active')){
                            $(this).removeClass('active');
                            
                        }else{
                        	
                        }
                    }                    
                }); */
                
            	TouchSlide({
    				slideCell : "#slideBox",
    				mainCell : ".bd ul",
    				effect : "leftLoop",
    				pageStateCell : ".pageState"
    			});            	            	
				
            	$(".bottom-details img").width($(".top").width());
            });
            
            // jQuery实现动画滚动
            $('.top-bg').click(function(event) {
                event.preventDefault();
                $('html, body').scrollTop(0);
            });
			
			$(".bottom > p img").click(function(){
                $(this).parent().next().toggle();
                if($(this).parent().next().css("display")=="block"){
                    $(this).attr("src","/images/mall/down.png");
                }else{
                    $(this).attr("src","/images/mall/up.png");
                }
            });
            
            $(".jia").click(function(){
            	var val = $(this).siblings(".val");
            	var count = parseInt(val.text());
                if (isNaN(count)) {
                	count = 1;
                } else {
                	count += 1;
                }
                val.text(count);
            });
            $(".jian").click(function(){
            	var val = $(this).siblings(".val");
            	var count = parseInt(val.text());
                if (isNaN(count) || count <= 1) {
                	count = 1;
                } else {
                	count -= 1;
                }
                val.text(count);
            });
            
            $(".addbtn").click(function(event){
            	if($(this).prop("disabled") == true)
            		return false;
            	var params = {
   					mallGoodsId : "26838",
   					standardId : standardId,
   					amount : $(".val").text(),
   					serial : "10549840601068216320",
   					openId : "ous64uFCCLMyXYDJ-MkNilyCI5C"
   				};
            	
            	var standard = 1;
            	if(standard == 2 && $(".active").length < 1){
    				doAlert("no", "请选择商品的规格");
    				return;
    			}
            	if(standard == 2){
            		var standardId = $(".active").attr("data");
    				params.standardId = standardId;
            	}
            	$.post("/addtocart", params, function(result){
            		if (null == result || !result.success) {
            			toast(result.message);
    					return;
    				}
    				//更新购物车数量
    				/* var cartNum = $(".cartNum").text();
    				if (null == cartNum || "" == cartNum || typeof (cartNum) == undefined) {
    					$(".carts").append("<span class='cartNum'>1</span>");
    				} else {
    					if (null != result.attach && result.attach > 0) {
    						$(".cartNum").text(result.attach);
    					}
    				} */
    				toast("已经成功加入购物车");
            	});
            });
		$(".buybtn").click(function(event) {
			if($(this).prop("disabled") == true)
        		return false;
			$(this).attr("disabled","disabled");
			var standard = 1;
        	if(standard == 2 && $(".active").length < 1){
				doAlert("no", "请选择商品的规格");
				$(this).removeAttr("disabled");
				return;
        	}
        	if(standard == 2){
        		var standardId = $(".active").attr("data");
        		window.location.href = "/mall/tobuy/1?mallGoodsId=26838&amount=" + $(".val").text() + "&type=1&serial=10549840601068216320&standardId="+standardId;
        		return;
        	}
			window.location.href = "/mall/tobuy/1?mallGoodsId=26838&amount=" + $(".val").text() + "&type=1&serial=10549840601068216320";
		});
	
2016-07-20 19:43:56,308 htmlparser.py[line: 25] INFO: End tag: script
2016-07-20 19:43:56,309 htmlparser.py[line: 28] INFO: Data 

2016-07-20 19:43:56,309 htmlparser.py[line: 25] INFO: End tag: body
2016-07-20 19:43:56,309 htmlparser.py[line: 28] INFO: Data 

2016-07-20 19:43:56,309 htmlparser.py[line: 25] INFO: End tag: html
2016-07-20 19:43:56,309 htmlparser.py[line: 28] INFO: Data 

2016-07-20 19:43:56,309 htmlparser.py[line: 33] INFO: Comment：加入判断用户是否关注公众号功能 add by lipengfei at 2015-11-9  
2016-07-20 19:43:56,309 htmlparser.py[line: 28] INFO: Data 
  	
	
2016-07-20 19:43:56,309 htmlparser.py[line: 19] INFO: Start tag: script
2016-07-20 19:43:56,310 htmlparser.py[line: 25] INFO: End tag: script
2016-07-20 19:43:56,310 htmlparser.py[line: 28] INFO: Data 
	
2016-07-20 19:43:56,310 htmlparser.py[line: 19] INFO: Start tag: script
2016-07-20 19:43:56,310 htmlparser.py[line: 28] INFO: Data 
		$(function() {
			//var SHOP_SERIAL = getCookie("SHOP_SERIAL");
			var SHOP_SERIAL = "10549840601068216320";
			if(null != SHOP_SERIAL && SHOP_SERIAL != ""){
				$.ajax({
					url : '/saofu_mobile/checkUserBindStatus',
					data : {
						"serial" : SHOP_SERIAL
					},
					type : 'post',
					cache : false,
					dataType : 'json',
					success : function(data) {
						if (data != null) {
							var guildFocusStr = data.guildFocusStr;
							if(guildFocusStr != null && guildFocusStr == "1"){
								var hasBindedShop = data.hasBindedShop;
								if(hasBindedShop == "0"){
									var qrName = data.QRPublicName;
									var qrUrl = data.QRCodeURL;
									if(qrName != "" && qrUrl != ""){
										var params = qrName+"**"+qrUrl;
										followModule(params);
									}
								}
							}
						} 
					},
					error : function() {
					}
				});
			}
		});
				
	
2016-07-20 19:43:56,310 htmlparser.py[line: 25] INFO: End tag: script
2016-07-20 19:43:56,310 htmlparser.py[line: 28] INFO: Data 

2016-07-20 19:43:56,310 wechatno_wemall.py[line: 103] INFO: [['', '\r\n\r\n\r\n\r\n\r\n\r\n'], ['', '\r\n'], ['link', '  \r\n'], ['link', '\r\n'], ['html', '\r\n'], ['head', '\r\n'], ['meta', '\r\n'], ['meta', '\r\n'], ['meta', '\r\n'], ['meta', '\r\n'], ['meta', '\r\n'], ['meta', '\r\n'], ['title', '微商城'], ['title', '\r\n'], ['link', '\r\n'], ['link', '\r\n'], ['link', '\r\n'], ['script', '\r\n'], ['script', '\r\n'], ['style', '\r\n* {\r\n\tmargin: 0;\r\n\tpadding: 0;\r\n}\r\n\r\nhtml {\r\n\tcolor: #626262;\r\n}\r\n\r\na {\r\n\ttext-decoration: none;\r\n}\r\n\r\nol,ul {\r\n\tlist-style: outside none none;\r\n}\r\n\r\n.left {\r\n\tfloat: left;\r\n}\r\n\r\n.right {\r\n\tfloat: right;\r\n}\r\n\r\n.in-block {\r\n\tdisplay: inline-block;\r\n}\r\n\r\n.orange {\r\n\tcolor: #c58d04;\r\n}\r\n\r\n.grey {\r\n\tcolor: #adadad;\r\n}\r\n\r\n.bg-color {\r\n\tbackground: #ececec;\r\n}\r\n\r\n#wrapper {\r\n\twidth: 100%;\r\n\tmargin: 0 auto;\r\n}\r\n\r\n.header {\r\n\twidth: 100%;\r\n\toverflow: hidden;\r\n\tborder-bottom: 1px solid #eaeaea;\r\n}\r\n\r\n.top {\r\n\twidth: 90%;\r\n\tmargin: 0 auto;\r\n\tpadding-bottom: 1em;\r\n}\r\n\r\n.top p {\r\n\tmargin: 0.5em 0;\r\n\tfont-size: 0.8em;\r\n}\r\n.top>p:first-child{\r\n\tfont-size:1.1em;\r\n}\r\n\r\n.fonts {\r\n\tfont-size: 1em !important;\r\n\tmargin: 0.8em 0 !important;\r\n}\r\n\r\n\r\n.jian {\r\n\tdisplay: inline-block;\r\n\twidth: 1.5em;\r\n\theight: 1.5em;\r\n\tline-height: 1.5em;\r\n\tborder: 1px solid #d1d1d1;\r\n\tborder-right: 0 none;\r\n\tborder-top-left-radius: 4px;\r\n\tborder-bottom-left-radius: 4px;\r\n\ttext-align: center;\r\n\tmargin-left:0.4em;\r\n}\r\n\r\n.val {\r\n\tbackground: #fff;\r\n\tdisplay: inline-block;\r\n\twidth: 3.5em;\r\n\theight: 1.5em;\r\n\tline-height: 1.5em;\r\n\tborder: 1px solid #d1d1d1;\r\n\ttext-align: center;\r\n}\r\n\r\n.jia {\r\n\tdisplay: inline-block;\r\n\twidth: 1.5em;\r\n\theight: 1.5em;\r\n\tline-height: 1.5em;\r\n\tborder: 1px solid #d1d1d1;\r\n\tborder-left: 0 none;\r\n\tborder-top-right-radius: 4px;\r\n\tborder-bottom-right-radius: 4px;\r\n\ttext-align: center;\r\n}\r\n\r\n.button {\r\n\twidth: 47%;\r\n\theight: 3em;\r\n\tcolor: #fff;\r\n\tborder: none;\r\n\tborder-radius: 4px;\r\n}\r\n\r\n.addbtn {\r\n\tbackground: #edb23e;\r\n\tmargin-right: 3%;\r\n}\r\n\r\n.buybtn {\r\n\tbackground: #f96364;\r\n}\r\n\r\n.bottom {\r\n\tborder-top: 0.5em solid #eeeeee;\r\n\tpadding-bottom: 3em;\r\n    position: relative;\r\n    width:100%;\r\n}\r\n\r\n.bottom .bottom-details{\r\n\twidth:100%;\t\r\n\tword-break:break-all;\r\n\toverflow-x: hidden; \r\n}\r\n\r\n.bottom-details h1,.bottom-details h2,.bottom-details h3,.bottom-details h4,.bottom-details h5{\r\n\tword-break:break-all;\r\n}\r\n\r\n.bottom > p:first-child {\r\n\ttext-indent: 1em;\r\n}\r\n\r\n.bottom > p img{\r\n    width: 1em;\r\n    position: absolute;\r\n    top:0.8em;\r\n    right: 1em;\r\n}\r\n\r\n.bottom-details p {\r\n\ttext-indent: 1em;\r\n\tword-break:break-all;\r\n}\r\n\r\n.inline-padding {\r\n\tdisplay: inline-block;\r\n\tpadding-left: 0.8em;\r\n}\r\n\r\n.inline-paddings {\r\n\tdisplay: inline-block;\r\n\tpadding-left: 1.6em;\r\n}\r\n\r\n.footer {\r\n\twidth: 100%;\r\n\theight: 3em;\r\n\tposition: fixed;\r\n\tbottom: 0;\r\n\tbackground: #fff;\r\n\tcolor: #b6b6b6;\r\n\ttext-align: center;\r\n\tborder-top: 1px solid #eaeaea;\r\n}\r\n\r\n.footer a {\r\n\tcolor: #626262;\r\n\tdisplay: inline-block;\r\n\theight:1em;\r\n\tline-height:1em;\r\n\tpadding-top: 1em;\r\n\tpadding-bottom: 1em;\r\n}\r\n.footer .inline-paddings-right{\r\n    padding-top: 1em;\r\n    float: right;\r\n}\r\n.footer img {\r\n\tdisplay: inline-block;\r\n\twidth: 1em;\r\n}\r\n\r\n.top-bg{\r\n    position: fixed;\r\n    bottom: 3.5em;\r\n    right: 1em;\r\n    width: 2em;\r\n    display: none;\r\n    filter:alpha(opacity=40);       /* IE */\r\n    -moz-opacity:0.4;              /* Moz + FF */\r\n    opacity: 0.4;     \r\n}\r\n.spec{\r\n    display: inline-block;\r\n    margin: 0 1em 0.8em 0;\r\n    font-size:0.7em;\r\n    padding:0.3em 1em;\r\n    border:1px solid #ccc;\r\n    border-radius:3px;\r\n    cursor:pointer;\r\n}\r\n.fonts a.active{\r\n    border: 2px solid #d2b57b;\r\n}\r\n.guige{\r\n    float: left;\r\n    width: 40px;\r\n}\r\n.guige-detail{\r\n    margin-left: 40px;\r\n}\r\n.guige-detail a[disabled]{\r\n    background: none repeat scroll 0 0 #fff;\r\n    color: #e3e3e3;\r\n    cursor: default;\r\n}\r\n/* 本例子css -------------------------------------- */\r\n.slideBox {\r\n\tposition: relative;\r\n\twidth: 100%;\r\n\theight: 240px;\r\n\toverflow: hidden;\r\n}\r\n\r\n.slideBox .hd {\r\n\tposition: absolute;\r\n\twidth: 100%;\r\n\theight: 27px;\r\n\tbottom: 0;\r\n\tleft: 0;\r\n\tz-index: 1;\r\n}\r\n\r\n.slideBox .hd img {\r\n\twidth: 11px;\r\n}\r\n\r\n.slideBox .bd {\r\n\tposition: relative;\r\n\tz-index: 0;\r\n}\r\n\r\n.slideBox .bd li {\r\n\tposition: relative;\r\n}\r\n\r\n.slideBox .bd li img {\r\n\twidth: 100%;\r\n\theight: 240px;\r\n\tdisplay: block;\r\n}\r\n\r\n.slideBox .bd li a {\r\n\t-webkit-tap-highlight-color: rgba(0, 0, 0, 0); /* 取消链接高亮 */\r\n}\r\n\r\n.slideBox .hd a {\r\n\tdisplay: block;\r\n\twidth: auto;\r\n\tposition: absolute;\r\n\tbottom: 0.5em;\r\n\tright: 0.5em;\r\n\tpadding: 0.1em 0.7em;\r\n\ttext-align: center;\r\n\tcolor: #fff;\r\n\tbackground-color: rgba(0, 0, 0, 0.6);\r\n\tborder-radius: 4px;\r\n}\r\n.slideBox>.a-img{\r\n    position: fixed;\r\n    top:1em;\r\n    right: 0.5em;\r\n    display: block;\r\n    width:2em;\r\n    height: 2em;\r\n    border-radius: 2em;\r\n    background-color: rgba(0, 0, 0, 0.6); \r\n    z-index: 2;\r\n}\r\n.slideBox>.a-img>img{\r\n    width: 1em;            \r\n    position: absolute;\r\n    top:50%;\r\n    left: 50%;\r\n    margin-top:-0.5em;\r\n    margin-left: -0.5em;\r\n}\r\n.carts{\r\n\tposition: relative;\r\n}\r\n.cartNum{                      \r\n    display: inline-block;\r\n    width: 1.2em;\r\n    height: 1.2em;\r\n    line-height:1.2em;\r\n    border-radius: 1.5em;\r\n    background:#ff0000;  \r\n    position: absolute;\r\n    right: -0.7em;\r\n    top: 0.3em;\r\n    color: #fff;\r\n}\r\n#soldCount{\r\n\tfloat: right; \r\n\tfont-size: 0.8em; \r\n\tpadding-top: 0.3em;\r\n\tcolor:#adadad;\r\n}\r\n.freight{\r\n\tfont-size:0.8em;\r\n\tcolor:#adadad;\r\n}\r\n.standard_sku{\r\n\tfont-size:0.9em;\r\n\tcolor:#adadad;\r\n}\r\n@media all and (max-width:320px){\r\n\t.slideBox{\r\n\t\theight:240px;\r\n\t}\r\n\t.slideBox .bd li img {\r\n\t\theight:240px;\r\n\t}\r\n}\r\n@media all and (min-width:321px) and (max-width:360px){\r\n\t.slideBox{\r\n\t\theight:270px;\r\n\t}\r\n\t.slideBox .bd li img {\r\n\t\theight:270px;\r\n\t}\r\n}\r\n@media all and (min-width:361px) and (max-width:375px){\r\n\t.slideBox{\r\n\t\theight:281px;\r\n\t}\r\n\t.slideBox .bd li img {\r\n\t\theight:281px;\r\n\t}\r\n}\r\n@media all and (min-width:376px) and (max-width:384px){\r\n\t.slideBox{\r\n\t\theight:288px;\r\n\t}\r\n\t.slideBox .bd li img {\r\n\t\theight:288px;\r\n\t}\r\n}\r\n@media all and (min-width:385px) and (max-width:414px){\r\n\t.slideBox{\r\n\t\theight:311px;\r\n\t}\r\n\t.slideBox .bd li img {\r\n\t\theight:311px;\r\n\t}\r\n}\r\n@media all and (min-width:415px){\r\n\t.slideBox{\r\n\t\theight:360px;\r\n\t}\r\n\t.slideBox .bd li img {\r\n\t\theight:360px;\r\n\t}\r\n}\r\n'], ['style', '\r\n'], ['body', '\r\n\t'], ['div', '\r\n\t\t'], ['div', '\r\n\t\t\t'], ['div', '\r\n\t\t\t\t'], ['a', '\r\n                  '], ['img', '\r\n              \t'], ['img', '\r\n\t\t\t\t'], ['div', '\r\n\t\t\t\t\t'], ['ul', '\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t'], ['img', '\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t'], ['img', '\r\n\t\t\t\t'], ['img', '\r\n\t\t\t\t'], ['div', '\r\n\t\t\t\t\t'], ['a', '\r\n\t\t\t\t'], ['a', '\r\n\t\t\t'], ['a', '\r\n\t\t'], ['a', '\t\t\r\n\t\t'], ['div', '\r\n\t\t\t'], ['div', '\r\n\t\t\t\t'], ['p', '\r\n\t\t\t\t\t接口-测试商品1\r\n\t\t\t\t'], ['p', '\r\n\t\t\t\t'], ['p', '\r\n\t\t\t\t\t接口测试专用,烦请勿删,勿操作\r\n\t\t\t\t'], ['p', '\t\t\t\t\r\n\t\t\t\t'], ['p', '\r\n\t\t\t\t\t单价:\r\n\t\t\t\t\t'], ['span', '\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t￥0.01\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t'], ['span', '\r\n\t\t\t\t\t'], ['span', '销量:6件'], ['span', '\r\n\t\t\t\t'], ['span', '\r\n\t\t\t\t\r\n\t\t\t\t\t'], ['p', '运费:'], ['span', '4.00元'], ['span', '\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t'], ['p', '\r\n\t\t\t\t\t数量:'], ['span', '-'], ['span', '1'], ['span', '+'], ['span', '\r\n\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t'], ['span', '(库存：999994件)'], ['span', '\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t'], ['span', ' \r\n\t\t\t\t'], ['div', '\r\n\t\t\t\t\t'], ['input', '\r\n\t\t\t\t\t'], ['input', '\r\n\t\t\t\t'], ['input', '\r\n\t\t\t'], ['input', '\r\n\t\t\t'], ['div', '\r\n\t\t\t\t'], ['p', '图文详情'], ['img', '\r\n\t\t\t\t'], ['div', '\r\n\t\t\t\t\t'], ['p', '\t\t\t\t\t\t\t\t\t\t\t'], ['p', '接口测试专用商品,商品详情简介'], ['br', '\r\n\t\t\t\t'], ['br', '\r\n\t\t\t'], ['br', '\r\n\t\t'], ['br', '\t\t\r\n\t'], ['br', '\r\n\t'], ['img', '\r\n\t'], ['script', '\r\n    '], ['script', '\r\n    '], ['script', '\r\n\t'], ['script', '\r\n\t'], ['script', '\r\n\t\t\t\r\n\tvar priceLimita = $(".orange").text();\r\n\tvar soldCounta = $("#soldCount").text();\r\n\tvar skua = $(".standard_sku").text();\r\n\t\r\n            // 滚动窗口来判断按钮显示或隐藏\r\n            $(window).scroll(function() {\r\n                if ($(this).scrollTop() > 120) {\r\n                    $(\'.top-bg\').show(100);\r\n                } else {\r\n                    $(\'.top-bg\').hide(100);\r\n                }\r\n            });\r\n            \r\n            function choose(obj,price,sku,standardSoldCount){\r\n            \tif(!$(obj).attr(\'disabled\')){\r\n            \tif($(obj).hasClass(\'active\')){\r\n            \t\t$(".orange").text(priceLimita);\r\n                \t$("#soldCount").text(soldCounta);\r\n                \t$(".standard_sku").text(skua);\r\n                \t $(obj).removeClass(\'active\');\r\n            \t}else{\r\n\t            \t$(".standard_sku").text("(库存:"+sku+"件)");\r\n\t            \t$(".orange").text("￥"+price);\r\n\t            \t$("#soldCount").text("销量:"+standardSoldCount+"件");\r\n\t            \t$(".spec").removeClass(\'active\');\r\n                    $(obj).addClass(\'active\');\r\n            \t}\r\n            \t}\r\n            }\r\n            \r\n           \r\n            \r\n            $(function(){\r\n            \t/* $(".spec").tap(function(){\r\n                    if(!$(this).attr(\'disabled\')){\r\n                        if($(this).hasClass(\'active\')){\r\n                            $(this).removeClass(\'active\');\r\n                            \r\n                        }else{\r\n                        \t\r\n                        }\r\n                    }                    \r\n                }); */\r\n                \r\n            \tTouchSlide({\r\n    \t\t\t\tslideCell : "#slideBox",\r\n    \t\t\t\tmainCell : ".bd ul",\r\n    \t\t\t\teffect : "leftLoop",\r\n    \t\t\t\tpageStateCell : ".pageState"\r\n    \t\t\t});            \t            \t\r\n\t\t\t\t\r\n            \t$(".bottom-details img").width($(".top").width());\r\n            });\r\n            \r\n            // jQuery实现动画滚动\r\n            $(\'.top-bg\').click(function(event) {\r\n                event.preventDefault();\r\n                $(\'html, body\').scrollTop(0);\r\n            });\r\n\t\t\t\r\n\t\t\t$(".bottom > p img").click(function(){\r\n                $(this).parent().next().toggle();\r\n                if($(this).parent().next().css("display")=="block"){\r\n                    $(this).attr("src","/images/mall/down.png");\r\n                }else{\r\n                    $(this).attr("src","/images/mall/up.png");\r\n                }\r\n            });\r\n            \r\n            $(".jia").click(function(){\r\n            \tvar val = $(this).siblings(".val");\r\n            \tvar count = parseInt(val.text());\r\n                if (isNaN(count)) {\r\n                \tcount = 1;\r\n                } else {\r\n                \tcount += 1;\r\n                }\r\n                val.text(count);\r\n            });\r\n            $(".jian").click(function(){\r\n            \tvar val = $(this).siblings(".val");\r\n            \tvar count = parseInt(val.text());\r\n                if (isNaN(count) || count <= 1) {\r\n                \tcount = 1;\r\n                } else {\r\n                \tcount -= 1;\r\n                }\r\n                val.text(count);\r\n            });\r\n            \r\n            $(".addbtn").click(function(event){\r\n            \tif($(this).prop("disabled") == true)\r\n            \t\treturn false;\r\n            \tvar params = {\r\n   \t\t\t\t\tmallGoodsId : "26838",\r\n   \t\t\t\t\tstandardId : standardId,\r\n   \t\t\t\t\tamount : $(".val").text(),\r\n   \t\t\t\t\tserial : "10549840601068216320",\r\n   \t\t\t\t\topenId : "ous64uFCCLMyXYDJ-MkNilyCI5C"\r\n   \t\t\t\t};\r\n            \t\r\n            \tvar standard = 1;\r\n            \tif(standard == 2 && $(".active").length < 1){\r\n    \t\t\t\tdoAlert("no", "请选择商品的规格");\r\n    \t\t\t\treturn;\r\n    \t\t\t}\r\n            \tif(standard == 2){\r\n            \t\tvar standardId = $(".active").attr("data");\r\n    \t\t\t\tparams.standardId = standardId;\r\n            \t}\r\n            \t$.post("/addtocart", params, function(result){\r\n            \t\tif (null == result || !result.success) {\r\n            \t\t\ttoast(result.message);\r\n    \t\t\t\t\treturn;\r\n    \t\t\t\t}\r\n    \t\t\t\t//更新购物车数量\r\n    \t\t\t\t/* var cartNum = $(".cartNum").text();\r\n    \t\t\t\tif (null == cartNum || "" == cartNum || typeof (cartNum) == undefined) {\r\n    \t\t\t\t\t$(".carts").append("<span class=\'cartNum\'>1</span>");\r\n    \t\t\t\t} else {\r\n    \t\t\t\t\tif (null != result.attach && result.attach > 0) {\r\n    \t\t\t\t\t\t$(".cartNum").text(result.attach);\r\n    \t\t\t\t\t}\r\n    \t\t\t\t} */\r\n    \t\t\t\ttoast("已经成功加入购物车");\r\n            \t});\r\n            });\r\n\t\t$(".buybtn").click(function(event) {\r\n\t\t\tif($(this).prop("disabled") == true)\r\n        \t\treturn false;\r\n\t\t\t$(this).attr("disabled","disabled");\r\n\t\t\tvar standard = 1;\r\n        \tif(standard == 2 && $(".active").length < 1){\r\n\t\t\t\tdoAlert("no", "请选择商品的规格");\r\n\t\t\t\t$(this).removeAttr("disabled");\r\n\t\t\t\treturn;\r\n        \t}\r\n        \tif(standard == 2){\r\n        \t\tvar standardId = $(".active").attr("data");\r\n        \t\twindow.location.href = "/mall/tobuy/1?mallGoodsId=26838&amount=" + $(".val").text() + "&type=1&serial=10549840601068216320&standardId="+standardId;\r\n        \t\treturn;\r\n        \t}\r\n\t\t\twindow.location.href = "/mall/tobuy/1?mallGoodsId=26838&amount=" + $(".val").text() + "&type=1&serial=10549840601068216320";\r\n\t\t});\r\n\t'], ['script', '\r\n'], ['script', '\r\n'], ['script', '\r\n'], ['script', '\r\n  \t\r\n\t'], ['script', '\r\n\t'], ['script', '\r\n\t\t$(function() {\r\n\t\t\t//var SHOP_SERIAL = getCookie("SHOP_SERIAL");\r\n\t\t\tvar SHOP_SERIAL = "10549840601068216320";\r\n\t\t\tif(null != SHOP_SERIAL && SHOP_SERIAL != ""){\r\n\t\t\t\t$.ajax({\r\n\t\t\t\t\turl : \'/saofu_mobile/checkUserBindStatus\',\r\n\t\t\t\t\tdata : {\r\n\t\t\t\t\t\t"serial" : SHOP_SERIAL\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttype : \'post\',\r\n\t\t\t\t\tcache : false,\r\n\t\t\t\t\tdataType : \'json\',\r\n\t\t\t\t\tsuccess : function(data) {\r\n\t\t\t\t\t\tif (data != null) {\r\n\t\t\t\t\t\t\tvar guildFocusStr = data.guildFocusStr;\r\n\t\t\t\t\t\t\tif(guildFocusStr != null && guildFocusStr == "1"){\r\n\t\t\t\t\t\t\t\tvar hasBindedShop = data.hasBindedShop;\r\n\t\t\t\t\t\t\t\tif(hasBindedShop == "0"){\r\n\t\t\t\t\t\t\t\t\tvar qrName = data.QRPublicName;\r\n\t\t\t\t\t\t\t\t\tvar qrUrl = data.QRCodeURL;\r\n\t\t\t\t\t\t\t\t\tif(qrName != "" && qrUrl != ""){\r\n\t\t\t\t\t\t\t\t\t\tvar params = qrName+"**"+qrUrl;\r\n\t\t\t\t\t\t\t\t\t\tfollowModule(params);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} \r\n\t\t\t\t\t},\r\n\t\t\t\t\terror : function() {\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t\t\t\t\r\n\t'], ['script', '\r\n']]
2016-07-20 19:43:56,312 wechatno_wemall.py[line: 106] INFO: 正在解析返回结果:200
2016-07-20 19:43:56,313 testcase.py[line: 83] INFO: 步骤[1]执行失败,停止执行用例[id=80, name=test-n-点击商品]
2016-07-20 19:43:56,313 mydb.py[line: 63] INFO: query：UPDATE case_step_report_tb SET runresult="Fail",reason="Traceback (most recent call last):  File E:\Projects\interface_project\interface\wechatno_wemall.py, line 110, in test_click_goods    self.assertEqual(find_flag, 1, msg=无法打开商品详情)AssertionError: 0 != 1 : 无法打开商品详情", protocol_method="get", runtime="2016-07-20 19:43:56" WHERE executed_history_id = 20160720194355 AND testcase_id = 80 AND step_id = 82 AND project='pj_wecharno' AND testplan='无计划'
2016-07-20 19:43:56,316 testsuite.py[line: 67] INFO: 正在更新用例执行结果
2016-07-20 19:43:56,316 mydb.py[line: 63] INFO: query：UPDATE testcase_report_tb SET runresult="Fail", runtime="2016-07-20 19:43:56" WHERE executed_history_id = 20160720194355 and testcase_id = 80 AND project='pj_wecharno' AND testplan='无计划'
2016-07-20 19:43:56,455 testsuite.py[line: 60] INFO: 记录测试用例到到测试用例报表
2016-07-20 19:43:56,456 mydb.py[line: 50] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720194355', '102', 'test-n-点击立即购买按钮', '微商城-模拟点击页面跳转', '无计划', 'pj_wecharno', 'Block', '')
2016-07-20 19:43:56,459 testsuite.py[line: 63] INFO: 开始执行测试用例[id=102，name=test-n-点击立即购买按钮]
2016-07-20 19:43:56,459 testcase.py[line: 48] INFO: 记录测试步骤到测试步骤报告表
2016-07-20 19:43:56,459 mydb.py[line: 50] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20160720194355', '102', 'test-n-点击立即购买按钮', '无计划', 'pj_wecharno', 104, 1, '', 'http', 'm.test.saofu.cn', '80', '{"class":"ToBuyGoods","function":"test_to_buy_goods","method":"get","url":"/mall/tobuy/1?","params":{"mallGoodsId":"26838","amount":1,"type":1,"serial":"var"}}', '{"status":200}', 'Block', '', '')
2016-07-20 19:43:56,460 testcase.py[line: 60] INFO: 开始执行步骤操作[第1步]
2016-07-20 19:43:56,460 casestep.py[line: 64] INFO: 调用的方法为：ToBuyGoods.test_to_buy_goods
2016-07-20 19:43:56,461 wechatno_wemall.py[line: 221] INFO: 正在发起GET请求...
2016-07-20 19:43:56,461 httpprotocol.py[line: 50] INFO: 发起的请求为：http://m.test.saofu.cn:80/mall/tobuy/1?mallGoodsId=26838&type=1&serial=10549840601068216320&amount=1
2016-07-20 19:43:56,461 httpprotocol.py[line: 51] INFO: {'Cookie': '10549840601068216320=ous64uFCCLMyXYDJ-MkNilyCI5C'}
2016-07-20 19:43:56,473 wechatno_wemall.py[line: 227] INFO: 正在解析返回结果:





<!DOCTYPE html>
<link rel="stylesheet" href="/css/bind/banner.css?v=3.4.0-f5bd5" />  
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <link rel="stylesheet" href="/css/skin-nr-min.css?v=3.4.0-f5bd5">
        <link rel="stylesheet" href="/css/cpn.css?v=3.4.0-f5bd5">
        <link rel="stylesheet" type="text/css" href="/css/zepto.alert.css?v=3.4.0-f5bd5">
        <title>哎哟~出错啦~</title>
    </head>
    <body>
        <script type="text/javascript" src="/js/zepto.min.js?v=3.4.0-f5bd5" ></script>
        <script type="text/javascript" src="/js/zepto.alert.min.js?v=3.4.0-f5bd5"></script>
        <script type="text/javascript">
        Zepto(function($){
			function myAlert(content) {
		    	$.dialog({
		    		content : content,
		    		title : "alert"
		    	});
		    }
			
				
				
					myAlert("噢...出错了!请等待管理员处理,稍后重试");					
				
			
        });
        </script>
    </body>
</html>

2016-07-20 19:43:56,473 htmlparser.py[line: 28] INFO: Data 






2016-07-20 19:43:56,474 htmlparser.py[line: 28] INFO: Data 

2016-07-20 19:43:56,474 htmlparser.py[line: 19] INFO: Start tag: link
2016-07-20 19:43:56,474 htmlparser.py[line: 25] INFO: End tag: link
2016-07-20 19:43:56,474 htmlparser.py[line: 28] INFO: Data   

2016-07-20 19:43:56,474 htmlparser.py[line: 28] INFO: Data 

2016-07-20 19:43:56,474 htmlparser.py[line: 19] INFO: Start tag: html
2016-07-20 19:43:56,474 htmlparser.py[line: 28] INFO: Data 
    
2016-07-20 19:43:56,474 htmlparser.py[line: 19] INFO: Start tag: head
2016-07-20 19:43:56,475 htmlparser.py[line: 28] INFO: Data 
        
2016-07-20 19:43:56,475 htmlparser.py[line: 19] INFO: Start tag: meta
